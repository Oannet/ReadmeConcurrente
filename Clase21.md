(61) Clase 21 2024 08 30 - YouTube
https://www.youtube.com/watch?v=jqBpab4SUTM

Transcript:
(00:00) y bueno entonces la clase anterior nos la pasamos viendo definiciones no definición tras definición qu era un objeto este un objeto pues es un conjunto de métodos y esos métodos describen al objeto eh los objetos tienen estados por ejemplo la cola el estado de una cola Pues sería los elementos que hay en esa cola después de cierta operación después de cierta llamada método que era una especificación secuencial era simplemente el conjunto de historias que se pueden obtener a partir del lenguaje o de la especifica O sea bueno de la
(00:37) descripción del objeto vale por ejemplo tenemos un lenguaje o sea lo podemos ver así un lenguaje de de una cola que consiste en encolar este el primer elemento al inicio y desencolar al final Cuáles son las cadenas que podemos obtener de Este lenguaje pues son todas las de la especificación secuencial es lo que habíamos visto con respecto a esto okay Ah entonces eh Ah bueno además no habí hemos visto que que esta ejecución era correcta con respecto a un a un este objeto de tipo cola por qué Porque si nuestra cola
(01:18) empieza como vacía No se hace un dq y se regresa vacío pues es correcto se hace un enq de B se hace un enq de a y después es un deq de B Es correcto que se regrese B no perdón se hace un deq y se regresa B Entonces es correcto que se regrese B no es lo que habíamos visto entonces decíamos que esta ejecución es correcta con respecto a la especificación secuencial de una cola no o sea es una cadena válida para la descripción de lo que es una cola Okay este Bueno entonces eh habíamos visto que además que la dificultad va a
(02:01) erradicar cuando H pues por ejemplo esta esta ejecución Pues será es secuencial no O sea tenemos lo que hace el hil c luego el B luego la a y casi casi que se forman en el tiempo no O sea de forma secuencial y lo difícil pues ser Va a ser cuando tengamos una ejecución así de concurrente no O sea todos se traslapan Aquí estos se traslapan también entonces cómo la ordenamos no de forma para que quede un historia secuencial y nosotros podamos ver si esa historia secuencial es correcta con respecto a una cola o
(02:35) sea hacer lo mismo vale que en la que en esta ejecución que en esta de aquí entonces Eh bueno digamos que el objetivo de todo esto es definir o entender así la definición formal de la laliz habilidad este en el libro nos manejan una Sí una que es como la pues la la base No de hecho lais habilidad la creó herlich este herlich y Win Pero bueno herlich es el uno de los autores del libro no entonces este como que es distinto al paper en el que lo inventó no O sea como que lo pone más lindo sientre en el libro pero bueno es una definición
(03:17) formal y la verdad es que está pesadita No yo la la clase pasada se las enseñé era esta de acá no la clase pasada simplemente se las comenté así muy rápido pero pues sí está como pesadona no o sea son muchos conceptos porque tenemos este concepto de extensión de una historia este la extensión de de H es H prima no eh tenemos eh una historia legal e además tenemos es otro concepto que es complete una historia o sea como la historia completa de H prima o sea de todavía de la extensión tenemos este concepto de linealización
(04:04) y y este y ya no Pero bueno vamos a vamos a ell o sea como que el objetivo es que entendamos bien Qué dice aquí en la definición porque pues yo les puedo platicar de queé trata laiz habilidad pero pues lo mejor es entenderlo no O sea como tener esa confianza de que podemos leer esa y decimos Ah no hay problema no la entendemos entonces Eh bueno entonces tenemos Eh bueno yo les había comentado no que primero es muy importante la la definición de laliz habilidad está eh En este sobre bueno definida escrita no sobre este concepto
(04:44) de una historia Dónde estaba aquí no una secuencia finita de eventos de invocación y de respuesta entonces eh se ve o sea como esta es una historia no eh tenemos un evento de invocación otro de invocación uno de respuesta otro de respuesta de invocación de invocación de respuesta y de y bueno Y este no tiene no es es esa invocación está pendiente porque no tiene una respuesta asociada O sea que haga match no no tiene una Eh entonces habíamos visto la definición de una historia luego habíamos visto la definición de una extensión de una
(05:31) historia no la extensión simplemente es completar bueno Añadir HM eh alguna eh respuesta para las invocaciones pendientes Pero puede ser que añadas o no añadas por eso dice cero o más Okay entonces habíamos visto que por ejemplo pues esta es nuestra historia no que describe perfecto esta ejecución Entonces esta historia es el conjunto no de secuencias de de secuencia de eventos de invocación por ejemplo estos y de respuesta como este y como este y este también entonces e para obtener su extensión estas son dos dos este formas en las que podemos
(06:18) obtener su extensión uno pues es que se mantenga igualito no porque Podemos agregar cero respuestas en este caso pues agregamos cero respuestas cero est as agregadas Y en este caso es otro ejemplo de otra H bueno de una extensión H prima y aquí s agregamos una entonces Esta es una extensión en donde agregamos una respuesta vale Y pues la respuesta va de acuerdo ya vieron Como por ejemplo quién le falta aquí el enq de dos este agregamos que prop true no como que lo logró es es una extensión de una historia y compl de una historia
(07:07) simplemente era e quitar las invocaciones que están pendientes Entonces por ejemplo si tenemos esta historia que es la que describe esta ejecución e este para ser complete simplemente lo que hacíamos era quitar La invocación que está pendiente No que en este caso pues sería esta de aquí esta porque no tiene una respuesta que hach Okay entonces este sería un complete una una historia completa de H entonces Bueno una historia completa siempre nos va a devolver histori sin invocaciones pendientes No eso es lo que
(07:48) siempre nos va a devolver y además podemos hablar de las historias como las proyecciones la proyección de la historia del Lilo p la podemos escribir así y es solamente lo que hace el hilo p no también podríamos escribir la la proyección sobre lo que hace el hilo q no y pues iría ahora pondríamos todo lo que hace el Q no todo esto y esto bueno eh Por así esto sería todo lo que hace el no luego también podemos hablar sobre las proyecciones del objeto a eh de cada objeto por ejemplo podríamos tener una ejecución que que tuviera este
(08:42) no no solo una cola no sino que fuera este cola uno y cola dos no Entonces que el hilo tenemos el hilo a y al hilo bueno otra vez al hilo p al Vale entonces el hilo p pues Pues no sé él hace a la cola uno hace un enq no y regresa a true y este otro hilo a la cola dos hace un deq y obtiene empty entonces podría ser así entonces la proyección de la historia de en este caso no eh Bueno voy a ponerlo así de esta Pues sería H de q1 Pues sería q1 bueno p el proceso p hace a q1 un enq de un Ay no me un poquito más por
(09:53) acá p q 1 pun 1 y obtiene la respuesta q1 y true Vale entonces esa sería la proyección del hilo de sobre la cola q1 y también la podemos obtener sobre la cola q2 no eso es como nada más lo que sucede Pues en cada cola o en cada proceso las proyecciones vale Este Entonces una historia secuencial se ve de esta forma tenemos un evento de invocación y un evento de respuesta que le hace match es decir que comparten el mismo proceso y el mismo objeto Vale entonces así así funciona Este Entonces por ejemplo pues tenemos
(10:46) aquí la la el evento de invocación y de respuesta con invocación y respuesta con match enseguida no O sea entre ellos no hay ningún otro evento si hubiera por aquí entre ellos pues no sé un evento de invocación de alguien más o de respuesta pues ya no sería secuencial Entonces esta historia habíamos visto que sí era secuencial porque tenemos evento de invocación y de respuesta enseguida invocación y respuesta enseguida Eh entonces Bueno un montón de de definiciones Ah y finalmente esta de historia legal Porque la vamos a ocupar
(11:23) una historia Es legal si para cada objeto en una historia este pues la proyección o sea como Pues esta subsecuencia que pasa en el objeto x es es este está en especificación secuencial del objeto x Ah traducido no este Pues digamos que así lo podríamos poner en traducción No si lo que pasa eh si lo que se ejecuta ejecuta en x es una historia correcta con respecto a un objeto eh tipo x no O sea no sé si lo que se ejecuta en la cola uno es correcto con respecto a un objeto Pues de tipo cola no O sea con la descripción realmente de una cola y este
(12:26) ya habíamos visto que que la historia anterior si era si era legal porque sucedía esto primero O sea si lo vemos así Primero se se hacía un deq se regresaba en es correcto no inicialmente la cola está vacía Entonces no hay nada que devolver se agrega enq se agrega a Perdón se agrega B se agrega a con dos enq y Y si hace como se hace un deq al final y se regresa a b es correcto eso no era complete eso no era complete Cómo Ajá bueno Esta es una historia legal no estamos hablando de historias legales Vale y una historia esta Pues sí En
(13:10) realidad es una historia también se podría ver completa no la diferencia entre complete y legal completes cuando están las invocaciones con su respuesta verdad Ah a ver a ver este Ah bueno Sí sí Sebastián sí complete a ver para que cachemos sí complete es son historias o sea como que lo obtenemos siempre lo que obtenemos siempre complete como dice Sebastián son invocaciones que tienen todo su respuesta es decir Son son este historias que no tienen ya invocaciones pendientes Pues sí es una forma así de verlo Ajá eh pero es distinto complete
(13:51) es esto O sea pues es es formar una historia pero ya vion aquí en realidad no es este [Música] es muy importante ver la diferencia porque aquí para decir que una historia es una historia o sea como que lo que puede ser legal es la historia secuencial Okay entonces una historia que es complete O sea que está completa no precisamente secuencial miren una historia complete simplemente pues no tienes invocaciones pendientes pero de allá que sea secuencial pues no porque tenemos por ejemplo en este caso este tenemos una invocación de p no y no
(14:33) tenemos su respuesta Enseguida lo que tenemos es una invocación de q Entonces ya por esto Esta historia no es secuencial lo que sí es que está completa porque no tiene invocaciones pendientes o sea porque pues le quitamos Esta no es que esa era la que no tenía no tenía una respuesta que hacía mach esta operación esta invocación Entonces es distinto una historia complete pues es simplemente como pues tenemos H no una historia que que está pues bastante concurrente porque no las invocaciones no siguen su respuesta vale o sea como que entre
(15:07) entre su invocación y su respuesta tenemos una operación no que no es de no es de p entonces complete Simplemente te dice toma toma la la historia h y Quítale la pendiente que en este caso pues le quitamos esta no Y para decir que una historia secuencial Es legal o sea para decir que una historia Es legal pues ocupa ser secuencial vale o sea las historias que son concurrentes que no tienen esta de invocación respuesta en seguido invocación su respuesta enseguida esas no son este no pueden ser como confirmadas no que nos o sea bueno
(15:42) no pueden no podemos analizar si es legal o no ocupamos que a fuerzo sean secuenciales Entonces vamos a decir si es legal como que legal es como este Bueno yo lo dejé así pero en realidad se puede podemos decir como válida o correcta o sea vamos a decir que una historia secuencial es correcta válida o legal no sí este si es correcta con respecto a lo que se espera de una cola entonces dice Entonces cuál es la diferencia entre secuencial sola y secuencial legal aj por ejemplo que vamos a copiar esta por ejemplo no
(16:48) si si esta implementación no imagínense que es una historia h1 y esta es la h2 entonces en vez de volver B devuelva a No si ambas O sea si lo analizamos todo ambas son ejecuciones secuenciales Por qué Porque pues tienen invocación y respuesta su respuesta enseguida no invocación y su respuesta enseguida así todas las dos ambas son secuenciales pero esta Es legal ahí esta Es legal y esta no Es legal Por qué Porque no es correcta O sea no está en especificación secuencial de en este caso una cola por qué porque pues si este regresa
(17:42) a no cumple vamos a ponerlo así no cumple con fifo no lo que requerimos de una cola o sea una cadena válida de una cola sería este que cumpla con fifo no Y esta no cumple Entonces esta no Es legal pero ambas son secuenciales Okay Ajá vale Vale entonces eh esta historia pues si no sería secuencial vale Bueno ya lo habíamos resuelto la vez pasada este o sea que Ajá Exacto Sí zuriel sí O sea que haga bien lo que debería hac sí O sea si tenemos una definición estricta de una cola con sus métodos y todo y tenemos esta ejecución pues no cumple
(18:45) con lo que con la definición estricta de una cola no la cola pide que sea fifo eh Bueno es como que en resumen es eso No pide que sea fifo que los enq se metan al final y los de que saquen lo del inicio eso eso ocupa entonces no es correcta con respecto a lo que se espera a lo que debería ser una col Okay entonces este una historia secuencial pues eh Ah bueno Esta no es una historia secuencial pues simplemente porque tenemos este Ah bueno creo que aquí ya lo s escrito no porque a cada invocación no le sigue ens seguida su respuesta Que hace mach y
(19:27) ya siendo más específico podríamos decir que que esta este evento no hace match con el de arriba Pues no porque pues es otra invocación no de otro de q Entonces no no es much y ya ahora sí eh Por ejemplo tenemos esta esta historia vale entonces la escribiríamos este ver cre que la Tena por aquí escrita no volver escribir cre que estaba por aquí tal vez está Okay entonces este q de uno no y luego
(20:34) en q de P y luego regresa uno Luego haces q true Luego haces e este de empty e bueno de q así de q Luego haces en q de dos luego no no hay regreso no p no tiene y el que sí regresa es el de p no p q M es lo que sucede vale Esta es la historia que describe este o sea ya viéndola así no la historia así escrita que describe esta ejecución Entonces nosotros Bueno aquí la pregunta es Cuál es la extensión de la historia cómo sería Cómo se les ocurre que sería H prima que era una extensión este
(21:38) agregar cero o más respuestas a las invocaciones pendientes si lo vemos así Cuál sería la extensión no es única verdad aj s exacto no esica Ajá dice dice Sebastián Ajá sí sí sí exacto no es es una extensión si le agregando eso nada más sería la ponemos así y si agregamos una sería O sea a quién completamos a esta que es La invocación pendiente le pusimos su respuesta Que hace vale o sea bueno e dice puede ser en q true dice suriel Ah Ajá Exacto Sí en Exacto Sí y podría ser ella misma Ajá también podría ser
(22:43) ella misma podría ser ella misma Sí o sea como que puedes agregar cero o más vale o sea si como dice si agregamos cero Pues nos queda esta Y si agregamos una nos queda esta Por qué era true a si fuera ella misma no sería completa no porque solo queda solo es enq Sí a ver primero porque es true di o sea este vamos a ver Déjenme ver si acá lo tengo [Música] Bueno mejor se los digo acá se vea mucho rollo meternos Eh bueno por qué
(23:47) escogimos true Y por qué no decimos Ah false no O sea como que s este como que también queda esa duda no O sea si la puedo completar con true pues me imagino que con no así me lo inventé entonces este digamos que el objetivo de hacer la extensión y de hacer también el complete o sea también el complete es que eh lo completemos o lo quitemos para que nos favorezca entonces este por ejemplo en este caso como se regresa empty no O sea como este deq regresa empty quiere decir que que pues al final esta operación no
(24:40) vio a esta no O sea como que podremos pensar que que en el tiempo sucedieron así no para que este regresara en ti y no dos no Entonces digamos que el resultado de este en2 podría ser s podría ser true pero tamb tamb podría ser false por qué Porque si completamos nuestra nuestra nuestra extensión como más nos convenga Es decir para que sea correcta con respecto a una cola pues no importa o sea lo que si realmente se pudo encolar dos o no porque al final nuestra ejecución va a ser correcta o sea como este des encol empti no importa
(25:20) no Entonces voy a ponerles aquí que el objetivo de H prima y complete y complete de H es e pues modificar H de la forma más conveniente y esta forma más conveniente o sea esto conveniente eh O sea que sea correcto con respecto al objeto al objeto Okay por ejemplo así O sea aquí da igual otra extensión como dice Alejandro no podría ser Eh así en vez como de poner aquí no esto otra H prima Pues sería
(26:29) No le pongas true le ponemos false esa sería otra sí y y sigue siendo correcto o sea esta esta bueno sea como que nos conviene no se nos da igual lo que si se en cols o no porque pues este regresó en Pero bueno ahorita vamos a para laiz habilidad entonces dice Bueno pregunt si fuera misma no se vería completa no porque solo es enq Ajá sí O sea hay que quitar ese enq para que sea completa y en extensiones también se puede agregar otro registro o sea que ahora p hiciera otro de Q en q eso se puede Ah no no no O sea solo puedes
(27:17) agregar respuestas Pero no invocaciones vale Este sí O sea no puedes agregar como que p haga Ajá sí sí sí que p haga invocaciones Okay entonces eh Por ejemplo Cuál es la historia completa de de esta No si nada más tenemos H sería lo que hace primero p pues es este buen vamos a ponerlo todo no p hace voy a ponerlo abreviado hace en Bueno si en peterson no se ha el objeto peterson hace el método Loc y luego este el el hilo q hace peterson punto Loc no Y entonces quien lo obtiene primero Pues sería p él diría peterson pensemos hay que ponerlo entró
(28:20) no como que entró aquí como como que lo logró vale es ese es el true como que pues ya está ahí o sea él tiene candado él logró terminar de ejecutar Y luego el enq este de p hace en que bueno vamos a pensar que en su cola no es el objeto de tipo cola hace un enq de dos y ya Ya acaba no O sea no no obtiene la respuesta Entonces esta esta historia por ejemplo no cuál sería su complete complete H dice peterson lock y p peterson Ajá sí exacto no bueno a ver como que H quitando eso no más bien sí este qué tenemos incompleto como dice
(29:26) Camilo pues estas dos no entonces para hacer la historia Entonces quito estos Ahí está es es complete quito esos dos no qu nos dice complete quita este bueno quito las ocasiones pendientes ahí está no eso sería una historia completa y Bueno pues esta historia es correcta con respecto a un candado no Bueno pues nada más se hace un lo y ya no pasa más Es trivial okay entonces que el K no estaría oí el kul Ah si tienes razón no disculpa Qué bueno que me si es más bien este Ay sí esta
(30:35) quito esta y quito esto no sí si tienes razón este peterson si aj dice si hubiera un p no tendría por quitarse nada ajá si no tendría por quitarse Nada pues nada más quitaríamos el inicio no de esta Ajá porque pues este aún así no tiene No tiene final no O sea también ocuparíamos este o sea como para hacer la extensión este se ya compl no pero si quisiéramos hacer la extensión de esta historia pues podríamos este simplemente completar este completamos tanto esta esta de aquí y esta de acá no
(31:45) se habría que completar ambas entonces pues harías como pq en este bueno true y harías un este q peterson no para completarlas o sea como que una extensión no agregar dos respuestas en este caso aun Pues sí como que si la agregas no estaría correcto Pero bueno vamos a no me adelanto [Música] entonces que una historia esté bien formada y es lo que van a escuchar seguido en en el libro es siempre como de el proceso está bien formado la historia está bien formada no es es un concepto así teórico que lo que lo único
(32:36) que nos dice es muy sencillito hay que aprendernos no bien que dice cada cosa pero lo que dice es que cada sub storia que hace cada hilo es secuencial vale o sea a A qué se refieren eh se refieren a que este por ejemplo noo poniendo esta Si tienes esta historia no este la historia la subh hisoria de cada hilo o sea podemos hablar de la proyección o sea lo que sucede en p siempre es eh digamos que evento de invocación y evento de respuesta es secuencial vale o sea no puede ser que y después otra vez no evento de
(33:35) invocación y pues seguiría uno de respuesta y así va cosas que no podrían pasar Pues es que no fuera evento de invocación y otro evento de invocación vale o sea no esto no podría pasar por qué porque este no tiene su ma no es como lo que consideramos siempre que no pasan cosas raras así O sea que que por ejemplo p no puede invocar de que no obtener respuesta y luego vuelve a hacer otro de que y no tiene respuesta y luego hace otro no O sea no no puede ser todo tiene que ser haces invocación esperas respuesta y no puedes hacer otra
(34:14) invocación si la respuesta no ha llegado es así como los eventos o sea los hilos son secuenciales vale es una consideración entonces eh Ahora sí en la laliz idad eh tenemos primero Bueno este principio que está en el libro que lo que nos dice es que las llamadas a métodos deben tomar efecto o bueno aquí por ejemplo esta palabra no appear to take effect instantaneously no podemos decir que parece que toman efecto de forma instantánea vale en el intervalo entre su invocación su evento de invocación y su evento de respuesta es lo que nos
(34:57) dice Este primer principio y bueno este quiere decir A qué se refiere no que por ejemplo tenemos esta esta esta implementación de este de dos hilitos de p1 y p2 Y eso claramente es una cola entonces quiere decir que eh siguiendo esta definición Este primer principio que deben tomar efecto entre su evento de invocación que es este por ejemplo evento eh de invocación y el evento de respuesta que es cuando acaban Entonces nos dice debe parecer que toman efecto de forma instantánea en un punto vale en bueno dice aquí en algún
(35:49) momento no O sea en un momento consideremos un punto entonces de y bueno Y este punto en el que toman efecto le vamos a a denotar como el punto de linealización e entonces Bueno vamos en en la teoría en la teoría vamos a poder encontrar eh analizando el código la implementación vamos a decir mira en este punto parece que puede tener efecto para los demás hilos como se acuerdan cuando cuando vimos la implementación Go fre que yo les dije o sea que analizamos dijimos bueno en qué momento Nilo va a a ver que yo encol algo y habíamos dicho
(36:32) Bueno yo creo que va a ser cuando se haga Tail más más No porque ahí es cuando el apuntador este ahorita ahorita voy ahí es cuando el apuntador cambia y entonces los demás sí los van a ver no este el método de que se acuerdan que el método de que comprobaba decía a Tail menos Head es igual a cer en Entonces no hay nada que desencolar no Y entonces este por eso era importante no si estaban si el hilo este pedos estaba encando algo pues el otro hilo no se iba a enterar hasta que cambiara realmente Tail si no lo cambia Pues él siempre va a regresar
(37:18) como o la cola está vacía entonces hay un punto siempre en los códigos bueno teóricamente Lu es más complicado pero hay un punto en el código este y que eso se va a reflejar en en el intervalo de ejecución en donde toma efecto es decir vamos a considerar esto este esta forma de toma efecto de forma instantánea es como que eh la llamada eh Es la llamada a un método no sé sea este pues no sé enq deq lo que sea es percibida por los demás hilos vale zil Así quedaría o sea como ahorita hay que pensar como de Okay como
(38:25) que toma efecto en algún punto sí eh digamos que hay que considerarlo el punto en el que mi enq realmente se ve para los demás o sea realmente pueden ver que yo encle una no porque pues como el código pues es enorme no O sea pues no sé no enorme no pero pues tenemos no sé líneas de código la uno la dos la tres o sea en este intervalo pues ejecutamos varias líneas de código no entonces va a llegar un momento entre este intervalo no sé que la línea no sé en la siete Pues por fin hice Tail este aument el el el el apuntador Y entonces ahora sí
(39:06) alguien puede decir Ay mira yo sí vi el a No yo sí vi a y entonces yo voy a regresar a porque yo yo vi que realmente se encol una Vale entonces así este así funciona eh este este primer principio de elisabel Eh bueno espero Al final todo tenga más sentido Pero vamos este no O sea no dejen Deer de poner atención Vale entonces en las implementaciones que están basadas en cados podemos encontrar fácilmente el punto No de linealización Por qué Porque pues este punto o sea digamos que este el enq va a tener efecto en los demás en cuanto él
(39:55) gane el candado no O sea en cuanto Se ganó el candado Pues es obvio que este va a tener efecto al punto de linealización ahí no Por qué Porque nadie más va a poder hacer nada hasta que pues el hilo se deje el candado Entonces el punto de linealización definitivamente va a estar aquí no y ya luego el siguiente hilo que logre adquirir el candado pues va a tener su punto de lariza no y así O sea cuando usamos candados es muy como Pues la verdad fácil ver dónde tiene efecto okay Porque pues si tú tomaste el candado y
(40:35) haces un enq Pues cuando lo dejes probablemente yo voy a ver lo que hiciste No no va a haber pierde este y yo voy a percibir que tuvo efecto entre que se tomó el candado y que lo dejaste no O sea en ese momento tú hiciste un en en ese momento hiciste un deq Entonces es es sencillo cuando estamos críticas como que hasta podemos formarlos así de forma secuencial entonces en las implementaciones cuando no ocupamos candados hay que ver así un zoom en el código y y analizar en esta se acuerdan es una implementación que ya vimos que
(41:17) dónde tiene efecto pues puede tener efecto aquí si la cola está este llen pues el en va a regresar vamos a considerar que regresa no return falso y si la cola no está llena pues no voy a percibir que que agrego algo hasta que este se haga esto no Y entonces aquí no sé se va a regresar que realmente se encol algo no es como que lo que representa el Tail más más no O sea yo quiere decir que ya metí algo este en en en el último índice de Tail y que hasta la aumente Entonces en este punto los hilos bueno el hilo des encolador que
(42:05) bueno se acuerdan esta implementación solo es para dos hilos Vale entonces el hilo de encolador en este punto él va a decir Ah mira si es cierto yo este este veo que Tail es distinto no de o sea por ejemplo si estaba vacía pues va a decir Ah mira fin mente puedo ver no y o o no No si está si no est si está vacía pues va a regresar este en este caso y ya que esté que no esté vacía va a regresar este lo que esté al inicio no que en este caso va a ser e bueno en este caso pues regresa x no x pero digamos que este eh Hasta que modifique eh en este punto
(43:09) también tiene efecto para para los hilos encolador o sea también el que se haga hasta línea 18 quiere decir que se aumentó get y por ejemplo si no si estaba llena entonces por fin veo no que este que puedo realmente agregar algo pero si no pues simplemente voy a regresar pues está lleno vale pero son como puntos en el código que son claves vale como que podemos decir que ahí justo este son los puntos de linealización porque si está llena este si si está llena Pues voy a terminar aquí y en este punto va a tener efecto
(43:50) para los demás no y si no está llena Pues en este punto voy a decirles a los demás que ya hay algo nuevo con el Tail más y lo mismo con los des encolador en este punto voy a decir pues mira está vacía Este ya ya acaba no y si no está vacía este pues regreso el primer elemento y muevo el el el cabezal de get no Entonces en este punto cuando muevo el cabezal de get tiene efecto para el encolador entonces así O sea como son estos puntos en donde parece que toma efecto esto entonces Bueno ese es el primer principio luego antes de meternos
(44:32) este a lo que viene este les voy a hablar del orden parcial y del orden total Okay el orden parcial simplemente este lo vamos a denotar con esta línea y esta línea en realidad pues la he estado usando ya O sea ya tiene no es la primera vez que la la ven no esta línea este en un conjunto x pues simplemente es una relación que es este irreflexiva o sea que por ejemplo si tenemos un enq de a no del mismo hilo p a un enq de a del mismo hilo o sea que es justo la misma operación no puede ser vale o Esto no puede ser que una
(45:18) operación este tenga un orden con con su mismo operación vale o [Música] sea bueno podos escribirlo así también no puede ser que suceda que yo mismo me apunto a mí no O sea como que yo me precedo a mí no Y esta relación también va a ser transitiva es decir que por ejemplo si si dos operaciones tienen una relación y esas Y esa Y esa última operación se relaciona con otra Pues entonces el orden se mantiene también de la primera a la última vale es como lo que o sea en realidad es así como est es una definición formal sobre conjuntos
(46:02) pero es lo que hemos visto no es como lógico en el tiempo o sea si tenemos eh este así no tenemos nada más al hilo a Entonces si suponemos que el hilo a está ejecutando Pues no sé un enq de a y luego hace un enq de b y luego hace un deq y exada no entonces quiere decir que aquí hay un orden y una Bueno una relación en el orden parcial y esa es otra relación en orden parcial no entonces quiere decir que también se cumple esto Pues sí no pues en el tiempo si esto sucedió primero y estas tien una relación Pues esta fuerza sucedió antes
(46:45) no eh Y tienen esta relación Entonces ese es el orden parcial entonces aquí por ejemplo el orden parcial eh sería eh de aquí acá de aquí acá y de aquí acá de aquí acá e pero quiero que noten que estas no tienen orden parcial así lo vamos a considerar Vale y estas dos tampoco tienen orden parcial entre esas dos vale Por qué Porque son concurrentes no podemos decir que una sucede antes que otra entonces Esas no y luego lo que consiste O sea la laliz abilidad tenemos un orden parcial que pues son las ejecuciones que son
(47:49) concurrentes hay ciertas operaciones que no tienen un orden parcial entre ellas que son como en estas dos y estas dos digamos que es par no y la idea de la analizaba es transformar esto a un orden total es decir el orden total va a ser un orden parcial o sea pero que para todos los distintos X y Y en este conjunto siempre se va a cumplir que hay un orden como que ya ven no como que ahí se ve que estamos tratando de que realmente obtener un orden secuencial no siempre una precede a otra entonces vamos a ver eh De hecho es lo que nos va
(48:29) a mostrar la Lis habilidad que un orden parcial lo vamos a poder extender a uno total Eh entonces este Y además lo que nos va a decir la niis habilidad es que sí tenemos un orden parcial este en X y Y entonces ese mismo orden se debe mantener en el orden total Entonces el orden par se mantiene al orden total Entonces por ejemplo no eh Bueno mejor me voy hasta acá Vale entonces cuál es ese orden la clase anterior Ya lo habíamos visto pero bueno hago mejor una nueva entonces este orden nos dice que la an elizabad nos dice que
(49:28) que para construir un orden parcial un orden total Hay que seguir estas reglas vale o sea digamos que la historia concurrente va a ser el orden parcial lo que vimos ahorita muy formal y la historia concurrente Perdón perdón la historia si la historia concurrente es el parcial y la historia secuencial es el total el orden total Entonces qué reglas vamos a seguir para construir esto es que si existe una precedencia entre una llamada a otra en el orden parcial entonces este debe suceder o sea debe tomar efecto antes esta situación tomar efecto
(50:11) Entonces qué nos dice que el orden parcial se mantiene al total H quién tiene un orden parcial ella no estas dos estas dos estas dos eh estas dos son estos órdenes no eh Ajá entonces pero si dos llamadas se traslapan voy a ponerlo en azul se pueden ordenar de la manera que más convenga Y cómo nos conviene Pues que sea correcta entonces quién se puede reordenar estas dos se pueden reordenar y estas dos se pueden reordenar Por qué Porque no existe un orden parcial entre esas entre ese entre cada par no O sea no existe aquí ni existe
(50:56) acá entonces ordénalas como quieras entonces eh Por ejemplo no si nos dicen esto y nos dicen además que las ordenemos como más nos convenga Pues nos conviene que es en q1 y se regrese true suceda antes en el orden Total que de q este Bueno voy a ponerlo se me olvidó poner q no este es de p con viene que suceda antes no que de q1 o sea como que pues cómo va a ser que se encola algo que no que no ha sucedido O sea no no tiene sentido que lo pongamos antes no nos conviene de acuerdo a lo que es correcto Okay entonces este
(51:45) después tenemos que mantener el orden parcial que es todas estas Y entonces nada más podemos reordenar estas eh cómo nos conviene este y bueno que suceda primero en q2 e del proceso Q que que suceda en q2 y que después suceda eh p de q eh 2 vale Yo sorpresa no este aquí que esta está incompleta no bueno Entonces ahora sí la generalizabilidad O sea ya la definición es esta tenemos sea una historia H bueno Perdón vamos a vamos a leerla bien una historia H es Line realizable vale H será inable sí H tiene una extensión H prima y
(52:44) existe una historia legal secuencial s tal que sucedan dos cosas primera condición que si completamos la extensión ser equivalente a esta historia legal secuencial este o sea digamos que es historia correcta secuencial Ese es el primer punto y el segundo es que cada llamada al método a método que preceda otra en H debe ser eh este igualito en ese o sea digamos que el orden si sucede eh si m0 existe un orden parcial entre m0 y M1 entonces debe existir también un orden total en ese de m0 a M1 vale o sea pues se debe mantener es lo que nos dice
(53:41) no es como como esto e el orden parcial se mantiene al Total no O esto de que la llamada al método que preceda otra debe tomar efecto también en el en el orden total Pues sí o es como es esta vale esta segunda línea pero lo que nos faltaba por completar esta este esta definición que no está tan formal es Qué vamos a hacer con las Ay discúlpenme qué vamos a hacer con las invocaciones pendientes vale es como lo que nos faltaba digamos que esto es lo que vimos la diapositiva anterior dejen Lo pongo aquí no diapositiva
(54:27) anterior esto ya lo sabemos no manten el orden parcial Pero además nos faltaba esto qué hacemos con las invocaciones pendientes Ah pues primero hay que completar las que podamos y luego esa bueno digamos que construirnos a poner respuestas agregar cerom más y ya las que no pudimos agregar pues las quitamos las invocaciones que están pendientes Y entonces ahora sí aplicamos Esto vale Ah cómo lo ven o sea este entonces a ver ya viendo esta esta implementación no ya no más acabó casi acabó mucha info Sí mucha info es que les dig pesado pesado pero
(55:13) por teoría porque en realidad siento que no está tan difícil pero tienen que entender se siento no la definición formal porque somos computos O sea no hay que ver también la teoría entonces bueno si tenemos esta historia entonces H prima de esta historia pues podríamos agregar aquí un true no O sea como toda la historia y al final hacemos agregamos un q este en q bueno Ah no sería así true Vale y complete Pues sería la misma porque ya está completa complete no y ahora sí ya la historia linealiza Pues aquí ya la
(56:12) completamos Y entonces a lo que se espera de una cola entonces decimos que esta ejecución es linealiza vale Y ya ahí acaba este Pero bueno o sea Lo bueno es que ya les esto sirve que lo procesan se les pega en su mente y Los vemos vale Este volvemos a revisar y vemos ejemplos no para ver este las implement las ejecuciones finalizarlos podremos ver otra vez el ejemplo lunes Claro claro Sí o sea vuelvo a repasar pero sirve que ya les di lo primero entonces este bueno que disfruten su fin no vemos sí Bonito fin recording Stop
