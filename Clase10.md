2024 08 16 10 01 42 - YouTube
https://www.youtube.com/watch?v=0-xiAtG5YAY

Transcript:
(00:28) Hola buenos días ah r
(01:41) Okay en la clase pasada vimos los primeros candaditos no O sea bueno este candos me refiero a a ya ver cómo están por dentro porque pues porque con noscemos sincronize y yo también les comenté que existe la interfaz log No pues sí ya hay cosas ya hechas pero pues nos interesa a nosotros como comput tologos Pues saber No qué hay abajo entonces e la clase anterior vi dos candados Pues la verdad medio chafas no el lock one y lock two porque medio chafas pues cumplen la exclusión mutua O sea si son un candado o sea para
(02:29) que un candado se un candado ocupa cumplir al menos exclusión mutua no y y están chejos porque pues no cumplen ambos se acuerdan no eran no eran deadlock free es decir qué quería decir esto que pues puede llegar un momento en que se quede congelado la ejecución el L One se quedaba congelado si ambos por ejemplo como en esta en esta ejecución si ambos leían este bueno ponían su bandera en verdadero en la línea siete y después veían al otro en la línea ocho este se iban a quedar en la línea ocho ahí dando vueltas en el ciclo gu no ahí
(03:07) se van a quedar se iban a quedar si ambos hacían o se ejecutaban lo de forma concurrente sucedía una ejecución así okay Y el lo este aquí no sucedía aquí no el L lo que podía pasar es que alguien se pusiera como víctima y que en la línea se siguiera siendo víctima porque el otro no llega a escribirse no O sea el otro quiere decir que no llega no quiere pasar entonces cuando cuando un hilo ejecuta el lock de forma solito no O sea de forma este e o sea va solo no O sea sin concurrencia pues se puede quedar congelado el candado entonces son dos
(03:55) escenarios en donde como no se cumple este se cumple mutua no se cumple de loock free y por lo tanto tampoco es Star free eh Entonces este ya finalmente habíamos visto un candado que sí cumple Bueno yo les había comentado no que sí cumple las tres eh la clase anterior simplemente lo único que vimos fue por qué satisface exclusión mutua entonces la prueba pues es igualita a las otras suponer bueno se les escribe medio fea pero este o sea el lib pues está ahí bien redactad No pero la idea general de la prueba es suponer
(04:35) por contradicción que existen secciones críticas no que se traslapan es decir que dos hilos pueden entrar o sea terminar de ejecutar lock Okay este y y aquí escribimos que pues no se puede porque lo que ocupa un hilo el hilo a para entrar en su sección crítica es que suceda esto eh y justo en este orden no ocupa primero escribir su bandera en verdadero luego ponerse como víctima y checar que uno o que ve no quiere entrar O sea que su bandera esté en falso o que ve quiere entrar pero que bese a la víctima y no
(05:13) él no y ya este y el hilo ve para tener su sección crítica ocupa tener su bandera en verdadero entonces pues esto claramente no se cumpliría no O sea esta primera parte entonces este se ocupa tener su bandera bueno se va a poner su bandera en verdadero y va a escribirse como víctima bueno para que él pueda entrar ocupa que Ah sea la víctima no lo cual es una contradicción porque víctim no puede ser igual a dos valores no no puede ser a y tampoco B entonces por eso decimos que se cumple exclusión mutua y nos íbamos a nos quedamos aquí
(05:53) Este sí entonces lo que aquí dice no que satisface entonces bueno para demostrar esto es distinto mi conexión a internet tantito es que m recording in progress
(07:30) Hola Sí ya me escuchan verdad sí Vale gracias Es que me había conectado a punto de acceso de abajo no sé por mi conus anda cambiando entonces comparto otra vez [Música] Bueno me avisan si si me dejo de
(08:34) escuchar Aunque la vez pasada creo que ni me escuchaba y este bueno hace rato no me escuchaban pero tampoco yo veía no este entonces [Música] ahorita Bueno Me comentan no si no escuchan Vale entonces e este ah sí vamos a ver un ejempo no no para demostrar que es starvision free si se dan cuenta como que es la primera vez que demostramos esto Bueno lo demostramos para el protocolo de alis y Bob no pero bueno para un candadito así ya en donde ambos Ejecutan lo mismo porque en el protocolo de Alice y Bob pues Alice tenía su protocolo y Bob el
(09:18) suyo no pero en este pues todos los hlos tienen el mismo protocolo bueno el mismo algoritmo entonces eh para para demostrar que realmente se cumple Vision free pues ocupamos demostrar que que este que un hilo siempre que quiera y que más bien que todo hilo siempre que quiera puede tomar el candado no entonces este vamos a empezar esta demostración suponiendo por contradicción que el hilo a se queda congelado no y y por ejemplo para para entender Como qué debería pasar para kilo a Ah bueno muy importante kilo queda congelado en el ciclo este
(10:06) e y y este B bueno eh es esto no el H se queda congelado en el ciclo y además pasa la opción uno no que B toma el candado repetidas veces no O sea a no puede pasar porque B lo tiene o la opción dos es que B está congelado con con este con a la primera opción si se dan cuenta este si sucede esto pues al menos este el candado sería pues deadlock free no porque pues Ah no puede pero es porque puede mucho no Y la segunda opción sería que que este que ni siquiera es no no es deadlock free no Por qué Porque ni siquiera o sea está
(10:59) congelado y ve también no entonces quiere decir que nadie puede o sea como que aquí ya vieron como que andamos demostrando tanto que es de loock free este y esto hay que demostrar que se cumple para ambos para ambos hilos no entonces eh Por qué no podría pasar vamos a la primera opción Vale entonces por qué no podría pasar que a eh se quede congelado y que B tome el cado repetidas veces vamos a ver aquí el código Entonces por ejemplo lo que pasa es este para que existan varias secciones críticas de B por ejemplo B su sección
(11:35) crítica número tal la k no O sea luego la sección crítica siguiente la k+ 1 o sea suponemos que B este le pasa así no k+ dos etcétera Okay entonces que ve puede tomar Así varias veces la sección crítica es decir varias veces termina de ejecutar el método loco okay entonces para que esto suceda tendría que ser poner su bandera en verdadero no por ejemplo voy poner ent y luego tendría que estar como victim berso combinación de log One y log two Ah bueno dejen otra vez hago este eh el repaso no este del algoritmo aquí tenemos nuestras
(12:41) variables compartidas variables compartidas y muy importante peterson es para dods hilos okay O sea no no más solo el hilo a y el hilo B Okay entonces este estas son nuestras variables compartidas Entonces si tenemos el hilo a tiene su bandera Okay y el hilo B el hilo B también tiene su bandera vale Y ambos comparten victim que es un entero o sea bueno porque aquí digamos que se escriben por sus ID vale ent por eso son enteros pero vamos a considerar no que es igual a a o puede ser igual a b No simplemente o sea
(13:36) igual al ide de a o igual al y de B Vale entonces lo que hacíamos Es que la línea ocho este Tú decías ponías tu propia bandera en verdadero o sea así como Oigan Yo quiero pasar y en la línea nueve pues eras muy amable y decías Pero bueno yo me pongo de víctima no entonces en la línea 10 puede salir de la línea 10 Este sí este no eres la víctima no y y este y además si el otro no quiere pasar no Pero por ejemplo puede ser que el otro quiera pasar pero él sea la víctima acá Este Bueno aquí lo había anotado Déjenme otra vez lo escribo aquí
(14:27) Entonces espero si yo soy la víctima es más fácil No si lo vemos escrito si yo soy la víctima y ve este Bueno voy a ponerlo así y el otro Quiere pasar y el otro Quiere pasar no entonces así este eso nos vamos a quedar esperando en el ciclo mientras se cumplan estas dos si el otro no quiere pasar o sea si su bandera está en falso No pues yo paso o si este el otro es la víctima Ah pues también paso no O sea si se cumple alguna deos pues me salgo de ese ciclo Okay entonces así como dice no por eso era la unión entre lo One y el one pu solo tenía las
(15:18) banderas y lo solo tenía el victim no se la variable victim Entonces ahora sí regresando esto suponemos no que que ve pues termina de el la k veces no luego K má un veces luego K más dos veces entonces en cada iteración por ejemplo en esta No qué tendría que pasar pues que primero saa que flag debe se igual a verdadero que se nombre como víctima no y Y eso es lo que tendría que pasar Eh Pero además qué se tendría que cumplir se tendría que cumplir eh Para a no se tiene que cumplir que uno que a sea este falso o que victim sea la sea a
(16:08) no y flag de a en este caso pues sea verdadero no bueno se tiene que cumplir o esto o esto no para que B pueda pasar pero aquí aquí suponemos que a se queda congelado en el ciclo O sea que a realmente Quiere pasar o sea realmente va está participando en algoritmo no es es que no vaya a hacer nada Quiere pasar entonces qué tuvo que hacer a para querer pasar pues poner su bandera en en verdadero no Y además que tuvo que hacer a pues nombrarse como víctima Okay entonces pongan que que este en este [Música] punto este Bueno voy a hacer aquí
(16:56) encimar un poquito pero ahorita copio la copiar [Música] página pegar página me voy a dar el ejos de Borrar esto ahorita vamos a la opción dos vale mientras no hagan caso a esto ahorita esto no está y ahorita vemos la opción dos en la siguiente página no me cojo Eh entonces bueno este tiene que pasar alguna de esas dos Entonces si analizamos este supongamos no que que aquí tenemos al hilo al hilo a y al hilo B no Entonces supongamos que aquí el hilo a empieza a ejecutar el lo no entonces Ah pues es la idea no suponer
(17:49) que está congelado entonces B ejecuta el lo y él termina no o sea puede tomar el candado y y este y hacer aquí una sección crítica sección crítica de B la ca no entonces este para ello pues claramente aquí victim Este es distinto a b no y flag de B es igual a true entonces aquí supongamos entonces que que victim es a y como a Quiere pasar pues acá tuvo que haber puesto su bandera de a en true Okay entonces qué va a pasar después pues B tiene que hacer unlock no para ya salir de la sección crítica en el unlock Qué hace B simplemente pone su
(18:48) bandera en falso no O sea digamos que la pasa a falso este en este punto no Y entonces a es una contradicción que ya no pueda salir digamos que de de esta de esta línea 10 no Si él ya tiene su bandera en verdadero y ya se había escrito como víctima entonces este cuando B deje el candado este eh eh a fuerzas va a tener que salir No porque sí O sea él va a seguir siendo la víctima pero ahora se va a cumplir que la bandera de B Es falso Entonces ya no va ya no va ya no se va a cumplir esto que sigas dando vueltas en el ciclo gu
(19:31) okay Entonces digamos que pues en cuanto él se nombre como falso Pues él tiene que terminar no no hay de otra y me dirían bueno Qué tal que se cumpla no que que este que ve por ejemplo no se me Lan Bueno yo lo pienso este aquí no que ve vuelva a ser el lock Y entonces este ve qué tendría que hacer No pues poner dice aquí eh este flag debe otra vez en true y además B Se tendría que poner como víctima no pero como ella está la línea 10 digamos que B es el que se pone como víctima como que le da le da el paso a a no O
(20:20) sea este como Ah ya estaba escrito como víctima digamos que el último que se va a escribir es B entonces automáticamente B entra al ciclo y se queda ahí dando vueltas hasta que a realmente logre obtener la sección crítica no O sea no hay de otra entonces aquí a fuerzas tiene que obtener la sección crítica lo cual es una contradicción no O sea no puede ser que ve que ha se quede congelado y que ve tome el candado repetidas veces no O sea que ha se quede dando vueltas en la línea 10 no es posible okay Porque porque como que esa
(20:53) esta línea la línea nueve como que es la la la amabilidad no de del hilo este B que él siempre se escribe como víctima entonces saca de víctima Y aunque en realidad su bandera esté en true porque él quiera pasar victim va a ser igual a vale como que más o menos cachan esta cosa con Por qué no no puede pasar que que ve obtenga el candado varias veces y que se quede congelado aún así queriendo pasar más o menos vale Okay entonces eso es el eso es el primer la primera opción no Y la segunda opción es este esta de acá vamos a
(21:41) pachar ahora esta Entonces vamos a suponer que ahora los dos sí los quieren pasar no como o sea este o sea no están dormidos no están ahí tratando de de obtener el candado entonces suponemos que ahora a Quiere pasar y b Quiere pasar entonces pero están congelados ambos O sea que hay un deadlock no hay un candado muerto Entonces por qué no podría pasar porque eventualmente no Y esto está como que más fácil eventualmente si tenemos que ambos no quieren tomar el candado Ejecutan lo no entonces La idea es como que aquí pues se quede como
(22:31) pendiente No o sea es como suponer que sucede esto por qué no podría pasar Bueno pues en un punto pues ambas banderas de los dos no de a y de B pues van a estar en verdadero no ambos quieren pasar y Y entonces va a llegar un punto acá en que quién sabe quién se escriba primero como víctima no supongamos que se escribe primero y ve después entonces si sucede algo así O sea siempre eventualmente no O sea Alguien tiene que ser el último que se escriba como víctima no entonces el el que no está como víctima es el que va a tener que
(23:12) pasar no O sea no es posible digamos que la opción dos no es posible porque victim es igual a a o a b no entonces uno de los dos siempre puede salir de la línea 10 starvation free este a ver quién le contesta zel Ajá sí dice que todos en algún momento pasan no Ajá lo que nos dice Star Vision free este así que en algún momento todos
(24:18) pasan Exacto Sí este es el starvation free es que todo hilo que quiera bueno que que bueno así como ya diciéndolo de forma así más estricta no es que eh todo los hilos que que este que ejecuten un método completan su o sea completan terminan de ejecutar este método de forma exitosa no eventualmente en el tiempo entonces traducido en candados o sea todo hilo que quiera tomar el candado eventualmente lo logrará no Esa es la traducción y este eventualmente pues es así como eh No es así como muy estricto en el tiempo pero sí lo van a
(25:05) hacer no O sea como sí que nadie se queda sin hambre exacto no Sí o sea eh libre de inanición se llama O sea que todos obtienen el tiempo del procesador Exacto sí como dice sebastiá Sí muy bien entonces eh nosotros para demostrar que es starvation free Pues en primera yo les les demostramos la opción uno no pues se cumple que es de l free O sea que este Bueno o sea que de hecho es es aún más fuerte No porque si ya se quedara congelado y b pudiera pasar pues se cumpliría el deadlock free pero yo Les comento que todavía es aún más fuerte no
(25:43) o sea es aún más fuerte que deadlock free O sea que no puede ser que B tome el candado múltiples veces y ya no no es lo que primero demostramos y ya en la segunda opción es que ni siquiera se cumple o sea nunca se queda congelado el candado no O sea siempre alguien puede obtenerlo vale es como que lo que se demuestra no opción dos siempre alguien puede obtenerlo y la opción uno es y pero De hecho no puede ser que alguien lo obtenga muchas veces y el otro no no O sea el otro se quede como con hambre diría Sebastián Vale entonces bueno Quiz
(26:20) Eh ya ya demostramos no peterson satisface starvation free Entonces ustedes creen que fada B loock free O sea que no hay un candado muerto Ajá sí como dice sael no también cumples así sí O sea sí lo satisface eem Por qué Porque starvation free no O sea que se cumpla para todos este pues es una generalización ni siquiera hay que como que demostrarlo no eh dice soriel un candado se queda congelado cuando nadie lo toma H Pues es que eh estas definiciones por ejemplo deadlock free no implica como esa definición lo que nos dice deadlock free
(27:12) Es que este eh es que es algún hilo siempre que quiera Ay que quiera que letra toma eventualmente el candado no es como esto sí O sea no no es como tan trivial o es como te están diciendo si alguien este ejecuta el método lock eventualmente tendrá éxito no y el starvation free es todo aquel que ejecuta el método lock eventualmente tendrá éxito o sea porque no no vale Si no quieres tomarlo no vale es como que están están este las definiciones o sea bueno estas propiedades no están como este como que est eventualmente te quedas
(28:10) pensando Okay luego Este bueno ahorita vimos algoritmos para de candados para dos hilos No ya vieron que como que el razonamiento está como pues bastante más complicado bueno como que no más complicado pero Eh hay que tomar más e más en cuenta cómo se traslapan las ejecuciones no en este caso solo tenemos dos hilitos y aún así hay que analizar no este a detalle e entonces S como que es otro rollo no A diferencia de lo secuencial Pues un algoritmo secuencial este simplemente pues es encontrar la invariante y ya está no Bueno ya aú Así
(28:55) es difícil a veces pero pero en la concurrencia como vimos por ejemplo cuando tenemos dos hilitos en las situaciones que pueden pasar no sea es como un análisis de los escenarios Cómo se traslapan estas operaciones Pero bueno ahora vamos a ver algoritmos de candados para n hilos Okay Eh entonces bueno este primero es el algoritmo filter y le llaman así el filtro no este algoritmo de filtrado Ajá sí Sebastián losas anteriores solo eran para dos hilitos no Y aún así ya vieron como el rollo Ajá sí O sea Uy qué chafa no O sea tus dos
(29:34) hilos eso para qué te sirve Pero bueno o sea nos sirve a nosotros para para O sea me sirvió a mí no y y así en el libro también para presentarnos este las dos propiedades deadlock free y starvation free no es como lo como que son más fáciles de ver ahí no creen y ya ahorita para en hilos van a ver que este como ya vimos para dos hilos o sea en esos candos más más sencillitos ahorita es más fácil este como que cachemos no O sea bueno a ver es de loock free es stv free a Sí o sea por eso Los vemos eh no crean que los Estamos perdiendo el
(30:09) tiempo o sea es para para este para empezar a a entender no cómo cómo se comportan esas dos propiedades este y bueno muy importante no que estamos nada más en el mundo bloqueante también hay un mundo que es no bloqueante no O sea donde no ocupamos hilos entonces ocupamos otras propiedades no para razonar por algoritmos pero buenoa siempre hay más entonces este el candado filter Está muy bonito porque es una generalización de peterson o sea este Casi casi no se Ah estamos viendo cada vez más no eh Y como que vamos ocupando
(30:46) como que el mismo concepto entonces Este sí es para n hilos entonces Bueno cómo funciona este candadito no hagan de cuenta que este dicho así bonito eh consiste en crear n salas n menos un salas de espera okay O sea tenemos n hilos no Y estos hilos todos este que quieren este pues vamos a pensar no este que quieren tomar la sección crítica no critical section y o sea imagínense no tenemos un montón de de hilitos así entonces lo primero que van a hacer los hilos es llegar a la a la sala de espera a la número uno no entonces imagínense
(31:35) que aquí tenemos n hilos y este se llama de filter se se viene se llama el candado de filtrado porque este a la sala dos se van a mover n men Un hilos y vamos a sacrificar a uno no es como esta misma este lógica de que tenemos una víctima entonces vamos a nombrar una víctima no victim no sé el L 10 no y los má un no pasan y ya entonces a la sala tres Pues ahora van a pasar n men2 hilos y y en la sala pues dos también no O sea no sé la víctima es el hilo no sé el hilo 35 no y así O sea siempre nombramos a a una víctima entonces va va a llegar
(32:25) un momento en el que pues ya en la sala n-3 vamos tres hilitos en la n-2 dos hilitos y en la sala n-1 este pues ya va a quedar un hilito y ese va a ser el que va a poder acceder a la sección crítica okay Entonces digamos que ya los que se quedaron aquí Bueno ven que pues se quedó aquí una víctima sacrificada no y aquí se quedó otra víctima sacrificada y así entonces este como que conforme fuimos avanzando fuimos dejando así aitos Entonces el el progreso de ellos va a depender del Progreso de los que pues ya avanzaron no
(33:04) a las demás este salas o sea de cómo vayan avanzando Todavía este a la siguiente no una vez que él Pudo salir de la sección crítica o sea dejar el candado entonces Eh pues oa es como esto que les platico aquí no O sea queramos en menos un salas en cada nivel ponemos una víctima por eso se va filtrando no y este y al final Pues realmente va a quedar un Ajá o sea solo hay un solo ganador como lo que queremos no en exclusión mutua que queremos este Cuál es la idea de un candado que solamente uno pueda tomar este el candado o sea solo uno puede
(33:46) acceder a esta sección crítica Okay entonces Bueno cómo cómo este se implementa esto no pues este candadito y en qué momento se el proceso Ajá Es que este Haz de cuenta que ya cuando el hilito que el hilito ganador no el que pasa la sección crítica deja el candado Entonces los que están en el nivel n-2 empiezan a avanzar no entonces uno de estos va a llegar y entonces este La idea es que pueda avanzar al nivel dos y así O sea como que Todos quieren avanzar al siguiente nivel no Ajá sí O sea no crees que como que se
(34:26) vuelve a sortear no si no no no O sea como que ya todos llevan ahí una avanzada y nada más es el es el que se ponga más listo para pasar al siguiente nivel y al siguiente nivel y así no Ajá sí Exacto el sacrificado a un a un Este sí Exacto es como de estos no de en la fila piramidal Ajá sí O sea como de si el progreso del de arriba me va a asegurar que yo también progrese no Y entonces me tengo que apurar así para este imaginen no que qué tal que alguien ya pasó y se vuelve a formar y me vuelve a ganar no O sea en vez de que yo avance
(35:03) al siguiente nivel este se se mueve no como que también ahí tiene su los siglos También tienen que ponerse listos no para realmente avanzar al siguiente nivel Bueno entonces este cómo funciona bueno tenemos un arreglo de enteros y este este arreglo enteros lo que va a determinar es En qué nivel está cada okay Y entonces bueno por ejemplo Level no eh Y aquí tenemos este nuestro arreglito Así un montón entonces mide n no Bueno cómo lo inicializa vamos a pensar que mide n-1 no para que empecemos de cero 0 1 2 TR chalala no entonces no sé
(35:54) si el hilo a tiene el ID cer pues no sé este es del hilo a y luego este es del hilo B este es del hilo c entonces cada cada hilo tiene una entrada en este arreglo y este cada hilo va a escribir por ejemplo el hilo a pues vamos a suponer que est en el nivel uno no el hilo B en el nivel 3 el hilo c en el nivel n-2 o sea como que todos aquí en en Level este todos los hilos escriben su nivel actual no su nivel actual en su su propia entrada así okay Y en victim este esta esta variable lo que hace es que igual es un arreglito de n de tamaño
(36:56) n entonces va de c 1 2 n-1 entonces en esta victim este por ejemplo aquí no el el el hilo a es el que está de víctima en el nivel cero el hilo B es el que está víctima del nivel uno el hilo Z está víctima del nivel dos entonces en en victim se escriben las víctimas por nivel no eh Y nivel del 1 al n-1 Bueno este del C al n-1 no en realidad este Okay entonces así se van escribiendo las víctimas y bueno entonces no más aquí pues se inicializa este la creación de todos los niveles todos estamos en en cero no O sea en un
(37:56) inicio todos iniciamos en el nivel cer para que esté justo este okay Bueno aquí ya lo escribí todo acá Bueno Igual me quedó medio feo medio monado este bueno suponemos así para que se vea mejor Okay entonces bueno este cómo se ve los métodos lock y unlock no recordos que estamos viendo candaditos Entonces el método lock eh se ve de esta forma de nuevo todos los hilos tienen asociado un ID Okay entonces este así para para que sea así como este fácil no vamos a suponer que tenemos no
(39:01) sé los hilos ahora recordemos que tenemos más de dos a b c y d Okay entonces que el hilo a pues le corresponde su ID cer al bl un al C2 y al del TR imagínense entonces este cada hilo que ejecuta este método lo pues en mi no O sea como en la variable mi pues va a guardar su ID entonces en la línea 13 miren va a entrar un ciclo for Okay entonces este ciclo for va a avanzar del nivel uno al nivel este n no O sea bueno en realidad es el nivel un al nivel n-1 no este va a llegar el for entonces en cada en la línea 14
(39:47) este se va a ir anotando hgan de cuenta que pues va a entrar primero el for va a estar con i igual a este un no entonces se va a anotar en el nivel uno y siempre que entren se van a nombrar como víctimas ya así como peterson siempre te nombres como víctima entonces tú dices la víctima del nivel este I no en este caso y es igual a uno Este soy yo no siempre es así yo soy la víctima del nivel uno y entonces en la línea 17 vieron entras a un gu o sea como está como feito no este imagínense un While dentro de un for y de hecho este While
(40:30) depende de lo que los demás se muevan no eh Pero bueno entonces este esta se dice de esta forma Bueno o sea consideren los código no para toda K que sea distinta de mí o sea para todo idea que sea distinto de mí si existe este Bueno aquí lo escribí no bonito mientras no exista alguien con un nivel más alto que yo o igual al mío y yo no sea la víctima de mi nivel avanzo no es decir este eh Como traducción no me quedo aquí sí eh yo soy la víctima No si yo soy la víctima y Existe en este caso no soy la víctima y existe
(41:33) alguien en un nivel mayor o igual al mío Okay entonces si se dan cuenta este dice pero siguiendo esa lógica Entonces el hilo a que es el hilo cero sería el último en tomar el candado Ah cómo o sea bueno este Por qué por qué bueno o sea como que ahorita no no los he puesto como a correr este Bueno o sea no no les he contado Cómo va cómo funcionaría una ejecución o sea como dices como que los ids este como es el cero en ese nivel empieza es que por lo que entendí el nivel en el que están para seleccionar la víctima es con el ID del nivel actual
(42:28) no Ajá sí sí sí pero haz de cuenta que esto es aparte no O sea como que los hilos eh los hilos a b c d no sea los que sean aquí hay un montón no son varios hilos Entonces yo nada más como que lo que les dije es que supongamos no que que tienen estos ids entonces este [Música] e como digamos que los niveles por ejemplo vamos a poner [Música] aquí aquí entonces Level no y Eh entonces Bueno mejor así tenemos la la variable la arreglo Level
(43:32) entonces este es el arreglo Este es el de a el de B el de c el de D no por lo si de c 1 2 Así tres entonces a va a escribir por ejemplo que empie el nivel cero no pero ya vieron oa en realidad acá si se dan cuenta todos inicialmente este tienen el nivel cero no O sea a b c o sea todos los o sea así así comienza el candado no se todos les ponemos el nivel cero Entonces los los hilos empiezan a ejecutar aquí y por ejemplo a así como b c d así todos tienen pues su nivel cero no entonces entran en el ciclo for Y entonces a por
(44:15) ejemplo va a decir Ah mira yo este paso al nivel uno no y y b también va a decir Ah mira yo nivel un y supongamos que Cid pues no no iniciaron no pero pues ya está inicializado este arreglo todo se en cero entonces este a se pone como víctima no B como víctima y y pasan no al siguiente y luego pasa al dos y pasa al dos no y así entonces luego pasa al tres pero si te das cuenta todos empiezan en el nivel cero no O sea no importa que d tenga el ID con tres como Level digamos que aquí te escribes por este o sea como que cada
(44:55) quien tiene su propio registro pero es lo que determina simplemente el ID no sea como que la entrada en el registro pero es un arreglo porque este en la línea 17 ocupas revisar no este si existe alguien con un nivel más que el tuyo por eso como que es la idea no que que lo escribas en el arreglo para que tú también puedas revisar si puedes avanzar no Entonces te checas así a todos Okay pero o sea no no es que no es que a empiece en cero y b empieza en uno y C empieza en dos o sea simplemente son sus y en ese digamos que en Level no sé
(45:32) tres el hilo d escribirá no En qué nivel va avanzando Pero va a empezar en cero no luego va a cambiar a uno y así luego a dos entonces va a seguir avanzando vale pero o sea no es como que tengan ventaja no los que tengan el ID más grande vale más o menos no entendí bien cómo se denomina uno como víctima Ajá entonces bueno eh Level está así no O sea la variable Level y la variable victim eh Ay que qu un tonadero verdad este la variable victim voy a escribirla mejor en color azul no victim también es un arreglito No pero
(46:23) victim si digamos que este si va por nivel en este caso c un Bueno en realidad empiezan en en uno no 1 2 3 4 5 tal la hasta n-1 no ahí sí o sea las víctimas ahí sí van por nivel victim en este caso este pues ni siquiera está inicializado sol solamente sabemos que es de tamaño n no O sea que inicialmente pues no tiene a nadie como víctima Entonces el Lilo a cuando entra al nivel por ejemplo al nivel uno no se escribe así como miren estoy en el nivel uno y en en este victim uno no ahora sí escribe a no O sea no sé so ide que
(47:26) es cero y este ya vieron porque es distinto o sea Level sí corresponde como que vamos en mí pues este vas por tu ID pero victim vas escribiendo por nivel okay O sea sí es distinto no este entonces a se va a poner como víctima del nivel a no Entonces supongamos que B también está ejecutando y este y ves se escribe después como víctima del nivel del nivel uno no y luego a se escribe como víctima del nivel dos no y no sé Y luego llega c y lo quita Y luego a pasa acá a pasa acá y b quita y se escribe como víctima él y así O sea como que van
(48:10) avanzando no y no sé Y entonces para que a pueda tomar el candado tuvo que escribirse como víctima en todos no pero como es concurrente entonces puede ser que aquí pues vayan avanzando no O sea no se que avanza c b ya luego y así Ajá sí sí Eduardo Exacto solo hay una víctima por nivel no porque todos van sobre escribiendo No este todos van escribiendo en la línea 15 todos se van escribiendo como víctimas digamos que el arreglo victim es un arreglo en el que todo el mundo escribe no Ajá so el muy importante no dice ael
(48:52) Entonces eso es secuencial porque el primero que entró ser el primero en tomar el candado di una pregunta muy interesante este eh y de hecho vamos a ver que no que puede ser que no no eh Y eso tiene que ver con una nueva propiedad que se llama una propiedad de Justicia no O sea como que Eh hay hay cnds en donde uno quisiera no que el último que se ponga como víctima en el nivel cero sería el último esa era mi duda Ah sí Ah okay Okay es que no no precisamente sucede de esa forma mm Okay okay vamos a ello mm Sí sí Vale entonces este Déjenme Les
(49:33) explico no eh vamos a ver una ejecución de de cuatro hilitos Vale entonces eh Por ejemplo cómo cómo funcionaría No aquí yo les pongo en las líneas rosas de cómo más o menos sería que van cambiando como de for no O sea como que este ah y aquí supongamos que el número de hilos O sea que n es igual a 4 no O sea no hay más hilos solamente hay n menos un niveles o sea solamente hay tres niveles no y inicialmente todos este pues las líneas importantes no para cambiar de nivel pues son la línea 14 en donde te escribes como este En qué nivel vas y la
(50:16) línea 15 donde te escribes como víctima del nivel Okay entonces por ejemplo qué podría pasar que este que que Ah se escribe como no pues aquí en el nivel uno y luego se escribe como víctima entonces B este c y d también no ellos también quieren entrar Entonces todos escriben como como que van en el nivel uno no en el primer ciclo del for o sea cada uno pues de forma particular no O sea de forma local y este y van modificando esta variable compartida no que es este bueno que todos van sobrescribiendo que es victim Entonces
(50:54) por ejemplo en este caso el que escriba como víctima al final del primer nivel es el que se quedará No ahora sí que los atrás se quedarán Este Entonces en este caso por ejemplo saliendo del primer ciclo for no el último en inscribirse como víctima es c entonces para c se cumple la línea 17 Por qué Porque él es la víctima y además existen en Level no O sea en Level existen este ah dejen escribo aquí entonces Level solo es de 1 2 3 cu no Ajá entonces a por ejemplo tiene el nivel vo Bueno voy a ponerlos mejor así
(51:42) con a b c y d no Entonces a tiene el nivel un este bueno supongamos no que ya paso dos este tiene nivel un uno y uno no O sea así va entonces Entonces como c se quedó se escribió como victim Ay dejen escribo también mejor así victim nivel 1 2s 3 y y ya no solo son tres niveles en este caso Entonces el la víctima del primer nivel es c No Y ahí se queda Entonces todos los demás pasan este y porque para c se cumple la línea 17 hay alguien que tiene un nivel mayor al mío o igual y yo soy la víctima Entonces ni modo no Ah me
(52:35) quedé entonces mientras los demás siguen avanzando no ya ya se quedó ya vieron Ya pues él tiene que esperar a que este no ser la víctima de su nivel o que ya los demás acaben de ejecutar Okay dice dice Ah Ya entendí esta parte Pero entonces por ejemplo en el último con a y Cómo se decide en qué momento uno se pone como víctima para que el otro pase es algo aleatorio No no De hecho es algo en el que el último que se escriba no porque como sobre escriben la misma este Por qué el dos dos Level Okay este Bueno aquí nada más por ejemplo
(53:14) Supongo que que este a ver primero contesto a Alejandro y ahorita al final s porque de hecho es la última parte no de esta ejecución que leso que les puse entonces este aquí yo puse que se se nombra víctima no porque este pues si es el último que se escribe no en el tiempo o sea no hay nadie más entonces Y además suponer o sea supuse no como que en este punto pues ya suponemos que a se puso ya como se nombró del siguiente nivel y por ejemplo B Pues todavía no sigue en el nivel uno o sea por eso puse dos dos dos
(53:52) un No pero en realidad pues puede ser que todavía no se escribiera o sea nada más como que Lo supuse como que va avanzando vale pero o sea como que como es el que lleva la delantera ya ya llegó aquí o sea como que tomé la foto como que en este punto Vale entonces ya después Aquí se escribe como víctima no y luego en este punto B se escribe como víctima ahora se sobreescribe y luego en este punto de sobreescribe y se escribe como víctima no entonces a y b pueden pasar porque digamos que este Bueno A como no hay
(54:34) nadie más adelante él puede avanzar en el ciclo no y este y b tiene alguien más adelante pero cuando llega b y se escribe como víctima Pues él deja de serlo y avanza al siguiente Okay este y ya luego este entonces de Pues aquí es la víctima y él se va a quedar ahí no y ya finalmente ahora sí zuriel no este imagínense que aquí eh depende quién haga qué no por ejemplo aquí pues ya este H d se quedó en el nivel dos eh a Ya pasó el nivel TR B Ya pasó el nivel 3 no y ahí se van a disputar entonces imagínense que en este punto se escribe
(55:27) como en el nivel tres y aquí se escribe como víctima no entonces este a se escribe primero como víctima voy a ponerlo en verdad a se escribe como víctima y aquí suponer no que B se escribe como víctima entonces quiere decir que b sobreescribe a Okay entonces más bien ahí es Y entonces B en este caso va a decir yo soy la víctima no en la línea 17 ya vieron va a decir yo soy la víctima y además existe alguien este en un nivel igual o mayor al mío no Okay entonces quiere decir que B se queda por qué porque fue el
(56:21) último en escribirse como víctima y hay un hilo no O sea el hilo a que este tiene el mismo nivel o mayor que él no ya vieron más o menos suriel O sea en realidad no es aleatorio sino que es como que el que se cuida primero como víctima tiene ventaja No porque entonces el otro lo va a sacar de víctima y tú vas a poder pasar vale Ajá Y así entonces bueno es por ejemplo soy en este caso Este sí sí se cumple como que esta justicia no como que dices Bueno Ah es el que primero Se nombra como víctima no sea Ah Es como que el
(57:15) primero que empieza y es el primero que acaba no como que ahí dices Bueno hay cierta justicia no pero este ah miren las demostraciones e pero bueno como Sur ya ya Se nos adelantó este e vamos a ver un ejecución en donde puede ser que así se escribe como como el primero No en el nivel uno pero en realidad si se dan cuenta en cada nivel él tendría que no ser el último en escribirse como víctima no puede ser que los hos siguientes O sea que los hilos a pesar de que empezaron después que él se escriban como víctimas antes y él
(57:56) quedara como víctima primero no entonces puede ser que ha se quede y que los demás le ganen o sea como que ya vieron Uy se tarde más y que antes le gane no sé los hos que empezaron después que él porque en realidad tienes que ganar no solamente en el primer nivel no de no escribirte al final como víctima sino que en todos los niveles entonces como que ahí no se cumple una justicia no O sea no es como que este es sea una seguridad que si empiezas a ejecutar antes el protocolo acabes antes no depende Ajá sí Exacto como dice Eduardo
(58:26) no es fifo no pero bueno Nos dieron las 11 este Pero bueno espero como que les quede así más o menos cómo funciona este este candado ya la siguiente clase vemos las demostraciones no que í pues son más este un poco más largas porque pues como ahora si tenemos j y los ocupamos inducción no para asegurar que en cada paso no se realmente se vaya cumpliendo Esto sí hasta la próxima nos vemos el lunes vale Bonito fin Bye
