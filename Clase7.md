2024 08 14 10 01 10 - YouTube
https://www.youtube.com/watch?v=xGA5HWIke5Y

Transcript:
(00:29) al al Hola buenos días k
(02:06) recording in progress la clase pasada vimos el protocolo de al Y en este protocolo pues parecía como mu y muy este muy favorecedor con alis se acuerdan no del gatito y el perrito Entonces al final la moraleja era que
(03:10) pues bueno podíamos resolver este problema de forma pues medio este medio injusta no para B pero pues se podía resolver este utilizando dos variables de un solo bit y pues cada Alice tenía una variable no una ellos podían escribir en su propia variable y los el otro podía leerlo Entonces nos habíamos quedado en eso y además habíamos formalizado eh la la definición ya de exclusión mutua no de forma así más rigurosa entonces e eh yo les había eh definido esta esta este concepto de sección crítica en donde yo les había comentado que pues
(04:06) simplemente es un bloque de código que solo se ejecuta por un proceso a la vez y les había comentado que íbamos a usar esta anotación de critical section no entonces e Ah también les había comentado las reglas para las propiedades que íbamos a ver que pues era que eh solamente hay una sección crítica por por este por candado y que pues el método lock siempre va a adquirir o sea va a entrar esa sección crítica y el método unlock va a dejar el cado es decir va a salir de esa sección crítica Vale zuriel dice Acabo de entrar estamos
(04:46) oyendo un repaso nada más vale un repaso de lo que vimos la clase pasada Okay entonces eh habíamos visto esta sección crítica yo les había comentado que pues la idea de la exclusión mutua es que las secciones críticas siempre tengan un orden de precedencia es decir siempre exista esta flechita Vale entonces aquí se ve un ejemplo en donde se cumple esa precedencia porque la sección crítica es este se toma digamos que en el intervalo en color rojo Entonces estos intervalos tienen una relación de precedencia vale
(05:23) porque pues no se traslapan en el tiempo y además les había comentado que la sección crítica es este bueno esta anotación Va de que es la sección crítica que tome el hilo a y es la jima vez que ejecuta ese código Okay o podríamos decir como es la es este el hilo este Alice se el gato de alis no ha tomado el patio J veces Vale entonces como que es la idea no por eso es J veces no j+ unma veces este y así va aumentando porque en realidad el gato pues puede salir al patio varias veces no Y también el perro o sea puede tomar
(06:07) la la sección crítica Claro que pues para el perro en este caso pues no era muy favorecedor no Okay entonces Este era el concepto de exclusión mutua No ya visto hablando como Eh rigurosamente entonces secciones críticas que tienen un orden de precedencia Así le decimos luego eh también habíamos comentado de forma Bueno al final de la clase anterior que la propiedad de deadlock free o sea de libre de candado muerto coins ista en que alguien va a tomar el candado Okay e Entonces esto lo que implica es que como aquí les había puesto un ejempl ito
(06:52) no que puede ser que que un hilo por ejemplo el hilo a en este caso pues trate de adquirir el candado y nunca lo logre es la es puede ser no pero si el hilo B este siempre tiene éxito no O sea si alguien tiene éxito o o el hilo c o el hilo d o sea cualquiera de los hilos no que exista en un sistema con eso decimos que el candado no está muerto y que tenemos un deadlock free o sea tenemos libre de candado muerto Okay entonces esto este concepto si se dan cuenta pues lo que implica Es que este sistema nunca se congele O sea que
(07:27) alguien tenga éxito Porque si nadie tiene éxito es un problema no sea realmente el sistema se congeló pero si alguien tiene éxito decimos Ah mira Bueno o sea no está no es el protocolo no es muy justo Pero sigue funcionando Vale entonces por eso yo aquí Les comento no si Lil ejecuta el método L O sea que trate de adquirir el candado pero nunca lo adquiere bueno no pasa nada no Simplemente no lo adquiere pero no detiene a los demás okay Porque podría ser un lo chafa no que un hilo se bloquee y bloquea a los demás pero en
(08:03) este caso como B puede adquirir la sección crítica una vez luego dos veces no tres veces o sea AC más dos veces no le pasa nada entonces los demás hilos pueden obtener eh el candado un número infinito de veces no pueden entrar a la sección crítica un número infinito de veces por eso se escribe de esta forma y aquí yo les había puesto un ejemplo de de Pues que podría ser de hecho nuestro protocolo nosotros dijimos Bueno este desde la clase anterior ustedes me habían respondido que que consideraban que el protocolo si era deadlock Freak
(08:38) porque Alice siempre podía entrar Aunque Bob no no entonces aquí yo les había puesto un ejempl ito en donde sí puede ser que Bob siempre trate de poner su bandera en verdadero pero Alice también la la levante no enseguida y Bob Pues siempre la baje entonces podría ser que Bob pues nunca accede al patio no O sea nunca tenga tiempo en el patio y el patio en este caso sería nuestra sección crítica Okay entonces esto era deadlock free luego nos quedamos en starvation free era que que starvation es más más duro o sea nos dice todos los hilos e
(09:21) que traten de adquirir el candado en algún momento por eso eso este eventualmente tenga éxito eh entonces bueno Esto es bueno puse esta esta cajita porque en realidad si se dan cuenta este eventualmente como que es muy impreciso no como que dices Bueno eventualmente este en el infinito más uno o qué no como que te quedas pensando no como como matemáticamente esto Cuándo es no cuándo pasa entonces e Sí pues realmente no no es muy realista vamos a ver que existen propiedades más duras No por ejemplo si formamos a los hilos eh que quieran
(10:02) tomar el candado y decimos que si si B llegó después de a a la fila pues va a pasar después de a no como que eso sería algo más más este menos con menos incertidumbre y más duro no así s a fuerzas va a pasar cuándo pues después de a no B va a pasar después de a entonces Bueno en realidad si se dan cuenta les digo es como que bueno podría esperar mucho y sería hasta free Pues sí pero pues ya Cuánto tardó en llegar no Bueno pero eventualmente lo hace como que eso es [Música] el entonces e si se cumple esta propiedad si decimos
(10:52) que todos los hilos pueden entrar o sea adquirir el cado eventualmente pues quiere decir que se cumple la anterior no que es deadlock free porque alguno o sea como que todos pues incluye alguno No si decimos que se cumple est Vision entonces también se cumple deadlock free Okay entonces son esas dos propiedades más este como que nos gusta que se cumplan en candados porque como ya vieron el que se cumpla exclusión mutua es como muy trivial no O sea como que hay que garantizar Además de que solamente uno puede la sección crítica hay que
(11:31) garantizar Cómo van a entrar o sea Cuándo no como estamos en concurrente nos importa mucho el tiempo o sea estamos muy muy muy este siempre muy al pendiente del tiempo Vale entonces en el mundo secuencial cuando ven su clase de algoritmos de análisis de algoritmos en realidad pues siempre están como presentando una invariante o sea por ejemplo eemplo el profe les dice no pues este este es el algoritmo encuentren una invariante Por ejemplo si es un protocolo es un algoritmo de de este vida y vencerás no eso regularmente
(12:13) tienden a tener ciclos o recursión no en donde se hace lo mismo en cada paso y en cada paso te vas acercando cada vez más al resultado no entonces el profe te dice encuentro una invariante que se cumpla en cada ciclo for no o en cada recursión no depende Si es iterativo o recursivo y este entonces uno tiene que decir Ah bueno este bueno en este punto siempre se agrega eh Por ejemplo un algoritmo de ordenamiento en este punto siempre se agrega un un este un número en orden no O sea siempre el número que venga
(12:50) siempre va a ser mayor que los que ya están por ejemplo no sea son propiedades de seguridad como que te consta y puedes asegurar que siempre va a pasar esto Okay entonces Esas estas propiedades les vamos a llamar de seguridad por ejemplo una propiedad de seguridad sería la propiedad de la exclusión mutua Por qué Porque nos dice yo te aseguro que las secciones críticas de dos procesos nunca se trasladan no las propiedades seguras siempre te dicen bueno es como que esta lógica de nada malo pasará nunca no O sea sea y eso asegura que pues siempre
(13:32) va a pasar lo mismo no O sea pero como que es más fácil asegurar lo que no va a pasar que lo que siempre entonces este se refiere a esto la exclusión mutua y es una propiedad de seguridad se dos secciones cras críticas nunca se trasladan vale entonces podríamos decir asegurar a partir de de la exclusión mutua decir pues el perro y el gato no estarán nunca al mismo tiempo en el patio no y ya con eso decimos Ah pues resolvemos el problema no tiene al y bueno Estas son las nuevas para este curso o sea bueno ustedes ya
(14:09) conocen las de seguridad de seguro han no sé cuando han visto les digo algoritmos de ordenamiento algoritmos en gráficas o sea siempre hay como de No pues el por ejemplo el short spat no el algoritmo para encontrar el camino más corto Ah pues siempre en cada paso Pues estamos seguros de que añadimos al siguiente más corto no O sea al al al que llegamos en menos Pasos Por ejemplo Pero estos de viveza deles así les dicen tien que ver más con las cosas que suceden en el tiempo y aquí les pongo suelen estar muy presentes en el
(14:45) análisis de algoritmos concurrentes porque nos importa mucho cómo se traslapan las operaciones Okay entonces eh estas propiedades nos afirman que algo bueno pasará si se dan cuenta las otras es así como nada malo nunca pasa No o sea es como el tiempo presente es una seguridad todo el tiempo no en el tiempo presente y estas nos dicen en el futuro Espero no que algo bueno pase pasará no eh Entonces dos propiedades Bueno las dos que vimos ahorita que son deadlock free y starvation free ambas si se dan cuenta tienen que ver con el tiempo no eh la
(15:24) propiedad de lock free nos afirma que algún hilo en algún momento se eventualmente logrará adquirir el candado entonces eh En este caso podríamos asegurar el gato siempre que quiera podrá salir al patio no Bueno pero el perro no O sea no podremos asegurar que el perro siempre que quiera podrá salir al patio eventualmente no pero el gato sí siempre eventualmente él podrá salir al patio Aunque si se dan cuenta no es como que o sea como que hablamos de de tiempo no cuándo pues eventualmente pero no con seguridad no porque también Contamos con
(16:04) que el gato siempre va a bajar la bandera Okay es como que dependemos un poco del otro por eso se Es eventualmente okay entonces por ejemplo Aquí les tengo un Quiz eh este bueno viemos estas propiedades de seguridad y de viveza no entonces Eh me tienen que decir Ustedes esos siguientes enunciados ustedes qué creen como que representa e por ejemplo este primero dice lo que sube debería Bajar este que Qué sería o sea es una una de seguridad o de viveza dicen bueno Camilo es el que le atinó es una bueno se contestó bien Es de viveza
(16:51) Ajá sí sí por qué Porque no es una de este No ese lo que sube eh nunca se debería quedar arriba no O sea nunca debe quedarse arriba es Es como eso sería para que fuera de seguridad pero como lo decimos de Bueno lo que sube debería bajar cuando Pues no sé no Pero porque eso no siempre es bueno Ajá es de viveza porque es el tiempo en el que se habla No no te estoy asegurando No simplemente te digo como debería debe Pues no sé no pero debería o Entonces por ejemplo aquí nos dicen las deza algo bueno pasará No pues lo bueno que debería
(17:54) pasar es que baje no pero nos aseguran que algo nunca malo pase bueno o algo o que algo nunca pase no entonces bueno si más o menos como que les qued Bueno ahorita vamos a ver al al que que me respondan las siguientes este esta otra si una interrupción ocurre un mensaje Se imprime en un segundo esta de Qué sería Ajá seguridad no Sí o sea es como de hecho estás una una conexión lógica no sí entonces una implicación Ajá Sí como que podríamos decir este nunca pasa que no se imprima un mensaje un mensaje después de un segundo
(18:48) no O se hasta nos dicen cuándo podríamos decir no que es de seguridad porque esto luego esta otra si dos o más hos están tratando de entrar a una sección crítica entonces eventualmente alguno tendrá éxito de viveza no Ajá como que lo que nos guía un montón es que es eventualmente esto escribiendo de viveza y lo bueno que va a pasar es que eh Lo bueno es que alguien tenga tendrá éxito No de hecho este verbo así tendrá en algún momento no sé cuándo No no es una seguridad así riguroso este como m me digan Ay este
(19:39) siempre tendrán éxito después de 10 segundos no Ah Bueno Eso está bien pero esto es como Oh en algún momento Entonces Ah bueno Y esta última el costo de la vida nunca decrece no no sé seguridad sí es como chistoso No porque como que no nos gusta que nunca decrezca pero nos aseguran que pues siempre las la inflación va a subir siempre este todo va a estar más caro no Entonces es una seguridad eh No es como que eventualmente no es que algo siempre va a pasar no Entonces se dan cuenta como que la diferencia entre seguridad estas cosas
(20:17) que siempre hemos visto en algoritmos no como que no hay de otra y aquí es eh Como tenemos esta esta puedes repetir Entonces cuál es la diferencia entre dos aj Sí ajá sí la seguridad este les digo como ya ya lo hemos visto en realidad en algoritmos o sea ustedes les pongo un algoritmo secuencial y les digo a ver este demuéstranos este algoritmo secuencial y qué hacen Pues dicen Ah Déjenme Déjenme reviso qué se cumple siempre en cada paso del algoritmo no Entonces como ya escucharon no que se cumple siempre no
(20:56) algo que nunca pase este ahora sí que es lo contrario no a que se cumple siempre o sea como podemos asegurar algo pero en las de viveza como tenemos el factor del tiempo Eh pues esperamos por ejemplo en deadlock free que pues el sistema no se nos congele Eh entonces esperas que alguien siempre tenga éxito Sí pues en viveza puede ser que no suceda es que en viveza en realidad no es que no suceda sino que no sabes cuándo va a suceder es eso porque por ejemplo si el si yo diseño un protocolo y les digo este protocolo es deadlock free o sea quiere
(21:38) decir que nunca se congela realmente no se va a congelar no O sea eh pero el que el que este algún lo va a tener éxito este pues sí pero no sabemos quién y no sabemos cuándo no ajá si en vives Así es la diferencia como dice Sebastián a si es como que cuándo o sea yo les digo este Se me congela nunca Sí pero cuento con que los hilos sección crítica Para que otro pueda tener éxito no O sea Cuándo no sé eh pero se va a cumplir vale es como como una seguridad chafa en el tiempo no este la viveza cuándo Pues no sé pero te prometo que o sea como
(22:22) ustedes no este van a trabajar y les dicen Oiga este eh Cómo enseñaste este este algoritmo no pues eh Te juro que es deadlock free O sea que no se congela y de repente un hilo se tarda mucho en una sección crítica y te están viendo así como de Oye pero cómo no se congela no Sí o sea si el hilo a deja esta sección crítica el otro hilo va a poder tener éxito no cuándo Pues no sé pero no se congela Ajá Y al final ambas se relacionan con la computación concurrente porque pues como vimos la computación concurrente en realidad es
(22:55) el análisis del entrelazado de la computación secuencial no O sea siempre tenemos algoritmos secuenciales sí no tenemos eh propiedades de seguridad en estos algoritmos Sí porque en cada ciclo pues se va cumpliendo algo no Aunque este También tenemos este otro factor que como ahora tenemos un montón de hilos haciendo cosas a la vez pues tenemos este factor del tiempo no O sea que contamos con que el progreso de este este o sea que este progrese para que yo progrese no Ajá sí en como concurrente los procesos se comunican Este pero se
(23:32) comunican en y en la par los procesos no se comunican mm Pues sí digamos que en ambas se comunican pero en concurrente como que este o sea considera que que paralela es una sub no de concurrente Entonces en realidad Pues sí se comunican pero tal vez hasta el final ya cuando tienen los resultados no pero mientras Pues tú hiciste lo posible para darles a cada quien su trabajo No desde de antes como ve pues resuelve este pequeño problema O sea no es como que se comuniquen para dividirlo es que tú ya se los has dividido lo hacen y ya hasta el final de
(24:08) alguna forma tal vez se comunian al final para unirlo no este o al contrario tú ya lo unes no a pero en concurrente Sí o sea nos nos preocupa estamos justamente este en el análisis de cómo se traslapan los las operaciones Okay entonces bueno existen ya implementaciones de candados no este en Java y de hecho estas implementaciones pues corresponden a increíbles implementaciones que se han publicado en artículos O sea ya hay mucho trabajo y que están probados están demostrados y que al final pues terminan este como métodos ya este bueno como
(24:49) objetos no librerías ya en Java y bueno y en otras claro no O sea nosotros Porque estamos viendo ya entonces de hecho la interfaz eloc este te provee Bueno puses nada más est aquí Pon nada más estos dos métodos pero en realidad pues la interfaz de log hasta tiene más No pero bueno los básicos pues es toma el candado y déjalo es lo que necesitamos para utilizarla este Pero bueno nosotros como estamos estudiando esto detalle Pues nos interesa no solamente como ya lo que nos tiene preparado Java o cualquier otro
(25:26) lenguaje sino como de bueno ahorita vimos un protocolo más o menos que resuelve el problema no que es como un candado pero está medio chafa no Entonces vamos a ver otros más Este y de hecho el protocolo que vimos pues nada más funciona para dos hilos no O sea para Alice y para Bob Entonces vamos a ver este algoritmos de candados primero vamos a ver para dos hilos porque pues son los más fáciles y para que vayamos viendo analizando cómo son estas dos este bueno estas tres no mutua deadlock free y estv free estas tres
(26:02) propiedades okay Y para dos hilos y luego para para n hilos Entonces vamos a ver ahorita para dos hilos eh ese es un protocolo este un algoritmo de candado un algoritmo concurrente no pero solamente para dos hilos Vale entonces este está en libros Aquí les pongo las figuritas Y si quieren pueden revisar el libro y leerlos no pero bueno aquí los vamos a ver entonces este candado el one Pues implementa un objeto de tipo candado no O sea vamos a tomarlo como pseudocódigo entonces nuestras variables este compartidas es esta
(26:51) de esta esta Bueno este arreglo no pero son dos variables vamos a considerarlo así tenemos al hilo Bueno vamos a poner el hilo a y el hilo p Vale entonces tenemos dos variables compartidas y cada hilo va a tener su propia este bandera Vale entonces vamos a pensar que la variable compartida una es la del hilo a y la otra es la del hilo B Vale entonces este este algoritmo concurrente tiene este dos métodos el método de log o sea tomar el candado y el don lock Entonces cómo toman el candado pues primero en la línea cinco
(27:37) este digamos que el iloa vamos a pensarlo así no que que obtiene su ID vale solo esto es para que pueda referirse a su bandera o a la del otro okay nada más como que así y pensemos no que pues él recibe la el ID este cero y este recibe el ID un no así entonces vamos a pensar no s que a tiene el ID c y b tiene el ID un no en esta implementación entonces este la línea 5 pues les digo no dice Ah mira yo soy cero y B Es un entonces voy a poner Mi Bandera en verdadero inicialmente ambas banderas pues diremos no que estaban en falso
(28:31) entonces eh Y así digamos que en esta línea pues ya es como que yo digo Ah pues yo quiero pasar no yo pongo Mi Bandera en verdadero y entonces en la línea ocho este reviso si la bandera del hilo B está en en verdadero si está en verdadero entonces me voy a quedar dando vueltas en este ciclo Okay voy a escribir aquí si voy a ponerlo con flat de B es verdadero entonces eh Me quedo en el ciclo okay Y si me quedo en el ciclo quiere decir que pues estoy como esperando no dando vueltas ahí en ese ciclo While esperando que en algún
(29:28) momento la bandera de de B pues sea falso si es falso Entonces algo del ciclo Y entonces quiere decir que termino de ejecutar el método lock y ya como vimos nosotros yo les había comentado que cada vez que ejecutemos el método lock de forma exitosa es quiere decir que pasamos a la sección crítica vale Entonces digamos que la idea este de los hilos que que tienen ambos es que puedan terminar de ejecutarlo Okay entonces este imagínense no que que pues a realmente puede pasar no porque la bandera de B pues está en falso entonces
(30:05) obtiene la sección crítica y ya para dejar el candado lo que hace es que bueno primero También toma su bandera y entonces simplemente pone su bandera en falso Vale entonces si el otro quería pasar este ver aquí qué ejemplos tengo Entonces voy a ponerles aquí [Música] H el hilo a el hilo B no Entonces yo les había dicho que y de 0 y de un y este están ejecutando loog Loc no entonces quiere decir que que en este punto vamos a ponerlo como en este punto imagínense que aquí entonces aquí en este punto este flag de a es igual a true no entonces
(31:11) imagínense que y est por ejemplo sería pues la sección crítica no algo así Dentro del gu Entonces está la sección crítica no no no no este una vez que el ilo a acaba de ejecutar el lock o sea digamos que para que pueda entrar en la sección crítica este por ejemplo H vamos a pensar que este es lock no ejecuto Loc así eh luego aquí no s es eh value más más y y luego hago unlock a Entonces esta de aquí el value sería la sección crítica todo lo que está dentro de log pues simplemente es lo que corresponde al método Loc okay O sea
(32:08) Eh entonces La idea es que el Lilo el Lilo a quiere terminar de ejecutar lock para poder ejecutar Pues el código que está en la sección crítica o se el código ahora sí que el peligroso Ajá Exacto sí lo que está dentro entre lock y unlock es la sección crítica Exacto sí e entonces este nada más es un algoritmo de candado o sea digamos que este algoritmo nos va a funcionar para después hacer nada más esto O sea para tomar el método log y luego ahora sí escribir nuestra sección crítica o sea como el código que queremos proteger y
(32:43) ahora si dejar el unlock vale o sea como que nos estamos metiendo como a fondo no este estamos viendo qué hay dentro de lock Entonces desde la línea 5co y la o Ajá digamos que la línea c a oo es lo que está dentro del Loc no o sea es lo que tenemos que hacer para poder tomar el candado entonces Bueno vamos a pensar que este es el aquí pongo no la bandera O sea la bandera de a en este punto tiene que estar en verdadero para que él este porque pues esto lo hace la línea si y supongamos que el hilo B pues este está inicializada nada más su
(33:30) bandera en falso no entonces imagínense que aquí el hilo B llega no y este y él pone su bandera FL de B en verdadero no en la línea s y luego en la línea este y así sigue no en la línea o él revisa dice a a ver la bandera de a cómo está y como a está en la sección crítica quiere decir que está en verdadero entonces él se va a quedar esperando en la sección crítica Okay Sí claro sea como dice Sebastián si a uno se le olvida poner el un log pues ya valió no porque esto quiere decir que que B Se va a quedar ahí no hasta que a
(34:20) decida hac unlock Entonces cuando haga un lock a lo que va a hacer es que va a hacer que su bandera de a sea falsa Y entonces B por fin va va a poder este eh terminar este Método en lock y entrar a la sección crítica okay Y así como que más o menos este más o menos cachan como Cómo va esta ejecución y y que en realidad pues la sección crítica pues como que digamos que ahorita no la estamos viendo no O sea la idea es que ejecutemos lock y luego este ejecutemos unlock de esta forma y metamos la Pues no sé lo que
(35:09) queramos meter en la sección crítica va Sí y después B tendría que usar unlock para que a o b vuelvan a entrar Exacto Sí sí O sea la idea es que tomas el candado y lo dejas y lo que está entre la toma y y y el dejar el candado esa es como nuestra área restringida que es exclusiva nuestro Bueno o sea como que el código que podemos ejecutar nosotros exclusivamente no y que lo tenemos ahí protegido Okay entonces este este protocolo es analizando no estas propiedades que vimos las tres satisface la exclusión mutua Eh pues
(35:51) para demostrar esto hay que suponer como Nosotros sabemos no esta propiedad de exclusión mutua pues pu es una propiedad de seguridad no es decir que nunca se tiene que cumplir esto no esto qu es se acuerdan yo les había comentado que que este esta flechita de aquí es la que nos dice que la sección crítica de a precede a la sección crítica de B okay Entonces digamos que aquí lo que nos dicen es que suponer por contradicción que este eh vamos a suponer por contradicción que no se cumple una precedencia de cs a csb y de csb a
(36:51) csa es decir que eh las secciones críticas Bueno voy a poner las críticas sections se traslapan O sea suponer que se traslapan vale entonces simplemente lo que estamos diciendo es que hay que suponer que existen una sección crítica de a y de B voy a ponerlo así csda a y cs ay cc de B que se traslapan en el tiempo no así vamos a argumentar esto entonces hay que suponer por contradicción que existe una sección crítica de a y de B que se traslap qué Qué necesitamos que pase para que ocurra una sección crítica de a o sea para que
(37:40) se termine de ejecutar el método para que a termine de ejecutar el método loog no tendría que pasar que que la flag de a sea verdadero y además tendría que pasar que la flag deb sea falso y además se tiene que cumplir este una Ajá que tenga el candado sea fake entonces tiene que cumplir que primero esté en en verdadera la bandera de y que después por eso pongo esta línea de precedencia después la bandera de falso okay Y para para que ve tomar el candado o sea para que ve terminara de ejecutar el metodolog pues ocupa que sea falsa su
(38:39) bandera o sea verdadera su bandera y que justo después él revise la bandera de a este y esta sea falsa no cosa que pues no es posible que pase no porque eh este este si si si el hilo a ya está en la sección crítica quiere decir quiere decir que que este que no puede ser que la bandera de a sea falso no O sea para que bet también estuviera en la sección crítica okay Entonces digamos que pues aquí pues es una contradicción entonces así como que como que esta está como fácil de ver no este suponer que existe un traslate y
(39:33) luego ver cómo sucede la lógica de las operaciones primero Ah escribe en su bandera revisa la deb y esto justo tiene que coincidir con que la bandera de B sea verdadero y que al revisar la de sea falso lo cual es una contradicción no Entonces está así O sea Claro que se cumple el protocolo satisface exclusión mutua no o sea es no sirve como candado luego este este este otro esta otra propiedad bueno es que lo One no satisface de lo free y por qué está como muy chaf el protocolo estado bonito al inicio pero como que como que
(40:20) no nos garantiza muchas cosas no Entonces qué pasa aquí pues miren si resulta que ambos Ejecutan lock Pues más o menos así este Bueno en realidad no [Música] acaban entonces aquí ambos Ejecutan look la línea 7 aquí escribe su bandera de a en y aquí supongamos no que que escribe su bandera en entonces en la línea o este para para que puedan terminar Ya de ejecutar este candado este la línea 8 supongamos que aquí hace a este lee la bandera de B y aquí no sé lee la bandera de a y yo
(41:34) sorpresa no ambas están en verdadero y entonces quiere decir que ambos hilos se van a quedar en este en la línea ocho atrapados porque resulta que el otro también quiere pasar y entonces quiere decir que existe una ejecución en la cual e el candado se queda congelado eso pasa un abrazo de la muerte Sí o sea el candado muerto no y este Por qué Pues porque nadie lo adquiere No pues Y eso qué quiere decir que nadie acaba de ejecutar Loc o sea Uy pequeño detalle no y se quedan dando vueltas y quién los va a sacar Pues nadie no O
(42:39) sea ni ni tú avanzas ni yo avanzo porque nadie va a querer poner su bandera en falso ambos están dando vueltas en el ocho no en la línea ocho eh okay Entonces no se cumple deadlock fre por esta razón am entonces este ustedes consideran que se satisface starvation free dado esto no no aj porque pues la otra es una generalización o sea como que todavía si no se cumple free pues no se cumple est Dead free nos dice como que nos dice alguien va adquirir el candado yar nos dice todo el que quiera adquirirlo lo tendrá éxito entonces este es una
(43:29) generalización no O sea si no se cumple que alguien lo adquiera pues menos que todos vale si entonces este no se satisface e pues simplemente porque deadlock free no se satisface No simplemente Okay entonces eh Bueno Este es otro candado muy bonito este este es el log el otro er Entonces en este candado Lo que sucede es que existen vamos a considerar no También tenemos a los hilos a y b Entonces ahora tenemos simplemente una variable compartida que se llama ptim variable compartida esta se llama
(44:33) vitim y es una en un entero no entonces el hilo a por ejemplo va a decir pues voy a tomar mi d y yo me voy a poner de víctima entonces este modifica esta variable compartida entonces quiere decir que B también va a poder leer lo que escriba no y viceversa entonces en la línea se algú algoritmo que si cpra el fre pero no cpra no no Ah sí sí sí existen por ejemplo el de Bob el que vimos era de free pero no era estation free este protocolo Este sí sí hay este de hecho acuerdo tampoco sí s ahorita nada más el que vimos pues es el de alib pero
(45:32) no me acuerdo si vemos otro Así sí porque como que nos gusta que sean también starvation free pero bueno a ver este entonces Alice es se escribe como víctima Perdón Ah no lo escribe como víctima entonces en la línea se si Alice va a checar si yo soy la víctima Entonces me quedo esperando Entonces por ejemplo qué podría pasar un ejemplo de una ejecución tenemos as alis bueno Perdón al hilo a y hilo B cas hilo a y hilo B entonces este el hilo a por ejemplo Pues empieza a ejecutar lo y aquí en la línea este c dice pues
(46:22) la víctima soy yo y y en la línea seis este pues va a decir Lía se pues va a estar ahí dando vueltas no dice Ah yo soy el yo soy la víctima yo soy la víctima y pues se va a quedar ahí dando vueltas no to hasta que no llegue el hilo B a ejecutar lo y se escriba como víctima víctim [Música] entonces este este Lilo va a decir Ah mira ya no soy la víctima entonces termino de ejecutar y este sec hago mi sección crítica no y ya pues después hago unlock Pero pues si se dan cuenta este Bueno aquí no s por no está pero la
(47:25) idea es que este después no cuando este vuelva a ejecutar el lock otra vez va a ser la víctima Y entonces ve que se quedó aquí va a poder terminar no entonces aquí va a ejecutar la sección CR y así en qué momento la declaración para que deje de ser la víctima pu si se dan cuenta cuando este el hilo porque est este Alor solamente es para dos hilos entonces partida a exao comoce seb en el había pues dos variables pero
(48:29) ambas el hilo a solo escribía Pues en su bandera no y el hilo B escribía en su bandera pero ambas leían la del otro y en este caso tenemos una una sola variable que puede ser escrita y leída por ambos Okay pero ambas son o sea son compartidas Entonces si el hilo este B se escribe como víctima Entonces el hilo a que está leyendo esta variable compartida dice Ah mira ya no soy yo ahora es b y ahora este ya puedo ejecutar mi sección crítica y terminar del candado no y así entonces luego el lo ve este no va a poder llegar o sea su
(49:08) sección crítica terminar o se ejecutar el lo Hasta que el hilo a vuelve a ponerse como víctima es decir hasta que hilo a vuelve a ejecutar un lo okay este entonces pues si se dan cuenta como que ya hay un problemilla no hay un problemilla este como que con el tiempo no está extraño que pues yo tenga que esperar hasta que el otro quiera para que yo pueda pasar y a su vez des el otro debe querer otra vez no para que yo pueda pasar y así como que parece como relevos no O sea como Dame la mano y Ajá o sea como que se ve claramente
(49:57) que no satisface estar Vision free no O sea que todos no pueden tener éxito es claro no como que ya vamos cachando no esta estas propiedades más más este como de vista no dices Ay no esto no no lo cumple pero bueno sí cumple exclusión mutua porque pues este como vimos no eh supongamos Por contradicción que que las secciones críticas se traslapan no es esto y Y entonces tengo este para que a este logre entrar su sección crítica pues la víctima debe ser B no Y para que B pase la sección crítica la víctima debe ser a
(50:47) entonces claramente pues esto es una contradicción no este no puede ser que ambos o sea bueno que que vitim igual a dos este sea igual a dosente se satisface Este es fcil de o sea en realidad que no se es el que va a pasar y viceversa entonces di Sebastián satisface exclusión lo free este pues miren por ejemplo qué podría pasar no eh No se cumple deadlock free en este caso en el anterior se acuerdan en lo One si ambos trataban de hacer cosas concurrentes el candado se bloqueaba Y en este caso si solamente hay uno que
(51:53) quiere hacer algo pues nunca lo va a obtener porque por ejemplo Lilo a este dice Ah pues yo quiero ejecutar Loc no y y se es como víctima y el hilo B si no hace nada pues pues no lo va a obtener no O sea ahí tenemos un candado muerto no un candado muerto Entonces se dan cuenta el otro estaba chafa cuando teníamos concurrencia o sea cuando dos hilos hacían loca al mismo tiempo y en est está chafa Cuando no tenemos concurrencia no si no llega al hilo B pues nunca lo va a lograr no Okay entonces por lo tanto si o sea
(52:39) como ya lo este ya lo habían visto pues no se cumple estar Vision free Pero bueno no todo está malo Este la unión de de l One con l two nos da el cado Peters que fue una solución muy bonita por los años 70 creo ya bien viejito este cndo este Pero bueno satisface este problema para dos hilos y este cndo sí está Se está mejor vamos a ver no de de qué va Entonces igual es para dos hilos entonces voy a voy a seleccionar los hilos a y b no entonces variables compartidas son estas dos líneas nuestras variables compartidas ahora
(53:30) tenemos bandera y tenemos esta variable de victim Okay es como que ya lo unimos Entonces este pues digamos que tenemos la bandera de a y en falso tenemos la bandera de B en falso y vamos a pensar que la víctima es como que no tiene No tiene nombre no este pues no sé cero no porque es un entero Entonces se ejecuta el candado y lo primero que hace pues el hilo a es ver su ID para poder referirse a su bandera o sea para poder escribir nada más en su bandera no entonces en la línea o escribe en su bandera se escribe
(54:28) como verdadero en la línea nu se escribe como víctima entonces en la línea 10 lo que va a hacer es que va a decir este se va a quedar esperando solamente si va a esperar Bueno voy a ponerlo así se quedará en el ciclo sí e e b Quiere pasar y a es la víctima Okay entonces bueno así Más bien es voy a ponerlo así a se quedará no Entonces a se queda en este ciclo si B Quiere pasar y ya es la víctima Okay y asim mismo también b b se va a quedar en el ciclo si si ya quiere pasar y ve es la víctima ahora okay Entonces viceversa
(55:30) eh Y simplemente para dejar el candado lo que van a hacer es que van a poner su propia bandera en falso Okay Entonces ahora sí este Bueno vamos a vamos a ello eh igual no e lo primerito es es demostrar ser víctima que era Ajá ser víctima simplemente es escribir tu ID o sea como que tú te este como que este este protocolo es así como de como de amable no gente amable o sea yo quiero pasar pero yo me pongo como víctima no O sea como que y Y si el otro Quiere pasar pues el el último que se haya puesto como víctima pues es el que se va a
(56:20) quedar no ajá si ser víctima es cuando esperas s o sea como que por ejemplo aquí no le dicen ay levanto Mi bandera estoy interesado o pero tuve primero no como que es así Eso este y te pones como víctima entonces por eso acá Este si tú eres la víctima y el otro también quiere pasar pues que pase él no porque pues eres muy lindo O sea que pase él entonces pero por ejemplo como ya se cumplen ahora tenemos este Bueno vamos a ver ahorita no eh vamos a vamos por pasos Okay primero exclusión mutua eh Ah bueno ya no me va
(57:02) a dar tiempo pero bueno exclusión mutua primero e este pues simplemente Cómo demostramos esto Pues suponemos igual no por contradicción eem que la secciones críticas se traslapan suponer eso no entonces para que suceda una sección crítica de A qué ocupo qu pase e este ocupo que primero poner Mi bandera de a en verdadero y después poner victim de este igual a a no es lo que ocupo Eh y además después ocupo revisar que buenoo leer que la flag de B está en falso
(58:07) o ocupo que la flag debe esté verdadero y que este que vi sea B no Para pasar pasar pero que él sea la víctima para que yo pueda pasar o sea para que suceda esta sección tiene que pasar ahora sí que y para que suceda la sección crítica de B pues simplemente tendría que pasar que que flag de B está en true este Y en este caso que bueno voy a ponerlo así sí que víctim se escribe como víctima Y entonces ya al final ocupa leer que la flag de a está en true no
(59:16) este y en este caso por ejemplo pues se cumple no O sea para que a pase Pues sí tiene sentido eh Pero además para se ocupa que la flag de sea true eh pero que no sea la víctima el mismo no entonces aquí es donde ya se cumple la contradicción porque victim solo puede ser o a o b no entonces Depende para que a haya pasado pues ocupa que la víctim sea B Pero él ocupa que él no sea la víctima no o sea leer FL y que victim sea a no entonces sería una contradicción bueno es una contradicción es una contradicción que
(1:00:07) victim es igual a a y a b no O sea eso no puede pasar entonces se cumple exclusión mutua y simplemente es por esto no O sea sí puede ser que ambas banderas estén en true Pero la realidad es que solamente va a pasar uno el que no sea la víctima okay que sí está bien y ya no me dio tiempo son 11 un Okay este entonces así nada más Les comento no peterson satisface starvation free Y pues lo vamos a ver la siguiente clase con las posibilidades vale Okay entonces ahí nos quedamos nos vos el viernes Ay mañana mañana también
(1:00:51) nos vemos no en laboratorio este les subo su práctica en la mañana para que la vayan pero no se preocupen la vemos en la clase y los ejercicios y todo va bonito día
