2024 08 15 14 03 43 - YouTube
https://www.youtube.com/watch?v=SfDMI1jiikM

Transcript:
(00:14) con H H H record prog Bueno ya sub su práctica y como les había comentado lleva este primero como parte importante del contexto
(01:19) esteo como contexto de lo que vamos a ver a hacer primero Esa práctica Pues así como la tarea un también está siento que sencillita no no es como para Ir calentando este Pero bueno tampoco creen que van a ser much muy difíciles después pero sí están realmente muy sencilla entonces la tienen que entregar el 24 o sea el sábado pero de la siguiente no no este la siguiente Entonces tenemos bastante este Eso es en entrega luego bueno ahora sí ya vemos varios 16 Sí yo creo que ya Empiezo con esto Vale entonces el contexto no una frase muy bonita de que
(02:11) dice da extra que pues es que la necesidad de sincronización a veces ustedes me preguntan Bueno o sea y a fuerzas tiene que ser paralelo pues no O sea con que vayan una después de otra Ay esperen mi conexión está mala este Bueno me me escriben no si no si no se no no me escucho bien o no se ve bien Okay entonces Este sí O sea como Les
(03:14) comento no en realidad no tienen por qué ser justamente en paralelo pero con que tengamos ahí varios hilos tratando de hacer cosas ya con eso Hay un problema y ocupamos sincronización es muy importante entonces bueno Esto pues surge desde los años 60 no por da extra e entonces eh nosotros como les comenté no se tenían que traer ustedes este ahorita Me comentan Cómo cómo tienen sus compus este qué compus tienen Cuántos cores cuántos hilos este Bueno yao les digo Cuántos sos tienen reales e y este pero bueno a pesar de como les
(03:53) comenté no O sea en realidad este si es una una preocupación un poco pequeña no bueno tampoco es así tan grave pero si es una preocupación si ustedes tienen compus como la pentium la pentium 4 este que s en el 2001 pues ahí sí como que a estar Van Van a batallar un poco no este y porque está pentium justo Aquí tengo en este libro este Intel penum 4 vieron era de los primeros procesadores que tenían multihilos pero miren aquí la palabra simultánea y Ahorita les voy a contar No hagan de cuenta que este nosotros
(04:35) tenemos computadoras multihilos desde los años 50s Aquí les pongo desde los años 50 tenemos la disac la seac obviamente pues quien tenía acceso a ellas pues nada más eran como militares no empresas o este o sea pues muy pocas personas en el mundo no pero sí había y eran multihilo Eh entonces Bueno usted dirá No có que o sea como rayos son multio pues miren Es que aquí está la diferencia una arquitectura multihilo este es muy importante tiene este de un solo procesador tiene esta capacidad de seguir múltiples programas de ejecución
(05:18) sin la necesidad digamos que que el software diga este de que se haga esto en software sino que se hace en Hardware digamos que en Hardware lo que tienen en vez de tener Pues digamos que una una una sola este un solo registro como para guardar el contexto de ejecución tenemos varios por ejemplo en ve aquí en esta figurita tener uno pues tenemos no sé cuatro no Y entonces lo que hacen estas computadoras viejitas de los años 50 que ya eran multihilo es que pues no podemos ejecutar este pues estos hilos al mismo
(05:57) tiempo pero lo que nos va permitir es que se guarde como que el proceso de cada hilo o sea como que su historia de cada hilo en Hardware y no en software Entonces esto les permitía desde los años 50s por ejemplo primero se ejecutaba lo que tenía el de color azul no este el este la memoria de color azul luego la memoria en color rojo luego la verde y así entonces para que se pudiera ejecutar otra vez la azul pues había que parar la verde y poníamos la azul y así O sea como que era en realidad modo secuencia pero se iba guardando como que
(06:31) lo que llevaba cada hilo o sea eran hilos pero este no no realmente simultáneos a eso se refiere Entonces desde los 50 tenemos esto no tenemos Este multihilos pero no simultáneos O sea de ahora sí que tuvo yo V tuvo yo así e entonces Bueno es muy importante que que esta capacidad de seguir múltip programas pues la tenían desde el Hardware y no desde el software o sea por eso este hablamos de multihilos no desde los 50 y por eso no 60 da extra dice Bueno o sea sí En realidad ocupamos sincronización a pesar de que no es
(07:12) simultáneo no no se Ejecutan estrictamente en paralelo ocupamos sincronización Okay entonces Eh Esto es no las multihilo Ah bueno esta imagen pues la la saqué de de este libro abajo tienen las referencias no porque también si quieren revisar ahí les digo como que sa tanto del chisme ahí de que por ejemplo cuándo salieron las mulos simultáneas y este cómo se componían las multihilos este no simultáneas las de los 50 y así o se está todo el chisme no de todos los los procesadores Entonces si se dan cuenta eh dado esta definición pues tenemos las
(07:56) arquitecturas multio Pues en realidad no son exactamente iguales a una arquitectura multiprocesador no porque pues multio pues desde los 50 no multiprocesador ahí sí desde los 2000 este entonces bueno est las arquitecturas multiprocesador es buen creo que desde los 90 en realidad Pero bueno 2000 es ya este accesibles al público común no como nosotros Entonces Bueno una arquitectura multiprocesadora ahora pues está conformada como le dice el nombre pues ahora tenemos múltiples procesadores no eh Entonces ahora sí diferencia de la
(08:38) otra Ahora sí podemos ejecutar eh dos hilos o más en el mismo en el mismo ciclo o sea s podemos tener Hilos de forma simultánea no no se forman no como en esta línea no se forman realmente son se pueden ejecutar de forma paralela este y esto es debido a que los recursos de ejecución distribu los procesadores y escuchamos también o sea todas nuestras compos ya tienen ambos Por qué Porque ya no escucho nada Okay esperen dejen conecto mis
(09:56) dispositivos a ver me escucho un poco mejor si me escucho todavía Ah okay ya se escucha bien Bueno okay me avisan porque como que está medio inestable ahorita en la tarde V Okay entonces bueno puede repetir lo último que dijo sí este A ver ay ya entonces se me escuchó bueno entonces la arquitectura ya s vamos a repetir todo esto arquitectura multihilo este como les había comentado nace desde los 50 no Entonces si si ahorita ustedes dicen yo tengo una arquitectura multihilo multiprocesador y multicore no en mi compu Pues sí los tres son ciertos Solo
(10:58) que es muy importante notar que en realidad las arquitecturas multio nacen desde los 50s Aunque tenían los o sea digamos que podían ejecutar distintos programas Sí pero no de forma secuencial No perdón no de forma paralela No al contrario eran secuenciales O sea primero ejecutamos lo del azul luego lo del rojo luego lo del verde y para que ejecutar través lo del azul ocupamos para al verde y así solo había como este una forma de ejecutar una sola cosa a la vez y no s hasta los 2 miles que salen estas computadoras ya es este
(11:30) multiprocesador que lo que nos permiten Ahora sí es tener Hilos de forma bueno que se Ejecutan de forma simultánea Okay entonces e en la actualidad nuestros procesadores se además de tener nosotros varios chips no O sea chips o procesadores en nuestra compu además tenemos cor o sea los los procesadores tienen a su vez cores miren en esta figurita se ve muy bonito Entonces los procesadores por ejemplo este mi comp ya busqué bien la mía tiene 10 cor No de hecho ni siquiera me dicen cu procesadores porque es no te dicen
(12:11) bien las cosas pero sé que tiene 10 cor entonces este Qué es un Core y Qué es un procesador pues como lo vemos aquí ahora sí que este un Core está contenido en un procesador mir aquí se ve justo busqué una figurita en internet donde se viera bonito no miren por ejemplo un Core es una unidad del procesador O sea o de nuestro cpu un Core lo que tiene pues es una unidad de control su propio reloj su registros su alu O sea que quiere decir que puede o sea que que si nuestra compu tiene varios cores quiere decir que cada cor
(12:55) puede tener un hilo no un hilo real entonces que decir que si nuestra si nuestra cpu tiene cuatro cores quiere decir que puede haber cuatro hilos que Ejecutan cosas al mismito tiempo porque no tienen que pedirle recursos al otro no lo que sí comparten es un controlador eh Y pues obviamente no todo esto de de input de entrada salida este comparten caché además comparten otro otro tipo de memorias no Entonces es distinto por eso podemos decir que un procesador tiene varios cores no y y como les digo o sea en realidad Por ejemplo yo les
(13:37) digo mi compo tiene 10 cores Yo sé que tengo 10 hilos reales no 10 hilos que pueden ejecutarse de forma simultánea e y O sea que pueden hacer cosas de forma totalmente paralela No eso eso significa entonces eh aquí les pongo no sea como Bueno si lo leen tal vez después a detalle o espero que ya lo hayan revisado entonces cada procesador Además este pues tiene su su arquitectura particular depende qu este Qué modelo compremos o sea bueno qué comp tengan Si tienen una Intel pues probablemente tengan una arquitectura
(14:18) distinta no O sea este Cómo tienen los cachés no Cómo se conectan los cachés l1 L2 l3 este Cómo se conecta incluso cómo está interconectado ambos chips no O sea ambos procesadores que contienen sus cores Cómo están este conectados o sea esto cambia y eso son ejemplo pues simplemente una arquitectura moderna no moderna ahora sí que de los 2000 para acá Todos tenemos más o menos algo así parecido pero cambia dependiendo la computadora entonces bueno yo les estoy comentando No aquí de bueno cada cor este en realidad guarda un hilo no O sea
(14:57) Bueno es es un hilo simultáneo pero este en en realidad hay dependiendo del fabricante por ejemplo Intel eh ha desarrollado este Intel ha desarrollado eh este pues como formas no en las que de hecho cada cor pues tiene la capacidad de tener hasta dos hilos y te aseguran ellos que son dos hilos simultáneos no pero dependiendo revisé que también amd también tiene una tecnología similar de Apple la verdad no no he visto no pero la realidad es que o sea lo que s es una seguridad es que cor equivale pues al menos a un hilo real
(15:42) simultáneo vale pero bueno sí O sea ya eso va a ser todavía más este específico no dependiendo Incluso si compraron O sea si tienen un chip de Intel que tenga esto que se llama aquí Este lo puse o sea lo de hiper trading así le dicen entonces qu es la capacidad que cada cor tiene más de un hilo no y Bueno aquí dice que son dos hilos los que tiene por Core no entonces este okay Bueno entonces también luego este espero que bueno Más o menos les haya quedado claro No multihilo pues es la capacidad de tener varios hilos no
(16:23) multihilos simultáneos la capacidad de tener varios hilos pero que además se pueden pueden ejecutar cosas de forma paralela Y eso multihilos los tenemos desde los 50s multihilos simultáneos desde los 2000 de forma este eh Cómo se dice pues pública no O sea como para comprar como compu de casa y multi y a su vez con los multihilos simultáneos tenemos Nosotros con arquitecturas multiprocesador o sea de dos chips por ejemplo dos chips o tres chips o cuatro chips no depende que compo tengan y además cada chip tiene tiene un número
(17:01) de cores que es la capacidad de almacenar un hilo y este hilo que se puede ejecutar de forma simultánea no entonces este Esas son las diferencias no tenemos multihilos multicore multiprocesador Vale entonces yo les si alguien les dice y los nuevos procesadores tia Qué hacen Ah pues lo que hacen Es que este optimizan lo más para crear hilos virtuales digamos que pues o es lo mismo No abajo pues pasa lo mismo tenemos cores no Por ejemplo si tienen Intel pues tienen hasta dos dos hilitos por Core no imagínense entonces lo que hacen estas
(17:42) De hecho son como las las lo que optimizan las gpus No pues es que te aseguran que está tan optimizado que estos ocho hilos simultáneos se ven como 16 o sea es lo que te aseguran no y que y que el procesador aprende y que se enfría solito y que el enfriarse solito lo que hace es que te mejore el rendimiento o sea como que ya son cosas así pero bueno o sea no es innegable que abajo en realidad tienes esto no O sea sí obviamente yo creo que pues debe haber ahí unas gráficas no este no pues Miren mi sistema de enfriamiento es más
(18:20) increíble y por eso esto no O mi sistema para cambiar de un de un hilo a otro es más rápido y por eso parece que en vez de tener ocho hilos reales tienes 16 no O sea como que te da este Pero bueno o sea es ya son cosas así por arriba no gente que se dedica a eso las marcas se fabricantes no se dedican a esto pero les digo o sea en realidad si nosotros quisiéramos así ver de seguro cada quien tendría una arquitectura diferente no O sea sobre todo los que tienen fabricantes distintos Pues se vería aquí abajo bastante distinto
(18:55) no Okay entonces Esas son las tres cosas distintas luego este bueno de como mul multicor multiprocesador y además yo también luego en las clases luego seguro los ando mareando que a veces les digo hilo y a veces digo les digo proceso no este Por qué Porque miren en realidad un un hilo o un proceso el gran este el gran este diseñador No pues del carnel y de Linux no y de todo todo loes ahora que si se dan cuenta é tiene todo que ver con hilos y procesos No él dice que pues un hilo un proceso no le gusta diferenciarlos él dice que ambos son
(19:40) contextos de ejecución es decir como que una unidad de ejecución en el procesador Okay pero bueno nosotros este pues los podr o sea eso dice Linux Linux y hay varios también autores que espalda esto si ustedes se van a internet es una pelea no en Star overflow y así que no que y un un proceso es lo mismo y hay otros que te van a decir no este un proceso es un programa en ejecución y un hilo es un proceso que puede ejecutarse de forma paralela con otros hilos concurrentes y compartir recursos por ejemplo no O sea tomando
(20:25) Este ejemplo un proceso podría ser como ejecutar un programa en la máquina virtual de Java Okay consideren así un proceso y y este y entonces un proceso es un programa en ejecución y este este digamos que esta Este programa que se ejecuta en esta máquina virtual de Java Pues tiene un hilo principal no Pero además como nosotros vamos a usar este vamos a hacer programación multilog pues vamos a llamar así vamos a crear varios hilitos no entonces en bajo esta definición Pues el proceso sería el programa principal de Java y a la vez
(21:08) este proceso se divide en hilos no O sea como que hay hay esta definición Pues un hilo está contenido en un proceso Vale entonces el proceso es capaz de ejecutar varios Hilos de forma concurrente y permite que compartan recursos no por ejemplo o sea como les digo un programa de Java como lo vimos ya en clase como yo les decía miren tenemos dos variables compartidas no entonces imagínense que tenemos al hilo a y al hilo B entonces quiere decir que estos dos hilos comparten recursos no y el programa principal es el que jala a
(21:46) los dos pero bueno por ejemplo ya viéndolo aquí en la práctica en Java Pues en Java siempre tenemos un hilo principal que es el que jala o sea el que le das a ejecutar y es el que jala el programa El que lleva el tiempo general del programa y además tenemos los dos sub hilos no a y a b que comparten o hacen cosas de forma concurrente Okay entonces por eso yo a veces uso de forma indistinta proceso e hilo no porque pues el proceso contiene a los hilos entonces Pero si yo les digo proceso Pues también puede ser que les
(22:18) está hablando de un hilo no O sea por eso los uso a veces de forma indistinta y se me va la onda y de hecho también lo hacen en el o sea en la literatura también ustedes pueden encontrar que hay autores que hablan de procesos no de process One de process two así sobre todo los los que son muy teóricos los que son muy muy este más enfocados a la práctica les encanta y sobre todo los que programan en alto nivel como en Java como como en rost como así este les encanta hacer esta diferencia de que no que un hilo Es simplemente
(22:54) este Bueno un hilo está dentro de un proceso y y unes eso puede tener varios hilos o sea les encanta hacer esta distinción Pero bueno o sea yo eh Pues no O sea bueno no me parece pues no sea tan importante o sea pueden usarlos también de forma indistinta y y yo los les creeré no Okay entonces un proceso como les pongo aquí pues les digo se considera también como un conjunto de hilos que comparten el espacio del proceso no que es memoria disco cpu este ciclos no del procesador Okay entonces bueno eh Ahora sí no ya ya que tenemos todo
(23:38) este contexto pues ahora sí que es la programación multi en Java o sea cómo se da no cómo funciona o sea porque ya ustedes ya les ya les conté No que pues cada hilo vive en un cor no pero pues eso es como a bajo nivel no pero nosotros estamos en Java y nos damos el lujo de olvidarnos un poquito de todo todo eso Entonces bueno la arquitectura de de la bueno los hos como bien sabemos nosotros ya ya tienen tiempo usando Java este pues todo corre sobre la máquina virtual no entonces como que pues eso es nuestro nuestro enfoque de
(24:18) estudio entonces la máquina virtual pues tenemos ahí varias varias áreas no pero bueno la que nos gusta a nosotros y las únicas que nos importan No pues van a esta área de TR synchronization que está aquí y la de Memory management no que este que pues tambi está ahí el colector de recolector de basura eh Solo nos interesan en realidad esas dos vamos a estar si llegamos a hablar de algo son de esas dos pero no lo demás no nos importa si acaso tal vez este cuando comparemos el el performance no el funcionamiento de de este
(24:59) de algunos programill pero yo creo que será por la práctica cuatro pues tal vez hablaremos un poquito de los compiladores no se como si hace alguna diferencia compilarlo de una u otra que s sí la hace pero pues tampoco es así mucho este Pero bueno o sea no no no hay más vale Y bueno lo único que tenemos que saber de todo esto es que un hilo en Java es equivalente a un hilo nativo no del O sea si yo les digo que mi comp tiene 10 cores No yo tengo una Apple entonces quiere decir que tengo 10 hilos nativos no Entonces este pues en
(25:36) realidad si yo creo 10 hilitos Pues yo creo que ya el 11 que cree pues va a ser un hilo reciclado no O sea no no se va a ejecutar de forma simultánea sí se puede crear otro o sea se puede crear más Hilos de los que en realidad tiene tu comput pero digamos que en realidad los 10 o sea los que yo tengo y eso Si no es que tengo yo abierto 1 otras cosas no este Pero bueno o sea ya el 11 Pues no va a ser real el 11 va a ser un hilo reciclado que va a tomar la tarea de ese otro y que va a decir Ay mira soy un nuevo hilo pero en realidad no O sea no
(26:07) se está ejecutando de forma estrictamente simultánea este Bueno entonces cada hilo en Java va a tener una región de memoria y esta región como ya les había comentado es la stack la stack de cada hilo que es su memoria local no su su memoria este propia de cada hilo y esta Va a contener este variables locales no configuraciones de métodos todo esto va a guardar la stack que van a ser ejecutados por este hilo nada más y el tamaño de estas stacks pues es Ah bueno me equivoqué la variable no este el tamaño de las stacks es una variable
(26:44) pues ya de la ya va Machine No no es como que nosotros podamos asignar más memoria a los hilos Okay entonces este pues cosas que tenemos que saber no que así están luego en relación con la asignación de memoria digamos que además de las un segundo entonces este además no de las de cada tenemos lo creemos uno objeto así por defa la Java virtual se va va a guardar en la Java Hip no en la memoria Eso es así Algo que ya está no por default de de la virtu Machine Entonces cómo se va a guardar en la Hip pues la Hip tiene
(27:47) pues les encanta decir no que es rápida y que es safe no O sea que es segura para los hilos es decir que de hecho lo que o sea además de est de esta figurita en realidad es como que cada cada hilo pues tiene asignada una región de la Hip no O sea si un hilo crea algo en la Hip est o sea bueno de forma compartida no para todos pero el hilo el que lo crea pues va a estar asignada en una tendríamos que tenemos que saber de de ya vale Este y ahora sí no como de ahora sí lo interesante este ya la parte práctica Ahora sí Bueno unilo en Java eh Ya Java
(28:45) pues este trae todo implementado No pues es una instancia de la clase Java l no y aquí está el link y ahí pues pueden ver todo lo que le incluye este pues Y qué es simplemente un objeto entonces Cómo podemos crear un hilo pues Existen dos formas distintas la primera pues es extendiendo la clase tre y la segunda es implementando una interfaz rable entonces Bueno aquí les ahita vamos a los ejemplos vale unilo Este tiene los siguientes atributos tiene un ID tiene un nombre que le podemos asignar tiene una y tiene un estatus no entonces el
(29:31) estatus este por ejemplo New pues es cuando simplemente creamos al hilo Run es cuando ya está siendo ejecutado bloke es cuando está bloqueado el hilo esperando algo no Y eso lo vamos a ver cuando veamos monitores eh también tiene Time Waiting que es cuando está esperando es como una sub de bloqueado pero pues aquí está bloqueado pero esperando por un lapso específico y terminated que pues es cuando ya ya terminó No ya hasta pues ya va a dejar de existir el hilo depende no Si hasta le perdemos la la referencia pues ya ya
(30:10) se acabó Entonces miren lo que les comento este está muy bien entonces así bueno me Me comentan no si no se me escucha bien o si me entienden Okay entonces cómo queremos unil en jaa Pues de esta forma no eh Esta es una clasecita example trs que tiene aquí su su Main no entonces aquí este le comparto Bueno vamos a crear una instancia de extend y otra instancia de esta sido de TR mirita les voy a enseñar TR simplemente es este una clase que ya vieron lo que hace pues es que extiende thre como Les comento sea es una forma
(31:08) de crear un hilo extiendes TR y siempre que creas esta clase Pues tienes que este que que que cómo se llama crear crear O bueno sí como crear el método pero tiene un nombre no pero bueno o sea como esta clase de tiene por default Run siempre siempre tienes que este crear este método Okay entonces lo que esté dentro de derron Ajá sobreescribir sí sobreescribir es la forma bien tienes razón Camilo es la forma no de decirlo tienes que siempre sobreescribir la classe Run porque si no lo haces pues este te va a marcar error O sea no pues
(31:51) creo que ve es una clase abstracta entonces a fuerzas tienes que hacerlo eh luego este en name por ejemplo lo que hacemos Es que Ob tenemos el nombre de lilito no cada hilo va a tener nos referimos a cada hilo como thre y aquí con current thre podemos obtener el nombre y también podemos obtener el ID también si le ponemos ID Pues también no obtenemos su ID Ya pues simplemente es lo que hace esta clase este imprime su nombre no y esta otra mir lo que hace aquí pues es simplemente crear una instancia de esta clase trent el hilo a Vale y el hilo B
(32:39) es otra forma es la segunda forma de crear un hilo que lo que es es este simplemente es que podemos implementar la clase rable igual sobre escribiendo la clase Run aquí puse lo mismito no se hace lo mismito o sea tenemos el nombre del hilo y ya está Entonces cómo se ejecuta pues sucede de esta forma la clase thre que extiende a la clase thre Class el nombre del Lito c no Y la otra la que implementa la clase la interfaz de r 1 Entonces es distinto Cómo se crean los hilos porque aquí simplemente lo que hacemos Es crear una
(33:26) instancia de este tal cual o sea de la clase de jav lank y le pasamos el rable porque el runnable lo que tiene o sea esta interface que que implementamos es este es sobreescrito digamos que aquí pues sobreescribir la clase r pero ambos hacen lo mismito o sea simplemente son dos formas de este aquí está simplemente son dos formas de hacerlo no entonces así se vería pero si se dan cuenta puede ser que no se ejecuten justamente en el mismo este al mismo tiempo no por ejemplo puede ser que por ejemplo en esta ejecución
(34:21) primero se imprimió TR un no y luego TR o sea puede ser o sea en realidad todo lo que escribas aquí es este Ah bueno también comentarles No aquí pues lo creo no Entonces digamos que aquí sería como New no sea el estado New del hilo y ya cuando le das en aquí en Start pues es el estado ron del hilo es distinto entonces así Simplemente los creas y es lo mismito y les digo no no siempre se Ejecutan no siempre se Ejecutan en el mismo orden Lo que pongas en lo que ejecute ya Cómo se ejecuta el método Run este no controlas eso no este Entonces
(35:05) es Es una forma la otra es este buill luego Esta es un ejemplo Este es un ejemplo de cómo se crean distintos este hilitos viendo igual a clase TR enseñ A cómo se ve Ah Aquí está est buscándolo bueno este aquí creas una clase no TR simplemente extiendes y por ejemplo la clase como tal puede tener una variable este un atributo no que en este caso sería count tiene sus métodos por ejemplo además de ROM pues puede tener más métodos en este caso es increment no entonces lo que hace esta clase pues es un contador y aquí otra vez obtenemos el
(36:11) nombre del ID y por ejemplo este lo que hacemos Es crear a este tres hilitos no a b c y le damos Start si no le damos Start No pasa nada vale Entonces miren aquí es como curioso porque en realidad contador está en cero y todos simplemente lo que hacen es poner la cuenta en uno por qué Porque como bien sabemos en Java si creamos tres instancias distintas no de un mismo objeto quiere decir que en realidad esta variable Ay se me olvida esta variable es local no o sea es local a cada hilo cada quien tiene una propia
(36:56) copia de count no entonces este si le damos increment No pues nada más van a este van a estar haciendo por [Música] ejemplo cambio inglés español y simplemente contar dos veces y todos cuentan dos veces está no O sea no no hay más porque no se comparten en realidad las o sea el contador cada quien tiene su propia copia de su contador no este otro ejempl ito no es qué tal que ahora hacemos el mismo contador pero ahora este en vez de extender la clase tred Ahora implementamos la clase runnable eh También tenemos Ahora sí
(37:54) count no un atributo de la clase y ahora sí este atributo van a ver que si creamos un solo objeto runnable y creamos tres hilos y a los tres hilos les pasamos el mismo objeto runnable eso como que O sea qué les suena pues como que ahí ya van a compartírselos no O sea realmente va a ser o sea va a ser un mismo contador y se van a y todos van a contar sobre el mismo no Entonces ahora sí ven por ejemplo pues como que si ustedes me dirían no Bueno y qué me recomienda usar siempre o sea extender la clase tred o implementar la clase Run
(38:30) siempre no pues la realidad es que es lo que quieran hacer no O sea no no es como que pues no sé una se el y la otra esteé increíble no pero sí en este caso si queremos hacer Pues un objeto compartido y pasarle el mismo objeto a los tres no quiere decir que en este caso eh esta variable y está compartida Aunque pues sí si se dan cuenta por ejemplo aquí este se imprimen en distinta forma pero por ejemplo el hilo cero si pone este eh el anterior el valor anterior era cer0 no Este es un y este es dos pero no Siempre es lo mismo
(39:18) No Bueno aquí otra vez 0 1 2 Mira así casi siempre se Ejecutan de la misma forma nada más cambia como Cómo se imprimen no O sea en el sistema de de entrada salidas sí cambia pero regularmente el hilo dos es el que tiene la cuenta en dos no como que no se respeta esto no sí casi siempre en los debe ha alguna ejecución donde no no casi todas yo creo que porque son bien poquitos no se se forman Start oa bueno como que si este van a ejecutar run run bueno la el método Run y enseguida no sea solo hacen un increment
(40:06) en casi que en el orden en el que se llama el Start Okay entonces bueno es distinto este Okay entonces como les comentaba en realidad el hilo principal o sea o el programa no el que corre sobre la llva virtual Machine pues va sobre o sea como que tienen un solo hilo no es el que jala todos los demás entonces bueno cosas que podrían pasar es que el contador no no terminara y miren por ejemplo Aquí está curioso porque en este ejemplo el el hilo Main es el hilo principal no y Mientras por aquí pues todos andan este
(40:49) aumentando el Bueno creo que solo tengo otro hilo Solo tengo el hilo cero este tengo aquí el método Main no y lo que hago aquí pues es guardar el nombre del del este del hilo principal thre name vale Entonces digamos que quien ejecuta el método Main quien ejecuta el método Main es el hilo que se llama thre Main aquí ya Se imprime es el Main ya vieron es el hilo Main el que ejecuta el método el método Main y este e Ah bueno entonces creo aquí unito y con esta clase no esta clase lo que hace Pues es que implementa la clase
(41:46) Run otra vez tiene su su método Run pero miren en el método Run yo le le digo mientras sea verdadero y este yo le paso verdadero no este duérmete 500 nanosegundos luego imprime tu nombre este incrementa el contador y bueno este Catch pues simplemente es para porque cada vez que utilizas slip pues puedes te puede salir una una una excepción de interrupción no entonces pues siempre tienes siempre que quieras utilizar TR slip Ah bueno eso es otro no otro método de que te incluyen en los TR tenemos ya TR Start Y tenemos TR slip no
(42:31) este entonces son esos dos pero bueno entonces siempre que quieras utilizar lip tienes que poner un Catch no bueno para para cachar la interrupción la excepción digo entonces eh si se dan cuenta este método pues no termina no No termina Entonces el hilo a este perdón H Pues aquí en realidad él ya terminó no este H ya terminó pero el hilo a es el que utiliza el Run este de infinite Counter pues no tiene término no Entonces cuando se ejecuta cuando se ejecuta este este este programa pues nunca termina no a pesar de que el principal ya acabó Cómo es una
(43:28) forma de hacer de que realmente cuando acabe el termine todo podemos nombrar al hilo a como demonio hay dos tipos de hilos digamos que en Java creo que en general casi todos los lenguajes ti este que pueden ser hos normales no o pueden ser hilos este demonios y lo que hacen es que terminan enant termine No si lo ponemos si nombramos a a como como demonio pues ya este va a acabar en cuanto el hilo Main acabe Vale entonces como que ya vieron aquí no O sea como que y bueno Yo me imagino que se preguntar no bueno y que no existe si
(44:16) existe Start no que no existe TR este no existe sea como que bueno Me imagino no este pero pues Noe Bueno o sea está de desde Java 5 o sea desde hace un buen Por qué Porque este cuando ustedes bua Cuando los programadores usaban TR stop Pues en realidad no sabes En qué punto se acabó el programa o sea te mandas mandas a que el el hilo se termine pero como ya vimos nosotros en por ejemplo en candados No qué tal que mandamos a que un hilo se se se se pare de repente o sea súbitamente y está justo tomando el candado no y ya
(45:02) no lo libera o o sea bueno eso es como una un ejemplo muy este Eh Pues que se ve muy evidente no que es un problema Eh entonces por eso está de hay otros ejemplos no O sea no sabemos en realidad En qué punto está el hilo como para que este detenerlo de forma súbita no Y puede ser que Si volvemos a correr el programa ahora no funcione si utilizamos TR stop Vale entonces pues en realidad sí existe o sea como que todavía Creo que te permite jalarlo por ejemplo vamos a jugar no este que dijéramos aquí eh TR miren s sí no sale no está pero si no
(45:53) sale Qué pasa Ah miren valió que es no este no se detuvo No existe stop Vale entonces este pues si queremos que se detenga esto y no le ponemos un alto en el en el ron No pues hay que hay que nombrar nuestro hilo como demonio e Vale entonces bueno alguna dudita por el momento todo [Música] bien si me escucho verdad todo bien este entonces Bueno les puse un buen ejemplos así como muy sencillos Pero bueno los pueden correr por se les dice demonio pues te das cuenta en realidad no está raro no en realidad es concepto
(46:57) que usamos un montón de sistemas operativos no este como cuando se instala un programa se instala Casi siempre como Demonio No por si apagamos la compu o se cierra el programa que lo estaba jalando se termina enseguida no O sea como que es Ajá está corriendo el puerto tal No sí como que siempre son hilos que se Ejecutan en segundo plano no yo creo que es por eso qué pasa si el hilo es el demonio a O sea si es como si es demonio Pues a ver este yo creo que no tendría vamos a nombrarlo [Música] O sea no podemos colocar al hilin como
(47:59) demonio pero pues te das cuenta como es el principal en realidad el mismo es un demonio no O sea a ver podríamos preguntar porque pues si o sea bueno o sea en cuanto si él acaba Entonces todos acaban no siempre es así es como el principal El que jala a todos no Pero si ni siquiera se puede o sea pero o sea en realidad nombras demonios a los que no son principales o sea los que creas tú pero bueno es como interesante ver no que en realidad también el que corre o sea el programa el hilo que jal el programa principal
(48:41) Pues también es un es un hilo no que se llama Entonces sí puede ser que acabe él pero este o sea bueno que que que termine y mientras los otros no terminen no los p no demonio dentro de un demonio Okay entonces bueno el ejemplo cinco Ah este aquí como es la enseñanza no la moraleja del otro pues bueno Siempre hay que diseñar el método Run para que acabe no este en vez de ponerle W TR pues mejor este usemos este pongamos cosas no para que realmente podamos siempre detener lo que está corriendo o es siempre suilo ajá si
(49:28) usando un hilo Damon siempre es un suilo que va a terminar solamente si el hilo principal acaba no Ajá entonces imagínense que le ponemos al hilo principal de pues como que no tiene sentido No porque se supone que ese es el que está jalando a todos Ajá sí como dice Juli lo Damon es siempre un suilo que este que si lo ponemos damond entonces va a acabar en cuanto el principal diga que se acabó no m así así funciona uno de vale Este bueno sea Claro en los libros que les presto Pues ahí está como una explicación más
(50:10) detallada pero pues en realidad eso es no eh Pero bueno vamos a ver ahorita no en realidad como que no eh pueden o sea pueden utilizar los hil los donds pero también siento que este A veces es mejor dejar terminar a los hilos y diseñar nuestros programas como bien para que realmente siempre acaben no en vez de ponerlo seon y que se corte enseguida no no se me ocurre como un ejemplo en donde a fuerzas ocupemos que no sea como instalar un programa en el sistema operativo no como cosas así pero aquí como que no se me ocurre o sea como
(50:51) que lo mejor sería siempre diseñar como les digo no O sea el método Run que siempre tenga pues una salida no por ejemplo este While este Eh Pues mientras sea verdadero que corra no Entonces vamos a poner un método para parar esto no entonces este es el método stop count que lo que hace simplemente es que pone o sea como que para este ciclo no para que ya no siga Entonces por ejemplo este Cómo funcionaría eh el hilo Main es que ahí está la diferencia como dice Juli este djen ver acá miren es distinto cuando nosotros
(51:38) ponemos un hilo de acaba todo o sea ya se corta de Tajo todo no este si el hilo Main dice que que terminó todos terminamos no sea se acaba el programa pero si nosotros siilo Main este dice Counter stop count porque Quién hace esto el ilin para el programa No aquí en este programa no tenemos Demons pero sí le damos al hilo principal pues una herramienta para que pare a los demás no O sea pues ahora sí que aquí Este lo diseñamos de esta forma Entonces el hilo Main dice Ah mira este yo ya acabé o sea mira ahora soy el no y que acabe todo
(52:25) entonces todavía eh este pues deja que corra otro ciclo no O sea lo ponen falso pero por ejemplo puede ser que el ya haya entrado Y entonces este pues si ejecuta la línea 42 no pero ahí se ve como la diferencia parean como este el hilo principal corta no O sea deajo a todos los demonios y si si no lo utilizamos entonces como que todavía le damos chance a que los demás acaben no es la diferencia es como muy de Tajo ponerlos a todos damons por ejemplo Eh entonces Bueno aquí este nada más lo que se hace Ah miren lo queo aquí es que
(53:15) tenemos un un este sipr estoy poniendo bueno tenemos un en la línea 11 no tenemos una instancia de de Counter este stop Counter que es pues es un es una clase que implementa ron se la pasamos a un hilo no lo creamos aquí en la línea 12 lo ponemos a empezar y este TR Catch lo que hace Pues en realidad es este es a dormir al hilo m no cuánto 15 nanosegundos este y y ya que acabe no O sea y después en la línea 22 el hilo Main para el programa o sea para el hilo a y este y ya entonces cuando le damos aquí TR Start Pues el hilo Start va a estar
(54:09) imprimiendo y aumentando el contador cada 500 nanosegundos no entonces por eso solo alcanza a hacer a hacer tres no es lo que pasa aquí la diferencia entre entre ambos no O sea y como les digo Aquí no tenemos stop este hay que utilizar dem o diseñar nuestros programas para que se acaben no y no se queden ahí este por siempre dando vueltas vale Okay Más o menos e Sí vale entonces okay Este es solo un ejempl ito [Música] mpo Aquí bueno como les había comentado en realidad todo lo que puedes hacer con
(55:15) extendiendo la clase TR la puedes hacer la clase r todo No nada más que por ejemplo cosas por las que les gustaría extender la clase TR pues es para tal vez este eh eh Como unificar no su programa o sea como siento que es como es más bien como prácticas limpias de Java no e para ponerlos a todos los hilos Que todos tengan la misma lógica no este como que podría ser no eh Y en este ejempl ito simplemente lo que les quise compartir es que ven que en el en este ejemplo de acá eh [Música] examp este aquí en este ejempo este habíamos visto que en
(56:12) realidad todos este los tres hilos no el hilo a el b y el c cada uno hacía una instancia de la clase y entonces en realidad cada quien tenía su propio contador no era un contador compartido No entonces aquí este otro programa yo lo que les quise enseñar es que pues sí se puede también eh compartir un mismo contador utilizando la clase de extendiendo la clase tred no entonces simplemente lo que hacemos Es por ejemplo creamos el objeto no el contador Aquí está tenes tienes nada más su su atributo count y tiene dos métodos que
(56:53) es incrementar Y obtener el valor son los lo que les puse y este entonces lo que hace lo que hacemos Es que en el método Main pues así creamos una instancia de este contador y luego le pasamos este contador a los al hilo no O sea a la clase hilo entonces este bueno la clase y esta clase lo que hace pues es este en el constructor pues guarda no una guarda el contador entonces tiene la mismo la misma instancia del contador entonces quiere decir que los hilos van a compartir Ahora sí el contador Entonces ya vieron como que pues no es
(57:36) como que en TR este extender la clase TR no se pueda también podemos hacer objetos este o sea compartir objetos no de forma concurrente entonces aquí lo que hace cada hilo es este yo les puse un for no tenemos son cuatro hilos el hilo a el B el c y el Vale entonces estos cuatro hilos comparten una instancia de esta clase bueno perdón una instancia de de un solo contador quiere decir que en este caso el contador es compartido y este entonces eh cada uno pues va a contar aumentar bueno no voy a ponerlo este 10 veces el contador Entonces se
(58:33) dan cuenta al final lo que tendríamos que tener este aquí el hilo Main este imprime el valor final vale Y este Ah mira nuevo entonces imprime el valor final y luego bueno ustedes me dirán aquí esto qué no esto es nuevo Ajá Y también dice Camilo Por qué acabó en 38 el contador eh es dos preguntas no Primero este hay corresponder a Camilo el el contador terminó en 38 porque se acuerdan que yo les había comentado en la clase de la de práctica no sea Perdón la clase teórica que cuando no tenemos este candados pasaban
(59:30) cosas raras o sea cierto no hay sincronización Exacto sí s perfecto no lo pudiste decir de mejor forma sin sincronización pasa con cosas raras Vale entonces eh Por ejemplo aquí 36 37 37 entonces pasan cosas raras no este y y también es muy importante Cómo se habrán dado cuenta este hilo Main lo que hace es que en esta línea 30 lo que hace es que imprime o sea dice como Dame el valor del contador no eh pero realidad no este como se se habrán dado cuenta acá en Main no en realidad este aquí yo le le dije al Main que se
(1:00:27) durmiera tantito 100 nanosegundos y que después Este eh terminara no Ah bueno mejor este este ejempl ito mejor donde sí tenemos no tenemos hilos Demons entonces este aquí el hilo Main también no O sea se duerme en 15 nanosegundos y y y este y ya este regresa no O sea se revive y lo que hace es que imprime su nombre dice hola soy May y y para la cuenta no es lo que hace e entonces quiere decir que si nosotros no paramos aquí este después de los 15 no y lo paramos más bien acá y aquí comentamos quiere decir que ni
(1:01:18) siquiera ni siquiera van a jalar los otros hilos no porque el Main va a pararlo enseguida como que este como que se dan cuenta no más o menos este que el Main le vale que eso no O sea si hay otra ejecución si él va a parar la cuenta la para o si él va a imprimir algo lo imprime no entonces acá Este el objetivo de utilizar el hilo el método join Aquí les puse utilizamos join para que este se devuelva la cuenta final la línea 23 y si es para eso Pero además este aquí ya les había puesto Ajá Entonces el método join lo
(1:02:05) que hace Bueno aquí me fui a otro ejemplo el método join lo que hace es que permite que todo se congele hasta que termine el método este Ah perdón hasta que termine el hilo al que le pusimos al que nombramos el método por ejemplo en este caso este eh tenemos un ejemplo tal cual de cómo funciona join eh tenemos por ejemplo eh este es la clase e join no que extiende la clase TR entonces quiere decir que pues acá tenemos que implementar a fuerzas el método Run no e entonces e le damos a a join el número de rondas
(1:02:48) y miren y este número de rondas es el número de veces este número de rondas que se va a dormir un hilo y acá está no este 200 nanosegundos no el número de veces que se 200 nanosegundos y lo que simplemente nos dice es miren voy a imprimir la ronda y voy a imprimir quién soy no entonces este y al final lo que hacen los dos hilos cada quien va a tener un result Bueno voy a ponerlo aquí variable local variable local no son variables locales por porque este Como creo
(1:03:56) instancias de use join quiere decir que cada hilo tiene su propia copia no de result y de rounds si compartiéramos un Run ahí sí serían compartidas pero como cada quien tiene el su propio no O sea cada quien tiene su el número de rondas que va a dar vueltas O sea que va a dormir y va a tener su resultado no Entonces digamos que lo que hacen ambos hilos es que primero result es igual a cero y lo que hacen ambos después es que eh cambian eh result a uno después de las rondas no vale entonces lo que hacen es como se
(1:04:41) ve este este uso de join me gustó esto para para mostrarles Para qué se usa join Okay entonces bueno eh creamos los los estos los dos hilos el hilo a vamos a dormirlo cuatro cuatro veces 200 segundos y el hilo B lo vamos a dormir dos veces no 200 nanosegundos Entonces le damos Start a ambos y este solo Vamos a hacer join del hilo B Vale entonces qué pasa cuando solo le ponemos join al hilo B este quiere decir que el el hilo Main no O sea todos los demás hilos tanto el a como como Main vamos a esperar a que el
(1:05:25) hilo este B termine de ejecutar lo que tiene que ejecutar Vale entonces por ejemplo Bueno voy a ponerlo aquí result de a para que se vea más [Música] bonito de B vale Okay ahora sí no entonces Entonces miren este y además ellos van imprimiendo no las rondas e Entonces al final resulta que tenemos que el hilo de a es igual a este o sea vean es la última línea del Main no O se quiere decir es la última la línea 41 e el a no cambió a cero o sea perdón a uno no que es el objetivo quiere decir que a no terminó de ejecutar su método Run Okay y el B
(1:06:23) quiere decir que sí acabó de ejecutarlo o sea en cuenta el V lo que hacen solamente son dos rondas no entonces lo que hace el método join es congelar o sea como que decirle a todos espérenme a que yo acabe Para que entonces el programa acabe vale Y quién lleva el programa Pues el homin No si nosotros no ponemos ninguno de los dos este join o sea si no le damos join a este si no usamos join qué pasa pues miren No pasa nada o sea este Ah bueno Sí o sea salen las rondas de este se alcanzan a imprimir algunas ronditas pero en realidad el resultado
(1:07:14) de de este del Lilo Main Pues el hilo Main No espera no el dice yo ya acabé que los demás sigan como no son dond no terminan de ejecutar pero Lilo Main dice no me voy a esperar yo a que los otros acaben de ejecutar yo ya acabé y en cuando los otros acaben pues ya no Claro que si le ponemos que el a y el B sean damond ni siquiera van a pasar estas rondas no vale entonces qué hace el hilo join pues hace que el hilo Main en realidad todos los demás hilos esperen por este a que al que le pusimos join acabe en este caso miren ahora el hilo a es el
(1:08:01) que tiene el join entonces lo que nos dice es que esperen a que el hilo a acabe Para que el hilo Main y todos los demás acabemos Entonces como el hilo a pues da más vueltas que el B ya vieron da cu el hilo b2 entonces B alcanza a acabar no entonces lo que nos permite Lo que nos hace el método Jo la terminal el hil Main es el TR 3 El tre TR este no no el Per no está el el sería al que le llaman esa como lo llaman el Main lo llaman m así tal cual no lo llaman con con nombre aj miren lo puesto acá Entonces vamos a ponerlo
(1:09:11) [Música] aquí Este es el le llaman Main entonces este es es la diferencia No si ponemos join obligamos a que Main se espere porque Main ya vieron no O sea Main si no le ponemos como aquí pues el el r de ambos hilos del a y el B pues es un for Pues por eso nuestro programa se acaba no pero si le ponemos un Wi pues nuestro programa se va a seguir y Main dice yo ya acabé no este y yo ya imprimí y ya entonces se dan cuenta para eso nos sirve el join no No espérate a que acabemos todos entonces bueno a que acabe yo si le ponemos por eso acá No si
(1:10:04) le ponemos más bien este solamente a b Pues solamente Espera que B acabe Ah no Ah no acaba no porque hace más rondas entonces para eso nos sirve join Okay Eh bueno este ahora sí el programita que les estaba comentando donde comparten los dos el el este Entonces si se dan cuenta aquí ahora ya entendemos no Para qué es el join de los de todos los hilos quiere decir que que en estas líneas pues esperamos a que a b c y d terminen de ejecutar 10 veces cada uno el for no O sea entonces quiere decir que como que bajo esta lógica
(1:11:07) este esta línea el hilo Main imprime el valor final pues ya es el que al final el que quedó no O sea quiere decir que Main espera esteo Main entonces de esta forma el hilo espera este el valor final si no ponemos join Por ejemplo si más bien eh vemos el valor por ejemplo antes de los join ya vieron este Main imprime un valor aquí en la línea 22 que es 3 antes no se supone que la línea 32 esperó a que todos terminaran Y entonces se imprim 36 Vale entonces como les había comentado en la clase práctica cuando no usamos sincronización como bien dijo
(1:12:03) Camilo pues pasan cosas raras sea ve aquí dio 40 Aquí sí dio 40 no pero este que es el valor esperado Debería ser 40 pero pues el contador como como o sea como suceden distintas ejecuciones este no siempre obtenemos el mismo resultado porque las operaciones se entrelazan de formas raras distintas no no lo vemos pero en la clase teórica lo que vemos es el detallado de las ejecuciones cosas que podrían pasar este entonces aquí como ya analizamos en la clase teórica pues ya sabemos no que pueden pasar cosas raras que no siempre
(1:12:42) nos va a salir 40 Okay entonces este Déjenme ver en cuál voy ejempo ah Bueno ese es uno y también ese es otro ejemplo cuando este también usamos un contador externo o sea bueno este objeto Counter na y se lo pasamos al rable Y entonces el rable ahora usamos la misma instancia para los tres hilos y este entonces quiere decir que el contador pues es compartido No pero en la terminal este bueno en el otro programa en el primer programa de run en realidad pues ya estaba compartido No no más aquí como que quise mostrarles que pues podemos
(1:13:36) hacer lo mismo no O sea con TR extend cuando extendemos TR y cuando implementamos rable no hay problema este Pero bueno aquí nada más no lo hice como la cuenta del for nada más aquí pues imprimí así no De hecho si se dan cuenta aquí casi siempre obtenemos dos al final no en la cuenta no pasan cosas tan raras Cuando tenemos solamente a tres no pero cuando tenemos este que cada uno tenía que contar 40 este Perdón 10 y al final debíamos tener 40 y sí como que pasan cosas raras Noa como entre más hilos entre más cosas se hagan este pues
(1:14:16) tenemos fallos no en por la sincronización Okay entonces este e les iba a enseñar también el fibonacci no bien este est Está interesante eh esta clase lo que hace es que extiende la clase TR no y utiliza recursión entonces un hilo el hilo principal pues crea los los dos hilos no y luego los dos hilos crean vez otros dos hilos y así no pero pues como les había comentado en realidad tenemos el número de hilos contados no Y además este la llava virtual Machine Pues también tiene cada cada stack pues tiene su propia límite de memoria y no
(1:15:08) lo podemos cambiar no Entonces tampoco es como que nosotros podamos crear 18000 hilos un millón de hilos Porque también las tack de Java no O sea pues no nos permite y también nuestro programa pues como tampoco tiene mucho sentido no solo tenemos 10 y queramos 20 pues este claramente los otros 10 van a ser falsos no eh Porque no tenemos los cores para para mantener este programación buen una programación simultánea no Entonces miren estas Este n y result son dos variables eh que van a estar compartidas por todos
(1:15:49) entonces Bueno aquí el constructor simplemente Le pasas el el este el número en la serie de fibonacci que quieres no Entonces por ejemplo si le pasas el número vamos primero pasarle este entonces lo que hace el Run como como bien sabemos a sí se está [Música] grabando según yo le di grabar s le di grabar sí le di a grabar a la clase okay Bueno entonces este lo lo que hace el el como bien sabemos no en fibonacci es este si es n o un regresa uno no Esa es la típica de fibon y si es otro entonces lo que vas a hacer es que vas a sumar el resultado
(1:16:50) este del primero con el segundo no entonces ahí es cuando empieza a aumentarse no sea la serie fibonacci H para que la veamos No sí que realmente nos da lo que debe dar este Ah mira aquí está 0 1 1 2 3 45 no Entonces yo le pedí la número a mira aquí está el número el número cuatro en la serie fibonacci es cinco no 1 2s 3 4 Bueno creo que te cuenta si 1 2s 3 cu no O sea como que no te cuenta los primeros en realidad sería el número seis no Entonces por ejemplo hay que pedirle ahora el número ocho no el número oo es 34 así miren aquí
(1:17:55) está número 8 34 entonces hagan de cuenta que lo que hace Es que este el método Main pues Crea una instancia nada más de de este hilo no y lo lo empieza entonces eh le dice que al método Main no le dice Bueno espera [Música] eh e le dice método m que espere hasta que thr termine no es lo que hace eh Y ya entonces por eso el método m la línea 38 pues espera no O sea realmente computa el valor final porque si no lo ponemos join Pues el método Main acaba Cuando quiera Vale entonces Eh Pues cuando es uno pues simplemente
(1:18:51) este te cuando es cer0 o uno el valor no de n hasta el final de la recursión pues te va a regresar esto pero mientras no sea eso lo que te va a hacer es que te va va a crear otra instancia No va a crear un hilo uno y un hilo dos o sea se va a aut Lamar no y le va a pasar el valor menos un y el valor os2 este hasta que finalmente no O sea como va a acabar la recursión pues va a ser 01 y los va a inicializar entonces este como estamos utilizando hilos no y como ocupamos nos regresen el valor entonces este vamos a
(1:19:33) sumar hasta que este trr1 y thr2 termin no con join y así entonces con que ahí se ve la recursión no va va así hasta que se va a hacer la recursión hasta que llegue a cer a un y y Mientras todos los demás estamos en espera no O se dan cuenta como que les quería poner un ejemplo no de un programa que como que no como que dices Bueno y para qué usas hilos no O sea realmente nos trae un beneficio si a todos los ponemos a esperar No hasta que el otro termine y no es como que puedan hacer mucho en paralelo solamente hacen dos no Y eso
(1:20:13) una sumita como que realmente nos beneficia no de algo usar Este hilitos Entonces este pues sí no como que no miren por ejemplo miu valió queso cuando le puse 12 lo regresó Vamos a ponerle 20 ahora sí no este ya se andaba quedando por ejemplo en 20 mi compo ya se andaba quedando out of Memory no Por qué Porque en realidad si se dan cuenta el hilo cero es el que crea H uno y al dos y el hilo uno es el que crea por ejemplo el hilo tres Y cuatro Y el otro crea el cinco y al se entonces imagínense Cuántos hilos tiene guardados
(1:21:05) cada cada hilo no este entonces Como cada hilo en realidad tiene un stack determinad o o de un tamaño determinado No pues eventualmente llegas a a hacer este out of Memory no entonces como que sí este un ejercicio podría ser ver si y realmente se ejecuta más rápido que la secuencia que yo lo dudo no porque este pues crear un hilo no ejecutarlo O sea como que también te lleva te lleva tiempo no O sea y ahí es donde vemos el problema de paralelizar este programa así como está no es muy paralelizado no y y dudo mucho que que realmente podamos
(1:21:49) mejorarle algo no este okay Entonces es un programita Así nada más para que veamos no lo como lo que no se debe hacer Bueno lo que no tiene caso hacer más bien y este otro es este un programa muy sencillito no este no me quise meter así como dije aquí les pongo para que vean como lo paralelizado porque pues una cosa podría ser hacer ver de cripto este Pero bueno no sé siento que para para realizar eso como que hay que este sentarnos no a ver más a detalle el programita y este vi que estaba fácil de hacer por ejemplo Ob tener el
(1:22:27) determinante de una matriz este se acuerdan que el determinante pues nada más era multiplicar como en diagonal no O sea multiplicamos en diagonal y y este y pues aquí se ve no O sea lo que hac es que era eh multiplicas en diagonal uno Este de una fila o sea como este de TR es de 3 por 3 multiplicas en diagonal tres filas y luego le restas en diagonal las filas hacia abajo no entes de acuerdo no s sus clases de desde la sq no determinante de una matriz Eh entonces lo que hace Este programa simplemente es que Eh pues tenemos así el el hito no O sea
(1:23:10) bueno eh la clase que extiende a tred eh se inicializa de esta forma entonces cada cada instancia de esta clase lo que va a tener va a ser este eh los números no en un un num do un TR y el parcial que es donde voy a voy a guardar el resultado parcial no y este y bueno entonces cómo se se inicializa este Perdón una el constructor es guardar los numeritos por los que se va a multiplicar por ejemplo en este caso eh th unilo no va va a multiplicar este la matriz 00 la 11 la 22 así O sea bueno lo puse de acuerdo como va
(1:24:03) la este método creo que es de cram no no sé entonces cada aito Pues digamos que hace las multiplicaciones que debe hacer donde las hace cada uno lo va a hacer aquí en el método ron y lo va a guardar en su parcial el resultado Entonces digamos que lo que hace este método determinante matri por TR pues es simplemente este le pasas a cada hilo e este cada hilo tiene los tres números que debe multiplicar okay Y entonces los inicializa y luego esperas a que todos terminen de de este buen obtengan No hagan esta multiplicación de la línea 46
(1:24:53) Y entonces ahora sí no este una vez que todos terminaron lo sumas y ya no finalmente Ese es ese es el resultado Y entonces este por ejemplo en este caso el resultado de la matriz no es -18 y se tardó eh le puse para que veamos el el este Cuánto se tarda no 36000 este bueno 361000 no nanosegundos entonces eh yo lo que les les dejé de el ejercicio miren vamos a repasarlo Bueno lo primero que tienen que hacer es es leer el siguiente link eh es un link así muy corto no y simplemente lo que nos dice es este es linus thoral diciendo que no que no hay
(1:25:55) razón para diferenciar hilos y procesos este que pues él personalmente piensa no sea hay que leer esto está cortito no pero bueno se es nada más como que lo que piensa arus ths de de que la gente diferencia entre hilos y procesos que él solo cree que pues son contextos de ejecución no y te explica por qué eh Por qué cree eso Entonces bueno se es como leer eso y escribir en máximo cuatro líneas vale este A qué se refiere el linus con un contexto de ejecución y cómo lo asocian ustedes con la definición de que un proceso contiene a
(1:26:35) los hilos no y que en realidad un proceso pues es un conjunto de hilos que comparten recursos no como que ver así como de bueno como que sí tiene sentido no como que ambos se se retroalimentan como que queden en lo mismo no eh entonces bueno es leer eso luego eh Ah Bueno tambén les quería preguntar ya no les pregunté este alguien me quiere decir cuántos hilos o sea cuántos cores tienen este en su en su en su en su computadora 24 cor Wow No cuál tienes Ah pues sí sí pues sí y este y ejecutaste también el este esta línea la
(1:27:28) de get Run Time available procs Cuántos te salieron esa no Ah bueno te deben salir 24 Sí sí vale alguien más mientras Sebastián ejecuta esta línea alguien más sabe cuánto cuatro Híjole cuál tienes una pentium por ahí una cor3 tal vez o cor 7 s una laptop viejita Chale sí se ocho bueno Sara yo creo que este cuando andemos por la práctica cuatro este me recuerdas No si no me acuerdo para darte acceso a una Eso es en línea es en línea Te puedes conectar y ya nada más subes tu Ah Tienes otra Qué bueno Ay sí que bueno porque cuatro si ya o sea cuatro
(1:28:36) ahorita está bien pero ya después Este cuando vemos el rendimiento de unos este candados ya no Ajá sale 24 sí lo que nos regresa esta línea de available processors es simplemente el número de cor porque como yo les había comentado en realidad un Core equivale real no eh Solo que tengan ahí como que las tecnologías de Intel o de amd que dicen que te dan hiper o algo así pues dice yo tengo 12 Ajá sí O sea lo normal como que creo que es entre 8 y 12 los que tengan cuatro Pues sí son compus muy viejitas este y si quiero saber cuántos
(1:29:18) los hilos de cada cor revisar la especificación de tu de tu sea pero a nivel a ver si encuentras como la la hoja de documentación de tu procesador Ajá s o sea como Buscar la en tu compu debe debes ir no por ahí este hasta creo que tienen el nombre del chip y podrías buscar ahí así como en el chip tal arquitectura bueno obviamente en inglés no para que te salga Ajá sí no pero de seguro tú vas a tener un rendimiento Así vas a poder así ver todo muy increíble este ahorita pues no sea primera práctica pues no se nota
(1:29:59) mucho No pero bueno entonces sigo con esto el entonces deben revisar el programa determinante concurrente y este y ver cuánto tiempo tarda en ejecutarse en sus compus no y o sea bueno estos experimentos los que tengan los que hagan equipo de tres este bueno de Máximo tres e este deben deben escribir no cada quien cada uno del equipo debe poner O sea si tienen tres computadoras distintas pues decir No pues en computadora uno tarda tal en la dos tarda tal Y en la tres tarda tal vale Y también la compo un tiene este no sé 10 10 procesos 10 este
(1:30:43) 10 hilos La otra tiene 12 y la otra tiene así entonces okay O sea si tienen si son tres cada quien este todos deben eh este ejecutar los programas en sus compos Vale entonces el el el punto tres es esto no el cuatro Eh pues ya vimos que este programa pues está implementado extendiendo la clase TR ustedes lo deben hacer este ahora implementando la clase rable vale en todas las preguntas hay que poner todas las respuestas eh este solamente en la que les pido que ejecuten cosas no en las otras no en las otras con que uno
(1:31:27) conteste no este Bueno o sea pero sí O sea la idea es que todos lean esto no y ya se pongan de acuerdo para que en cuatro líneas realmente puedan responder la pregunta o solamente una vale Pero estas cuando les pregunto como de Oigan Cuántos sí los tiene pues que existan tres respuestas no Cuánto tarda tres respuestas eh esta pues no solo es un programa tienen que implementarlo ahora extendiendo la clase Bueno más bien implementando la la interfaz runnable eh ese es un programa vale o sea este debe ir en el s luego deben implementar el
(1:32:06) programa eh determinante concurrente de forma secuencial y comparar el tiempo sa ver si realmente con rable o sea cuando usan rable es mejor no eh que yo yo dudo que sea realmente mucho mejor pero bueno o sea le dan lo corren varias veces no para ver si sí y si es menor vamos a van a utilizar la ley de andal para calcular ese porcentaje que que se puede paralelizar no O sea como eh digamos que despejan no ahora este p van a van a despejar p en la ecuación de andal y pues decir no O sea este porcentaje no sé se puede
(1:32:47) paralizar en realidad no sé 20% no o algo así eh Y si no es es menor entonces eh van a realizar la implementación para dos hilos en vez de seis y compararlo con la implementación no y este y y con la de Uno Vale entonces porque por qué Porque aquí por ejemplo aquí hacen aquí Son seis hilos no O sea cada cada uno hace cosas pero por ejemplo en vez de que este cada quien multiplique qué tal que solamente usamos dos dos hilos entonces que uno multiplique solamente la parte que se suma y que el otro multiplique la
(1:33:29) parte que se resta y ver si realmente más bien así se se se puede paralelizar mejor no vale Y Y entonces ver no si realmente hay una diferencia utilizando seis hilos o utilizando dos o utilizando uno no y si no pues bueno este se intentó ver la diferencia no e y describir con sus propias palabras en máximo dos líneas Para qué sirve el método join no Y si no le ponemos el método join en el determinante concurrente en el programa o se si no lo usan realmente funciona si realmente se obtiene un resultado Vale entonces eso es lo que
(1:34:14) tienen que hacer se dan cuenta pues no Está pesado Bueno o sea no sé cómo lo vean no se ve pesado no Ah qué bueno sí O sea así como que vayan calentando motores no vayan viendo si realmente funciona si es una mentira no ni siquiera pude paralelizar este Hay algún formato para entregarla lo que les pido nada más es que entreguen en un PDF eh las respuestas de los ejercicios no O sea como la de la uno la de la dos la de la tres eh De ahí es hasta las 5 y así O sea todo lo que pida que yo les pida algo contestarlo en el PDF no O
(1:34:56) sea luego lo que no requiere Bueno lo que no se no se requiera que que lo implementen No pero lo que sí este me añado una descripción de los programas que entregan no O sea como de bueno eh Ajá o sea los programas no sea los programas no los peguen en el PDF Este pero sí por ejemplo en el ejercicio en la pregunta cuatro bueno en aquí en el em cu pues me dicen no este se anexa el programa no sé determinante concurrente rona jaava Este programa lo que hace es tal Y tal Y este o sea como una descripción breve no O sea
(1:35:40) simplemente lo que hacemos Es dividir el trabajo en seis hilos y ya está Vale o sea como de forma breve pero que sí me digan cómo se llama la clase o sea para que ver yo que tengo que buscar no rápido que se haga rápido y también qué hace Bueno ahorita es como muy sencillo No este lo que hacen los programas es una cosa de nada pero sí Al rato sí siempre voy a ocupar que me digan Qué hacen sus programas para tener una idea no de cómo los diseñaron qué estaban pensando e y eso va en el PDF o sea nada más una breve descripción no cómo se llama Y qué
(1:36:13) hace y en los programas junto con el PDF Todo debe ir en un zip Okay eh Y este es muy importante no utilizar ya 21 ahorita no debe haber problema no no hay nada duplicated este como que que este que cambie no a la siguiente versión según yo pero este si la idea es que queden bien oa que Mejor usa en 21 se puede cambiar muy fácil ahí en el editor que ustedes escojan y ya está Ah bueno el tiempo de elaboración este les puse que pues yo creo O sea si no tienen instalado Ya yasí pues y con calmita no platicar con su equipo leer
(1:36:59) esto yo le hago como una una hora y media no O sea no es mucho por eso les doy o sea les doy tiempo pero como para que se organicen con sus tareas no con su equipo Quién la quiera entregar antes no hay problema y si no el otro el siguiente jueves no sé O sea si tienen algún problemilla me escriben no sea sobre todo en esas dos horas Este voy a estar como bien al pendiente pero en realidad me pueden escribir en cualquier momento vale este si no se tien algún problema o tiene alguna duda no de los programas y listo
(1:37:33) vale bueno y aquí está este las referencias es un video muy bonito de un Ruso hablando inglés que no se le entiende mucho pero que te platica todo lo de la Java virtual Machine está como actual Está interesante pero si en realidad les digo no ocupamos todo Okay entonces sería todo Tienen alguna duda todo bien vale Ah sí Mira sí la grabé es que no lo veía desde acá muy bien todo bien entonces bueno Nos este pues este me escriben si tien algún problema si no el siguiente jueves no me comparten su pantalla este por discord por ejemplo
(1:38:34) podría ser ahí están los canales o así aunque les digo como que creo que tal vez en esta no hay como muchos problemas no Bueno yo espero Si no pues estamos Estoy al pendiente Vale entonces Bueno nos vemos mañana en la clase de teoría que tengan una bonita tarde Bye Nos vemos bye recording Stop
