(6) 2024 10 09 10 04 24 - YouTube
https://www.youtube.com/watch?v=8TxoOsO2dVc

Transcript:
(00:08) domingo tenemos una duda en el seis Ajá Cuál es la duda este Félix s Melisa sí se debe cumplir que sea un registro regular Ajá pero o sea si te das cuenta al pedir que no se cumpla la iniz habilidad no se cumple o sea se cumple que es un registro regular no ajas que no sea consistente la
(01:14) inactividad Exacto Es que mira ve la la [Música] este la Bueno pues [Música] manoto no después no entonces este ser sí Mira por ejemplo qué tenemos eh un registro regular Simplemente te dice que si te traslap que si una escritura se traslapa con una lectura entonces regas un valor viejo o un valor nuevo no entonces este por ejemplo bueno es que ahí s ahora sí que de cada quien Pero por ejemplo no algo que no es regular pues simplemente sería
(02:21) este por ejemplo sería este eh gr eh este este escribe uno este escribe dos este Lee dos y este lee un No eso ya nos esto ya por ejemplo ya con esto Esto es un registro regular dice es en clase vimos un ejemplo de una cola que no era consider en actividad pero ya no cumplía con la especificación de una cola Ajá sí sí sí o se se supone que sí O sea está es correcto Melisa cuando eh Es que a ver hágame cuenta que estas tres es que sí es distinto no un registro regular pues y los atómicos y los seguros solo están definidos para
(03:23) registros pero en general las condiciones de corrección como lz habilidad consistencia la inactividad con secuencial es están definidas en que este transformemos una ejecución concurrente a una ejecución secuencial o sea en general no O sea no no están definidas para registros nada más secuencial entonces simplemente cambia aquí la transformación no Y esta ejecución secuencial si analizas no si es correcta con respecto a la especificación secuencial del objeto no entonces pues sí O sea la realidad es que esta es la
(04:07) transformación no entonces cambia nada más es esta dependiendo si es linealiza o si es este consistente en la inactividad o secuencialmente consistente cambia no entonces la realidad es que esta especificación secuencial Debería ser o sea este la ejecución que obtenemos Debería ser correcta con respecto a la especificación secuencial para que se cumpliera Line realizaba este bu estas otras dos no Entonces si tiene sentido no O sea que no encuentres una forma en la que siguiendo la regla de la consistencia de la inactividad pues sea
(04:44) correcta con respecto al especificación secuencial no entonces este por ejemplo este registro No ya con esto Este es un registro regular y además no es linealiza no O sea ya con esto no no podemos encontrar puntos en donde esto tenga sentido O sea ya se cumple esto y se cumple Esto entonces nada más tendrían que pensar cómo promover la consistencia en la inactividad no entonces este em y aquí por ejemplo metemos un periodo de inactividad Y entonces este lo que nos dicen los registros regulares es que si algo se traslapa con
(05:35) otra cosa no este Eh bueno perdón si un se traslapa con un no algo no un traslapa con un entonces este podemos regresar un valor viejo no O sea bueno Si regresa un valor viejo entonces aquí podríamos jugar ya con los rits no por ejemplo que tendrían que regresar estos rits para que no podamos encontrar Eh pues una ejecución no no sé poner otro gr aquí no por ejemplo Ajá sí O sea este por ejemplo que este regresara no sé cu no y este regresar a no Senda regar Pero bueno sea como que a mí me suena que podría ir por ahí o
(06:33) sea un valor viejo no que [Música] no pero no se pueda porque tenemos un periodo de inactividad es como la idea los registros regulares pueden no ser single writer Ajá Exacto sí sí sí sí sí O sea aquí no les no les puse no este eh como alguna em este especificación no entonces pueden ser si quieren ustedes multier multiwriter en este caso pues yo solo estoy considerando un registro que puede
(07:37) ser escrito por muchos porque aquí tenemos Alo A B y C y leído por varios también Ajá dice pero si Leo uno dos no rompería el caso en que no puede un valor en que no puede leer un valor ya escrito Cómo cómo que no puedes leer un valor ya escrito Ajá Ah ya ya te referías Ajá así como Pero bueno en ese caso para los atómicos no Sí o sea si Leo uno o dos Pues sí podría leer un dos no O sea si si este o sea puede leer valores viejos no sí sí sí esa así no no no pasa nada que lea un valor viejo porque en realidad acá se escribió uno y acá se
(08:32) escribió dos no vale o a qué te refieres Víctor porque sí O sea sí podría leer un dos porque ya están escritos aquí este y de las seis bueno Félix me había dicho que tenía un una duda con la seis Esa es la seis Sí verdad Creo que era la propiedad dos también decía que para los regulares en caso de la en la presentación dice dos no en el caso Ajá sí sí sí sí O sea pero por ejemplo Sí o sea en este caso ponle no que regrese dos porque este realmente sucedió antes No pero estos dos sucedieron al mismo tiempo
(09:40) no entonces aquí es donde ya no se cumple porque esto nos dice que todas las operaciones que están acá o sea por ejemplo estas dos este puede leer este cuatro no y este puede leer dos porque pues estas dos son concurrentes no en este caso o sea aquí aquí se esa propiedad No porque o sea lo que si no podríamos leer sería uno para que siguiera siendo un registro regular pero dos si podemos leerlo Porque estos dos son concurrentes no estos dos son concurrentes Entonces si se dan cuenta aquí Bueno las Pero bueno sea estas estas todas
(10:22) estas operaciones que están antes no del periodo de inactividad se tienen que ordenar antes y esas se tienen que ordenar después pues entonces aquí ya no se cumple La Constancia en la inactividad vale como que sí lo ven en consistente en la actividad para que suceda gide Ajá sí Exacto pero por ejemplo sucede grde 4 antes que grde 2 pero no podemos Ordenar el grade 2 Después del R 4 Ya viste porque tenemos un periodo de inactividad no O sea ya con eso no se cumple más o menos lo ven Es que es que como siento que ya está la respuesta aquí ent como
(11:02) que Bueno al menos que argumenten no Ajá s entonces por eso ya sí ya lo vieron yí creo que ya ya les se los di pero sí se ve que no se pueden reordenar de manera coherente Ajá exacto no porque tenemos un periodo de inactividad entonces ocupamos que el gr 2 pues este por ejemplo que el gr 4 queda al final no y luego va cu y luego Tendría que ir 4 pero no podemos ordenarlo acá porque tenemos periodo de inactividad Ya entonces eso sería vieron pero pues ya casi que está la respuesta no Sí o sea expliquen vale para que
(11:48) también o sea sirve que ustedes se expliquen a sí mismos Y sirve que nosotras que les estamos calificando pues también no O sea si no entendemos Como así este menos leyéndolo ya deos Ah mira sí tiene sentido nos ahorran calificar también también les digo no se dan cuenta si realmente están correctos o hicieron algo no este algo raro Vale entonces este sí quedó grabado entonces ahí ahí lo ven Vale entonces nos habíamos quedado en en este objeto que es el de asignación múltiple que es el al del Snapchat atómico Por
(12:31) qué Porque ahora en vez de leer de forma atómica como en el snapshot este Lee en registros no de forma atómica de forma atómica Pues ahora decimos escribe no escribe en registros de forma atómica es lo único que cambia entonces este bueno pequeño detalle no este eso es lo que cambia si es bastante y aquí tenemos un objeto de 2n dos Perdón dos dos TR no asignación entonces la idea de este registro es que tenemos este bueno Esta es una implementación para dos hilos no Entonces digamos que tenemos este m Cuáles son en elementos en
(13:27) valores mm Bueno voy a explicar si ve eso tenemos dos hilos no entonces hgan de cuenta que tenemos tres tres registros no ahí se cumple tres registros Y tenemos dos hilos Entonces inicialmente el arreglo digamos que todo va a estar inicializado como en algo en init no O sea dependiendo de lo que tengamos ya para que este como esto quede pues vamos a suponer que inicialmente todos están en cero no eh todos los registros entonces hagan de cuenta que tenemos un arreglito así tenemos tres registros tenemos el C el un Y el dos no entonces
(14:17) e La idea es que eh este se va a asignar a este el valor b y el valor B1 en el registro i0 y en el registro i1 no por ejemplo el hilo a No él va a ser un assign Bueno en realidad la entrada no de lo que vas a escribir pues es como el parámetro de entrada de assign Vale entonces assign pues no sé este el hilo a él quisiera asignar los valores este él quiere uno no él quiere el valor uno y uno en el registro c y un no y el hilo B pues él dice yo quiero asignar los valores e no sé el que del valor dos en el registro un y dos vale Entonces digamos
(15:15) que es como que Ah pues yo quiero escribir aquí y qué quiero escribir Yo quiero escribir los unos no Y me dice acá yo quiero escribir estos dos y él quiere escribir estos valores dos y dos como que es así Vale entonces este es la idea simplemente o sea como que es una escritura y pues lo dice atómica pero este eh aquí está representado en sincronize vale o sea como que pues nada más es para representación pero pues la idea es que sea atómica o sea eh ahorita van a ver no Cuál es la la pregunta Y pues simplemente leer Pues leemos el el
(15:56) el registro que sea no O sea pues a puede leer lo que quiera no puede leer el registro cero o puede leer el registro no sé el uno no o el dos cualquiera de los tres es la idea de este objeto entonces e eh este en el libro Está interesante es que ya desde aquí todo es así de imposibilidades es que como les digo que es la computabilidad en el mundo de memoria compartida pues vemos así puras imposibilidades no O se así como en su clase de complejidad También acá así entonces este ya aquí nos dicen es imposible crear un implementación weight free para
(16:38) un objeto de nn asignación no a partir de registros atómicos entonces eh Y ya la prueba sería prueba que esto puede resolver el consenso para dos hilos entonces e o sea cómo cómo cómo está esta lógica pues miren como los registros atómicos tienen un número de consenso igual a uno y este y pues aquí tenemos no sea cómo quisiéramos que se viera el objeto o sea pero nos gustaría que no fuera bloqueante no que no fuera bloqueante pero pues este digamos que para hacerlo no bloqueante no para construir este objeto no bloqueante la pregunta es
(17:37) podemos solo usar Eh pues por ejemplo ya en la práctica No volátil no O sea o o registros atómicos que es equivalente es la pregunta que nos hacemos no y ya aquí nos dicen de hecho es un teorema y no podemos hacerlo y la la demostración es que vamos a decir por qué Porque los registros los objetos de asignación múltiple en realidad tienen un número de consenso número de consenso mayor no que pues es de dos aquí nos dicen no ent si podemos resolver el consenso para dos hilos con un registro de asignación múltiple como el que está
(18:22) aquí este este de aquí es lo que nos dicen si lo podemos resolver entonces quiere decir que no podemos usar solo registros atómicos vale nos pasa como las colas como las colas resuelven el consenso para dos hilos pues no podemos implementarlas de forma no bloqueante O sea sin usar cantados con solo registros atómicos y entonces este solamente habría que demostrar que es que pues existe un protocolo de consenso que para dos hilos e y Bueno de hecho ustedes como ya vimos en el capítulo este de en el anterior en
(19:01) el cuatro la presentación cuatro vimos cómo hacemos Snap snapchats atómicos con solo registros no registros atómicos no ocupamos nada más no ocupamos ahí primitivas o algo así más grande no O sea solo puro registro atómico para hacer snapshots atómicos Eso sí podemos hacerlo pero vamos a ver que pues no podemos hacer lo al revés no O sea podemos leer atómicamente varios registros pero no podemos escribir únicamente varios registros Entonces cómo funciona este protocolo de consenso este La idea es que digamos que el protocolo va así O
(19:40) sea otra vez no tenemos otro protocolo es este este de aquí Entonces inicialmente tenemos e un un este un objeto assign 2 TR como este de acá que vimos pues simplemente son estos aquí como se ve vale estos tres registros no Entonces los registros así el registro c el un Y el dos Entonces inicialmente todos están inicializados en nul vale o sea menos un inicialmente todos en os1 no entonces en la línea cuatro se ejecuta este método de site no que es este este método que todos los objetos de consenso deben tener y lo primerito que se hace pues es
(20:25) proponer el valor no Además de Además del registro de los objetos assign o sea del objeto assign que es este de aquí pues tenemos un arreglo propose no Entonces por ejemplo el hilo a quiere que se decida no sé el hilo a quisiera cero y el hilo B Pues el quisiera uno no este porque pues estamos otra vez en el protocolo binario entonces a quiere cer y b quiere uno y este entonces ahora sí se van a enfrentar no toman sus ids revisan el ID del otro y en la línea nu9 el hilo a va a asignar el Este pero ya vieron como que cómo es aquí no O sea
(21:06) tomas tu ID y en ese escribes Entonces vas a este escribir el valor digamos de tu ID no se por ejemplo a pues va a escribir así yo escribo mi d no y dónde lo va a escribir en Por ejemplo si a tiene si el hilo a tiene el ID cer no el ID es cer entonces va a escribir en el cer y en el un Vale entonces así escribe digamos que a pues va a escribir en el en los registros 0 y un va a escribir su valor y luego en los registros este y luego B como el hilo B tiene supongamos no que aquí todo está en módulo Entonces el H B tiene el ID un
(21:57) supongamos Entonces ve en dónde escribiría Pues en el registro este un y dos no vi o sea es distinto Entonces el hilo a pues hace assign su ID no que es c0 y escribe en los registros 0 y un Este es el valor y el hilo B va a decir Ah pues yo hago una en mi registro no y yo escribo Ah bueno sea lo que mide y escribo yo en el uno y en el dos no y este es el valor los valores y en donde va a escribir Entonces digamos que la línea nu pues es la decisiva no van van a los dos a luchar no O sea como en la que para en
(22:45) la que Pues será quien des encle primero gana y aquí es quien escriba Primero este gana entonces eh hagan de cuenta que aquí van a revisar si este sea entonces por ejemplo así se vería entonces y al final van a revisar el hilo a va a revisar el 1 + 2 módulo 3 no O sea que el hilo a revisa hilo a Bueno sí voy a ponerlo aquí a revisa este y no revisa el el otro y el hilo B en este caso revisaría este y lo ve revisa este no este es od oder Entonces oder es este lee el el módulo no O sea digamos que la idea es
(23:50) que leas el anterior no es Vas a leer el que tú no escribes el otro que tú no escribes no entonces Ajá sí Exacto sí Víctor si revisan el que no escribieron simplemente Entonces ya con eso se dan una idea Por ejemplo caso uno en este caso uno si si solamente ha este si ha revisa no que el el registro de b y ve que este pues eh Pues no ve no escribió no entonces aquí va a revisar si od es igual a nul no O sea pues como en este caso oder es igual a nul o o oder este es es igual a a este al al de medio no entonces este quiere decir que B
(24:41) escribió al final no Entonces digamos que aquí el hilo a va a decir no revisa y va a decir si si oder es nul pues entonces B no escribió y entonces yo gané No yo gané o también podría ser si este si si oder es eh igual al de en medio pues me consta que B me me sobre escribió porque yo ya escribí no O sea quiere decir que B sobre escribió lo que yo escribí entonces me consta que B escribió después no que yo bueno que yo yo siendo a vale Y entonces a dice pues yo gané no y así entonces si no se cumple esto pues quiere decir que este que yo
(25:40) escribí al final no Y entonces Eh pues yo perdí entonces voy a decidir lo que B decidió y así Entonces nos ponemos de acuerdo Eh entonces es el caso el caso uno pues es que a va solo no Ah pues deci di Ah pues mira yo gané porque que B este ni escribió no el caso dos a a dice este yo gané porque B me sobre escribió a mí no porque ve este too el valor que yo había escrito primero entonces quiere decir que yo escribí primero y gano no y en el caso tres Pues sería que que este que más bien a sobre escribió a b no en este
(26:22) del medio y entonces pues ni modo yo perdí No Entonces digamos que este es como eh a gana en este también a gana y en este a pierde no Y entonces vegano este y así así funciona este protocolo no Entonces qué quiere decir esto pues quiere decir que Ah miren aquí lo tenía para explicarlo bueno esto esto implica que que escribir o sea bueno no así ya en resumen quiere decir que que este pues si es un protocolo si es un protocolo proto weight free no O sea no bloqueante para dos hilos con un objeto este este de asignación múltiple no Bueno pues
(27:21) ign este dos TR no de dos registros Perdón tres registros dos hilos y no así así se este son éramos dos hilos dos valores y tres registros no en este caso Entonces como si existe un protocolo W fre para do hilos quiere decir que un un objeto assign no dos TR quiere decir que resuelve el consenso para dos hilos no es lo es lo que nos quiere decir esto Entonces ya al final decimos bueno Esto implica que la pregunta no O sea este La pregunta es Oye podemos implementar este objeto de forma no bloqueante O sea sin usar
(28:13) synchronized lo podemos implementar de forma este no bloqueante con puro registro atómico y La respuesta es no se puede no este La respuesta es Eh no podemos no implementarlo no bueno de forma de forma No bloqueante porque es tiene un número de consenso igual a dos y los registros Ah bueno con registros no atómicos Porque esos tien el número de consenso igual a uno entonces necesitamos o pues objetos que tengan al menos un número de consenso igual a dos ocupamos o una kiwi eh Ay Bueno una que Ah una kiwi una que este pues podremos también
(29:14) usar un testan set y vieron o se aquí ya O sea como que no se este cambia un poco No este lo que podemos hacer como que tenemos ahí ya la eh o sea ya con est poder Pues nosotros conocemos ya un buen de primitivas y decimos No pues ocupamos algo más poderoso no Para qué me estoy dando de topes con registros atómicos no se va a poder y bueno entonces esto implica que sí que que escribir escribir de forma atómica en registros pues requiere más poder en el mundo concurrente de memoria compartida que simplemente leer eso eso implica no
(29:57) y qué otras implica iones tiene tiene ustedes creen O sea qué más o sea Qué más Este como o sea analizando esto no como qué otras implicaciones ven ustedes Bueno creo que ya este lo dije este pero ay no este Pero bueno ya ya lo había dicho acá No pero este pues sí no O sea uno eh por ejemplo no bueno igual si se les Ocurre algo pues lo comentan Vale entonces este podría ser que este pues uno no no no todo se puede resolver con solo volátil no que Pues en realidad qué podemos resolver con solo volátil pues muy poquitas cosas ya se dieron cuenta no O
(30:56) sea ni siquiera un contador podemos hacer este y que entonces pues ocupamos esta paquetería no ocupamos atomic y más preciso operaciones como getan increment no getan at este getan set getan set Hay un montón No pero bueno o sea si se dan cuenta este yo solo les he dicho que hay test set y getan increment tiene número de de consenso igual a dos no Pero bueno vamos a ver este O sea qué qué qué este Cómo cómo también está esa jerarquía entre ellas no porque también hay jerarquía entre estas de la paquetería atómica Entonces allá vamos vale
(31:45) eh 10 36 está perfect Bueno cómo van s lo cacharon no sé si vieron el el todo bien bueno si no me me preguntan no entonces más o menos seguro eso vale vale vale Sí es que es mucho es como teoría no sient pero les sirve un montón siento o sea ya este ya cuando se ponen a programar de forma concurrente pues ya no para queé ando usando volátil No ya mejor o sea realmente ocupo otra cosa no con esto no voy a poder e y así este o sea siento que ayuda un montón te da una perspectiva y sea el lenguaje que quieras es lo mismo o seaa Pues sí no
(32:34) este y es como fácil porque estamos viendo objetos y ya va est todo orientado a objetos no pero pues si se meten a cualquiera Pues también no les dicen implementa esto baj sí pero dame mis primitivas no este o a ver qué me garantiza este sistema hay atomicidad no hay pues o sea cómo lo solucionan puro candadito qué pasa no entonces Este sí O sea te da una perspectiva siento para que te avientes a cualquier lenguaje Eh entonces bueno tenemos los objetos en la teoría les conocen como los ritm deif Pero bueno también en la práctica
(33:16) pues este e pues no alias las primitivas o sea en el libro está así no e [Música] este las primitivas las las operaciones de sincronización noes sincronización también les llaman entonces Bueno vamos a considerar que o sea estamos hablando de objetos porque vamos a ver que todos todas estas primitivas se ven de esta forma vale o sea todas todas las operaciones primitivas se ven así así no este tienes la la sea pues como o sea los los es interesante no en realidad los los este modelan como objetos no ent tenemos una clase no O
(34:12) sea podemos crear objetos de esta clase Entonces todos van a tener un atributo no en este caso es entero pero pues hay quien va a tener dependiendo No ya vieron en Java pues puedes tener atómicos buanos o atómicas este referencias atómicas o atómic cas enteras este Hay un montón No entonces todas tienen las y y ya si vemos así un insight no O sea dentro de de este de cada este operación no de in vamos a ver que en todas pues se va a leer el valor viejo algo se va a hacer con el valor nuevo no se va a cambiar y luego
(35:12) vamos a regresar otra vez al valor viejo y es muy importante notar que syncron pues solamente lo ponemos aquí pero como como representación porque como recordamos o sea n más es como representación aquí este para para analizar pero en realidad pues sabemos que todas estas primitivas porque en realidad no sea esas primitivas viven en el en el en el viven en el hardware no no en el sofware no no ocupamos sincronize para hacerlas ya ya están hechas No ya están en nuestros procesadores este Pero bueno nada más aquí lo ponemos así para ver justo que
(36:01) hay dentro de cada una entonces este lo que va a cambiar vamos a ver qué va a hacer esta esta funcioncumple [Música] aquí ya no Bueno de hecho si analizamos pues r se puede expresar como un objeto de este estilo r que simplemente qué haría pues la función momol no esta de aquí que está aquí simplemente consiste en regresar el mismo no sea cómo sería una lectura este o sea si si utilizamos esta misma forma pues simplemente sería No pues en Last value guarda el valor no escrito y luego con el valor escrito no le hagas nada no O sea aquí no haas
(37:00) nada nada y regresa el valor viejo no entonces así como que sería un Perdón un un rit no Entonces si se dan cuenta esto es como una función identidad este entras con un valor y regresas el mismo no y aquí pues en realidad lo que haces es que regresas el mismito valor no haces nada es una función identidad el el un no una función identidad y ya luego el get set por ejemplo cómo sería si lo vemos aquí sería igual no leemos el valor viejo y al valor nuevo o sea como o sea modificamos value este ahí pero como lo modificamos Pues bueno vamos a cambiar
(37:54) no por el valor de entrada ent Entonces cómo cómo funciona o sea cuál es la función de que representa getan set pues es una función constante No este lo que haces es que vas a o sea vas a Bueno aquí creo que está puesto al repes pero s o sea bueno La idea es que cambias este el valor por el mismo no Entonces por ejemplo aquí este pues es V no O se considerando no que Este es este es V mejor así no entonces escribe lo que se escribe Pues es este value no Bueno voy a ponerlo así value ig a V no entonces lo que hace
(38:47) simplemente es cambiar el valor por el que tú quieras ya lo vimos en los en los spinlock no el get set pues a veces llegas tú con true este o en los lh lock no ahí lo que haces es cambiar la referencia no este set este referencia a un nodo no también cambiábamos de estar en N pues la cambias la referencia y así ent es lo que hace getan y lo interesante es que se ve como una función constante no se la entrada pues es una y siempre va a salir Lo que o sea el valor anterior eh Ah bueno y muy importante siempre regresas el valor
(39:30) anterior O sea tú lo modificas pero regresas el anterior así get Z luego getan increment Pues aquí también no este Bueno aquí es es Por qué le puse Aquí sería V este Bueno más bien sería las value Last value no entonces este Last value se mete aquí y simplemente se agrega uno y que tú regresas el valor viejo no regresas el viejo y este y modificas O sea ya si el contador estaba en uno pues tú regresas este tú lo aumentas a a dos y tú regresas el viejo no así value y el value no el value actual que ya se queda ahí y la función sería simplemente
(40:34) este entras con x no Y regresas x + 1 y así entonces hay hay distintos No ya de ahí vemos que empieza pues simplemente a cambiar Como por ejemplo podría ser también existe getan simplemente get lo que dice es es este también aquí pues sería las a Disculpen no fje aquí entonces lo que haces pues es este pasarle las Val y pasarle a no entonces este esta función simplemente es x no Y regresas x má a y así no O sea como que se pueden Representar en funcioncumple simplemente es la más poderosa y esta sí cambia un poquito no
(41:31) tenemos un valor esperado un valor a actualizar Entonces si el valor este aquí cambia un poquito la función No si el valor es el esperado entonces actualízalo y regresa verdadero y si no no hagas nada no Realmente si no no modificas nada entonces la función se ve de esta forma no tenemos expected no O sea el expected value y el upd no tenemos esos valores y este y y va a ser igualito No si x ya es igual a al valor esperado no y si no pues va va o sea bueno no si sí no este es igual no no modificamos y si no se va a regresar
(42:29) u si no modificamos es la idea no es como que lo único que cambia del mumble porque en realidad en todos simplemente lo que haces pues es tomar el valor viejo hacerle algo y regresas el el el viejo sin hacerle algo o sea todos hacen eso pero con pues es el único que que este que te regresa verdadero o falso y que es capaz de no hacer algo porque en todos los demás siempre se modifica no O sea no no hay como que no se modifique estea siempre sobr escribes entonces Bueno ya lo que nos dicen aquí es que todo registro no trivial tiene un número
(43:14) de consenso de al menos dos y bueno que es no trivial eh simplemente vamos a decir que un registro de o sea deit escribimos es trivial si incluye una función ID no Entonces si se acuerdan rit pues simplemente lo que hace Es que este Pues lee el valor no Y qué hace con ese valor nada y regresa el mismo valor entonces r es una tiene una función identidad entonces quiere decir que pues tiene No tiene un número de consenso de al menos dos No pues sí claro o sea los registros atómicos no sea solamente uno o sea no resuelven el consenso para
(43:54) nadie no y las demás sí en todas existe una función identidad no en get and set pues este nada más era como de F de x y aquí V no O sea Esta es una función constante eh también esta de acá es una función constante no pero no identidad aquí pues hacíamos x eh Y sacábamos x + 1 e bueno esto eh esta s es constante no f x x + a no a es constante entonces este Solamente rit pues tenía f dex = x no O sea no no había más siempre era lo mismo eh entonces este todas tienen al menos todas al menos este un un un número de consenso
(44:52) igual a dos vale o sea todas entonces o sea las que no son r claro no como todas tien un número de consenso igual a dos pues ocupamos a demostrarlo como con un protocolo de consenso para dos hilos Y cómo cómo funciona esto pues simplemente este va así no sea tenemos cualquier registro de de de rmw todos los que vimos acá no O sea imagínense que es este pues no sé un getan set no o un getan at o un getan increment no así cualquiera es cualquiera vale Este Entonces en el método ya de site lo que haces pues es proponer tu valor no
(45:38) tenemos nuestro registro siempre de de propose no Entonces supongamos que que aquí el hilo a él quiere que se siga este un cero y el L quiere uno no entonces ya de aquí tomas tu ID y este simplemente lo que haces es que haces un este modify no sobre el valor del objeto porque recordemos que todos estos objetos pues tienen incluido su value no sea [Música] este ya tien su value no el value esperado entonces por ejemplo supongamos que estamos haciendo un este no sé sabemos que que que V por ejemplo ahí miren Aquí está no V es el
(46:47) valor entonces v v este Bueno si voy a dejarlo ahí y v es el valor inicial no o sea es este de acá ya lo vieron Aquí está entonces dependiendo de lo que sea puede ser lo que sea vale un entero un poliano una referencia a algo okay Entonces supongamos que es este qué les gusta un un buano Vale entonces que solamente es false este e entonces así no si esan pues es false no inicialmente supongamos entonces la idea del Ritmo F right No si si es un bu false pues qué podríamos hacer no esta línea la ocho dejen lo pongo de otro color
(47:48) aquí entonces en esta línea simplemente qué hacemos Eh este al r no get un set Y pues lo queremos cambiar de alguna forma no a true para que ya no O sea para cambiar el valor inicial y decirle el otro que ganamos Entonces es la pregunta no si este en este caso no que sería si em el valor viejo es false entonces gané no Por qué Porque yo fui el primero no fui el primero y si si el valor viejo es true No si es true no entonces
(48:52) perdí y ya elijo no O sea si yo gané pues regreso lo que yo propuse y si yo sé que no gané porque me salió true pues regreso lo del otro y si se dan cuenta es son intercambiables no se aquí se me ocurrió usar este y cambiarlo con get and set pero también podríamos podría hac un un no sé un menos un no O sea no nos quita nada este si es bullan también podría ser si es entero pues por ejemplo que está inicializado en menos un no Y entonces ahora lo cambias con un getan increment y este y tú esperas haber sido
(49:29) el primero en modificar ese getan increment no O sea tú quieres obtener el valor viejo sería menos un pero si alguien ya lo modificó pues vas a obtener cero no y este y son intercambiables qu tan inmen que tan at este todos todos pero aquí ya está la demostración más pesada este miren aquí o sea nos dicen otra vez no eh eh dicen de al menos dos no es muy importante no al menos al menos dos Entonces cómo lo demuestras Aquí está tu protocolo de consenso para cualquiera de estos y esta otra nos dice De hecho tiene un número
(50:12) de consenso Igualito a dos pero solo las que tienen las características de las comon dos entonces bueno Quiénes son las comon dos aquí se define vale Este Entonces bueno todo todas las que tengan funciones ven que me la pasé hablando de funciones no una función constante una función de X + a x + 1 Entonces si se dan cuenta todas las podemos definir así en funcionas hasta compans e entonces me da tiempo entonces bueno tod las definen en en esta no en com dos entonces lo que nos dicen es que si para los valores V No si para todos los
(51:00) valores V tenemos dos funciones en F no tal que estas do funciones se conmutan o se sobreescribe entonces pertenecen a com dos y ahí es okay No pero miren ahí les va este entonces eh Por ejemplo no tenemos eh una función eh que sea get a este set no por ejemplo y supongamos que la idea no es que este e Bueno e por ejemplo fi es una función getan set de de false no y FJ es una función get and set set de fse no y inicialmente pues V es true vale Bueno aquí lo cambié un poco siempre hacemos
(52:07) al revés no siempre es false y lo cambiamos a otro pero bueno aquí es así vale Este nada más lo cambié nada más porque porque sí este para para mostrar Esto entonces eh La idea es que analicemos no si hago un O sea si sucede fi no en este caso y a fi le sucede FJ no sobre V esto por ejemplo si yo hago un getan set no eh este pues va a ser o sea the false a true va hacer este o sea simplemente voy a cambiar este el valor de V por false no es lo único que voy a hacer y luego que va a ser fi pues va a volver a cambiar ese valor no Entonces
(52:55) digamos que al final V pues va a valer false no O sea lo que va a regresar esta función va a ser un false porque el primero ya lo cambio y el segundo simplemente va a volver a escribirlo y va a quedar igual pero si se dan cuenta no importa lo que yo haga primero no si si más bien lo hago al revés no O sea que primero haga yo el I y luego haga el J Pues siempre va a salir false no Entonces esto quiere decir que Siempre sobre escribes no Y entonces se cumple esta parte sea bueno voy a ponerlos así no uno y dos
(53:37) Entonces se cumple la dos no se sobreescribe siempre se sobreescribe no es lo mismo este que yo haga uno que yo haga otro o sea sobre escribo el primero y va a ser de hecho igual a solamente como si hiciera uno no y sobre lo escribo el segundo va a ser igual a que si hiciera el dos no entonces este la razón no este esto es un ejemplo cuando se sobreescribe vale Ahorita les pongo un ejemplo cuando conmutan entonces Déjenme ver este sobreescribe ah s está sobreescribe entonces por ejemplo no este otra vez tenemos otra
(54:24) vez nuestros nuestros amados citos no este nuestro nuestros nodos no nuestros árboles que describen los protocolos de consenso W Freak entonces supongamos que inicialmente tenemos un estado bivalente crítico no Entonces por ejemplo si inicialmente pues tenemos un un este comp Perdón un un volen no en true entonces supongamos que este hace un get un set y lo quiere cambiar a false y también no hace un get set y lo cambia a false entonces este y después Este hace otro getan set no F fd b y otra vez lo quiere cambiar a
(55:11) false Pues resulta que estos dos estados no el valor pues va a ser este Ay per va a ser false no en ambos Entonces estos dos estados como da lo mismo si solamente B Se movió o si se movió a y b da lo mismo y ambos estados son s prima y s prima prima son indistinguibles si existe un hilo c ya vieron este H aquí que va solo y para él dice bueno que de sdo o cero o uno no o sea porque que a estos dos hilos les consta que perdieron no O sea por ejemplo el hilo B dice Ah pues yo fui el primero yo fui el que obtuvo true
(56:08) del getan set no y ya dice Ah yo fui el primero yo fui el que obtuvo true de getan set Y estos dos y Bueno luego ve diría Ah mira yo perdí porque ya yo obtuve false del getan set o el valor Viejo pero luego sé cómo va a a ver si realmente a sucedió antes que que B no como en este caso o solamente sucedió B ya vieron entonces es indistinguible para C quién se movió antes no c dice Se movió antes a no entonces pu se pregunta no este se movió antes a o b no entonces ya está esto estandarizado cuando tenemos un problema en el que o sea bueno una
(56:54) función que sobreescribe sus valores entonces es indistinguible para un hilo saber cómo se sobreescribi quién este Quién escribió primero Dice Félix Bueno si quieren ya este dice dice diel si dos registros regulares en el caso se traslapa con muchos gr solo regresan valores entre esos gides que se traslapan o también con anteriores gres que no se traslapan con anteriores gr también que no se trasladan mm Bueno si quieren hasta aquí la clase y ya Quien tenga la duda se queda vale Este Ah vale vale Bueno entonces empiezo
(57:38) a resolver dudas de tarea pero ya está aquí la clase y ya ni siquiera quedar entonces m por ejemplo Félix s yo hago si tengo yo un gr no este tengo yo un gr dice dice nos vemos by dice que si un un no este se traslapa con muchos gr [Música] no por ejemplo no todos estos son escribe uno escribe dos escribe TR y además hay un hay un valor viejo acá no Great este no sé cco entonces Dice Félix dice también con anteriores gides aunque no se traslapen aj O sea si puede regresar no entre esos valores no
(58:43) también regresa viejos o sea como se traslapa con todos estos digamos que estos de aquí son como los valores nuevos Y esto y este de acá por ejemplo es un valor viejo entonces este este no O sea como de Ah yo que puedo regresar Pues él regresa eh o un valor viejo un valor nuevo no en este caso pues sería un valor nuevo o el viejo no pero bueno también por ejemplo si estos se traslapan no O sea este eh dos no sé Bueno Este es un grade s Pues también ya tenemos una lista de valores viejos no entonces también podría
(59:34) regresar un valor nuevo o un valor viejo uno de los dos no vale sí Entonces sí puede regresar cinco Exacto Sí ajá Sí sí s Sebastián Ajá entonces pero tiene un rit juntito al r jto el r y el r junto regresa a uno de los traslapados este Ajá sí podría ser Sí sí O sea como que exista este este no y decí dices que Este es otro rit no y por ejemplo el r eh Ajá sí O sea este como que cosa podría regresar Pues lo mismo no este podría regresar algo viejo no o algo nuevo pero si te das cuenta este para él él se traslapa con estos
(1:00:29) Entonces estos son sus nuevos no y este es su viejo o se solamente gr un no hay que tener cuidado con eso Entonces digamos que este podría regresar en este caso podría regresar uno e un dos o tres no tres son los nuevos y este es el viejo y este otro Pues sí todos no a y otro podrí regresar cinco Exacto O sea si el primerito poder regresar cinco siete este uno dos o tres no pod regresar lo que quiera y no importa Porque las las lecturas no son atómicas para los registros regulares no sí sí sí incluso podría ser que por ejemplo
(1:01:18) este primerito regrese uno y este Perdón este regrese dos no y este regrese uno sí podría pasar no este si podría pasar Ajá sí porque se traslapan no Ajá ese r podría regresar cinco el primero como este el segundo Ajá este segundo Pues si te das cuenta este no podría regresar cinco Porque aquí suced ya una escritura no O sea digamos que él no se traslapa con el grade 1 Entonces el valor viejo para este re solamente sería grade 1 no no serían todos los demás solamente es grade un Ah bueno Sí Eduardo sí o no tien 5 minutitos
(1:02:22) a ver déjalo de una vez a ver eh dados en prisioneros todos pasan exactamente n veces siendo que el máximo de n veces que todos pasan en el cuadrado Exacto un mismo prisionero puede pasar Bueno eso sí no primero sí un mismo prisionero puede pasar al cuarto de manera consecutiva sí Exacto Sí o sea pasan de forma arbitraria no pasa no no hay un orden Simplemente nos dicen en N cuadrada todos van a pasar al menos n veces no es lo único que nos dicen exacto y luego un prisionero puede saber Cuál es el número de prisioneros que han
(1:02:58) pasado antes digamos que pasan uno al día no no es posible vale o sea la primera pregunta es sí la segunda es sí no pasen de forma arbitraria y la tercera Es que este no pueden saber cuántos pasan en un día o sea no es como que ahy ya en 10 días ya pasamos todos vale eso es y dice Víctor yo tengo una duda en el dos dice eventualmente visitar Puerto es n podemos entender que prisionero visita n veces el cuarto no Ajá sí O sea como bueno eventualmente el cuarto en aj O sea que como dice Eduardo no O sea por n cuadrática todos pasamos al
(1:03:58) menos n veces al cuarto o sea por n cuadrática de veces no vale sí vor Ay Sebastián los exámenes descalificar Isabel Isabel y yo es que este s son buen no Bueno al menos la parte práctica Pues sí me la voy a echar de todos pero igual le ayudo con unos porque s son 40 Ajá sí dice vctor s todos pasan el cuarto de nv sí al menos nv al menos en veces pasan y en orden indistinto O sea arbitrariamente no puede ser que pasen dos veces al cero y luego dos veces al uno y ya no los vuelvan a pasar no y luego pasen este n veces al nueve este
(1:05:04) al lo nueve Ah bueno el prisionero nueve y ya este pues ya pasaron al nueve y ahora van con los demás no o sea es es indistinto el orden en el que nos en el que los pasan vale Bueno creo que Víctor todavía es que no no me da tiempo de contestarte Pero bueno te contesto ya en el discord vale Bueno nos vemos está ya ya todo bien no de dudas Bueno tengo dudas acá Ah vale Vale entonces ya no te contesto acá H creo que nada más el seis verdad Bueno el ejercicio se te lo contesto ah no pero ya también lo resolvimos verdad Bueno nos vemos que tengan buen
(1:06:06) día
