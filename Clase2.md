2024 08 07 10 02 19 - YouTube
https://www.youtube.com/watch?v=xg1eELj46rQ

Transcript:
(00:09) Hola buenos días ah recording in progress
(01:22) Okay este si me escuchan bien verdad sí Ah gracias graci muy bien Bueno ya empecé a grabar bueno entonces esa es la primera clase y ya a partir de todo lo que veos a partir de ahorita pues ya este viene en examen Perdón en examen y en tarea no es la siguiente no se preocupen no son tan difíciles y les dejo tiempo no pero si y ahorita ya empieza lo importante Enton Entonces vamos a ver la intro no el cómputo concurrente y y Bueno creo que siempre lo que nos interesa Por qué este surgió como disciplina y bueno son tres grandes
(02:13) puntos el primero pues es el auge de las redes de computadoras el internet no tal cual un gran ejemplo el segundo es la imposibilidad de disipar el calor en los procesadores Y ese es el interesante vamos a ello y el tercero es de la concurrencia en realidad no es un problema fácil no No es trivial este no es no es como Bueno o sea no sí les ayudan bastante saber de cómputo secuencial O sea la clase que de algoritmos pero no este no es suficiente no hay que además de estudiar el cómputo concurrente Okay entonces la realidad es
(02:53) que eh el o sea esa dificultad del cómputo concurrente viene también de esta intuición de que el razonamiento secuencial es más sencillo y natural no O sea También nosotros en la vida pues diaria no O sea en realidad tenemos un buen de tenemos cinco sentidos no y otros más Depende depende qué referencia tomemos pero por ejemplo al menos nos entran cinco cinco tipos de información no e y estamos al al pendiente sí podemos hacer varias cosas al mismo tiempo pero la realidad es que no sé si queremos resolver tareas al mismo tiempo a la vez
(03:31) que comemos y platicamos pues va a estar difícil no y es lo mismo que sucede en el cómputo concurrente la realidad es que es difícil e poner o resolver una tarea al mismo tiempo cuando lo hacemos al mismo tiempo pasan cosas extrañas no entonces en la vida cotidiana en realidad lo que hacemos Es ordenar estas tareas de acuerdo a pues nuestra disponibilidad de recursos no llámese tiempo atención y nuestras necesidad También es importante y eso mismo hacemos en el computo concurrente e Entonces el Ah bueno el primer punto
(04:16) que que voy a desarrollarn es el desarrollo y el auge de las redes de computadoras entonces bueno ya les comentaba no que que pues un gran ejemplo es el internet y Data por ejemplo del 69 simplemente el internet pues que es una red de máquinas interconectadas No Y ahí se ve como Eh bueno lo que vamos a notar en en cada uno de estos puntos este bueno de de las redes de computadoras es que el El Gran punto no eh El Punto clave de esto es que comparten recursos no eh la concurrencia surge cuando hay algo que hay que
(04:54) compartir no en este caso es un recurso Pues en realidad tanto de tiempo como de espacio no eh Entonces pues no sé porj Tenemos aquí los cablecitos submarinos no y en ese cable submarino pues son enormes son de fibra óptica enorme s superpadres no les entre una cantidad increíble de información pero la realidad es que si nosotros estamos aquí en México y queremos mandar un paquetito de información pues va a encontrar la forma no de salir nosotros creo que tenemos nada más tres puntos entonces imagínense la concurrencia no
(05:26) este todos los paquetitos que quieren comunicarse por ejemplo a Europa pues tienen que salir Por alguno de esos tres puntos no el de baja el de Ay no me acuerdo de este cuál es y el de Yucatán no entonces ahí se hace un cuello de botella hay que compartimos un recurso no entonces suceden cosas extrañas e este y otros ejemplos no Además del internet de esta red enorme enorme pues es la fibra óptica de Telmex No aquí en México si buscan ustedes una foto pues se ve no comoo está toda conectada este Telmex aquí tiene todo el país no
(06:04) eem también es es un recurso que compartimos a veces no sé si se van ustedes a al palacio de los deportes no este en hablando de redes celulares eh si se van al palacio de los deportes y van no sé no sé cuánta gente va all pónganle no sé 300,000 personas no y 300,000 personas cada una con su 4G entonces imagínense que estamos todos ahí este está así el Palacio de los deportes no Palacio V los deportes Entonces tenemos una red de celular no la red celular como la diamos Yo como soy de redes más o menos s no este son hexagonos ahí no entonces
(06:55) imagínense que el Palacio de los deportes en realidad pues lo dan de abarcar como no es un no es tan grande en realidad pues lo van de abarcar unas unas tres este antenas no cada una es una antena entonces imagínense Que aquí hay unos 3000 k de personas y todos con la red 4G 5g no y Todos queremos salir por alguna de estas tres antenitas y todo el mundo está así no alzando el celular no hay señal no hay señal si hay señal o sea todo el mundo tenemos o sea Bueno yo al menos en mi celular y me doy cuenta todos tenemos 4G 5g Pero por qué no sale
(07:35) porque todos estamos atascados no queriendo salir o sea hay un un problema de concurrencia este nuestro paquetito no de mensaje del WhatsApp no va a salir e Entonces ahí es un problema luego por ejemplo las redes de wi-fi No si tú haces una fiesta invitas a 50 personas y a todos les das la clave eh En realidad el WiFi es es curioso solo atiende de a una persona a la vez no y lo que hace el WiFi es que los va turnando si hay cuatro personas este como no todos piden datos Y este o bajan datos al mismo tiempo los va
(08:14) turnando no le que hace elces imagínense si tenemos 20 personas o 50 personas al mismo tiempo no esto ya se atasca no O sea a pesar de que tengamos buena señal no va a salir Lo que queramos mandar no entonces ahí hay otro problema de concurrencia no en realidad lo que se hacen son cuellos de billa este todo tod todo el mundo quiere acceder a un mismo recurso no al mismo tiempo Entonces este pues en realidad les digo No este lo que sucede aquí es la situación de compartir algo y pues en cómputo decimos que es un recurso y pues puede
(08:55) ser de tiempo o de espacio no pero este qué más podría ser Pues sí no de memoria H por ejemplo en la red no de en en una fibra óptica ocupamos espacio ocupamos banda ancha ocupamos también tiempo por ejemplo en el wi-fi no este todos compartimos el mismo punto ocupamos tiempo entonces este el problema surge al compartir eh el segundo punto es muy interesante y es que eh pues es algo así Ahora Así que físico no podemos disipar el calor en los procesadores y á les va no Qué sucede hgan de cuenta que desde los 70s pues tenemos computadoras
(09:45) no real este desde los 50s pero pongan que desde los 70 ya se usaban como a nivel militar alguna que otra empresa tenía su computadora no tenía sus computadoras bueno IBM entonces Eh pues al principio las computadoras eran un cuaren enorme este yo creo que no sé de 5 por 5 Met imagínense no estaba la computadora tenía tantos transistores y y de la cantidad de transistores que la gente podía poner en una sola este computadora era la capacidad de que pues de su velocidad no de que de su velocidad de procesamiento de la
(10:28) entonces eh Pues los ingenieros se dieron cuenta que que entre más este transistores pusieran más rápido se iba a haber no entonces m el que form este era un ingeniero í en Intel bueno con fundador sea muy importante en el 65 estimó que cada dos años Sería posible aumentar duplicar el número de transistores por procesador es decir cada vez los iban a fabricar más pequeños iban a caber más y y este y con ello iban a aumentar su su velocidad entonces e dijeron Pues más más velocidad más transistores y y como cada vez los
(11:12) hacemos más pequeños cada vez nos van a caber más entonces eh Esa es la idea Por ejemplo de duplicarlos no cada 18 meses es es la línea que que está aquí pero por ejemplo en realidad lo que pudieron hacer Pues fue eh Este duplicarlos pero no no cada no cada 18 meses y no es la línea azul mejor se las marco así bueno la línea azul decían es Es en realidad la ley de mur no e se supone que entre más transistores pusieras no no duplicaron cada cada 18 meses o se eso fue demasiado No tampoco avanzaron tan rápido pero sí avanzaron y y duplica
(12:00) este pues no sé aquí en realidad son cada 5 años no por ejemplo que sean un duplicado grande duplicaban cada 5 años por ejemplo y este y si se cumple la ley de m dicen Ah mira o sea duplicamos esto y se supone que esa es la velocidad del procesador y s no se cumple pero sorpresa entre más transistores ponían ya no se empezaba a cumplir sea aquí y se dieron cuenta que entre más pusieran todavía más este iba a estar esta diferencia que la ley de bur no se iba a cumplir y dieron bueno por qué no por qué no se cumple Pues bueno se
(12:41) dieron cuenta que que duplicar los procesadores [Música] este este se dieron cuenta que duplicar los procesadores generar un sobrecalentamiento el típico este como todos están dando no de sí Pues hay este mucha energía se sobrecalienta y entonces dijeron No pues hay que hacer tecnologías para disipar el calor porque este sobrecalentamiento lo que hacía pues afecta tanto la velocidad del procesador pero también la vida no O sea pues podían este valer queso antes no O ni siquiera funcionar Eh entonces pues una posibilidad era
(13:25) pues vamos a hacer enfriadores más buenos no O sea este disipadores de calor y la otra pues y la solución que de hecho hasta el momento sigue es Oigan qué tal que no no utilizamos más transistores no O sea en vez de poner un solo monito a trabajar pues qué tal que usamos ahora más procesadores no entonces e imagínense no que un solo monito pues tiene aquí Este no sé 10 transistores no bueno por decirles así 10 caso vamos a poner 10 cas de transistores entonces eh la pues dijeron No a ver qué tal que en vez de usar 10 en vez de utilizar este 40k
(14:12) no en un solo transistor en un solo procesador Vamos a ponerle 10 cas a cada uno y utilizamos cuatro procesadores en un solo y los ponemos a trabajar no en una mesa aquí no Y esa mesa resulta que es este el bus de datos no Entonces este pues dice nada pues sencillo no e si en vez de utilizar 10 transistores Ah utilizamos eh cuatro procesadores de de 10 cada uno pues dirían Ah pues ya aumenta cuatro veces eso no pero pues ahí pasa algo no ent bueno sea la idea pues era hay que explotar el paralelismo no este en vez
(15:01) de que alguien lea tres libros al mismo tiempo pues le damos un libro a cada quien ya luego nos compartimos y ya está No sí como la idea de un equipo por ejemplo entonces Eh pues la idea era muy bonita e pues eh pero el problema que surgió es que pues en realidad paralelizar no es tan fácil eh Por qué Porque hay costos de comunicación y coordinación y esto cómo nos Afecta no Bueno pues para esto existe la ley de perdón la ley de entonces Bueno les digo la idea era que pues si tenemos un procesador con n cor no o n procesadores por ejemplo no
(15:51) sé si tenemos cuatro pues La idea es que eso vaya cuatro veces más rápido no y pues vieron que no es así que est este costo de comunicar y coordinar nos afectaba bastante entonces bueno la ley de andal justamente nos captura nos dice cuánto realmente se va a poder acelerar una tarea por qué porque hace una relación entre cuánto trabajo puede ser ejecutado de forma secuencial y cuánto de forma paralela es lo que nos dice la ley de la relación entre por ejemplo un problema que sea 100% para Pues en realidad no
(16:30) existe no es es el mundo ideal entonces esa es la fórmula de no es así una formula entonces lo que nos lo que nos da como resultado es la aceleración no por ejemplo lo que les comentaba si utilizamos n = 4 hilos no este Entonces ese será cu veces más rápida no O sea bueno digamos que ese nos da la aceleración se vuelve cuatro veces más rápida este de hacer la tarea es lo que nos dice eso y como lo obtenemos eh digamos que es el tiempo que le toma a un procesador realizar un trabajo versus el tiempo que le toma a n este Ah bueno aquí usen
(17:25) distintamente procesador hilos pero vamos a considerar hilos okay ya ahorita les digo a veces los uso distintamente pero vamos a abordar bien la diferencia no se preocupen nada más es introducir e entonces p es la fracción de trabajo que puede ejecutarse en paralelo y n es el número de hilos colaborando no Entonces por ejemplo acá lo tengo Ah bueno este en realidad 1 men p es el trabajo secuencial no porque es el total entre la fracción que se que se va a hacer en paralelo no entonces lo que no se haga así pues va a
(18:08) ser el trabajo secuencial y esta partecita de acá pues es el trabajo paralelo no lo que se puede hacer en paralelo entre el número paralelo entre el número de hilos no este entonces aquí les va un ejemplo no de cómo utilizamos esta formulita pues consideramos que tenemos este ahora vo utilizar en vez deos o procesadores alumnos okay Entonces tenemos cinco alumnos no y queremos resolver una tarea que tiene cinco ejercicios y al repartirse la tarea Pues es obvio no cada quien nos va a tocar un para que todos trabajemos parejo pero
(18:56) sorpresa uno de los ejercicios resulta que es el el difícil no y este se resuelve en el doble de tiempo que los demás entonces imagínense que están todos contra reloj no y los alumnos quieren saber cuánto les va a llevar realmente hacer todo el trabajo si lo empezamos al mismo tiempo no entonces este todos los ejercicios para como abstraer ya este problema van a valer una unidad de tiempo y el que se realice en el doble le vamos a poner dos no Entonces digamos que que el trabajo que vamos a poder hacer de forma paralela
(19:32) pues va a ser 5 sextos no porque uno no se va a poder hacer o sea solo tenemos cinco personas y uno duda vale el doble Entonces si más o menos cacha no porque son 5co sextos este Son son este cinco ejercicios de los cuales Este sí muy bien me pusieron que sí vale 1 + 1 + 1 + 1 3 4 5 + 2 no entonces son 5co sextos lo que se puede hacer en paralelo y el número de alumnos pues es cinco no entonces ya sustituimos en nuestra formulita y el trabajo que podemos hacer que esa fuerza se va a tener que hacer en secuencial pues va a
(20:17) ser este un sexto no y el trabajo que podemos hacer en paralelo va a ser este Ajá bueno sí que va que va este va a ser en paralelo k hilo no es un sexto y al final quiere decir que la aceleración o sea digamos que esa es la diferencia no vamos a ponerlo aquí escrito para que no digamos que la tarea por bueno hecha por una persona digamos que este A diferencia de por cinco personas se acelera voy a ponerlo acá se acelera en TR no sea es el
(21:25) triple por ejemplo uno pensaría pues si somos C la la hacemos cinco veces más rápida no pero resulta que solo la podemos hacer tres veces más rápida porque una a pesar de que nos dividimos así parejo pero pues una tardó el doble ni modo no este eh Solo la podemos hacer tres veces más rápida Okay entonces lo que nos dice La Ley de entonces este y ya entonces va cambiando si por ejemplo el número de de alumnos es 10 el número de ejercicios es 10 y existe una que se realiza en el doble de tiempo o sea en vez de de aquí
(22:03) est no en vez de hacerla 10 veces más rápida Pues resulta que la vamos a hacer 5.5 veces más rápida no O sea uno diría no bueno ponle más ponle más alumnos este entonces Bueno aquí va un Quiz para que alguien me responda si si queremos más velocidad no O sea si realmente queremos acelerar la tarea más qué nos conv vendras eh Y tenemos dos opciones aumentar el número de alumnos o aumentar el trabajo que se puede paralelizar no el trabajo paralelizado dice zel sí perfecto No sí porque ya vieron que pues si ponemos 10 alumnos ahora y solo una
(22:48) es el doble pero pues la aceleración es apenas la mitad de lo que somos no de los de los que somos Entonces sí sí sí sí y y ahí es donde el problema no O sea qué tarea realmente se puede paralelizar así al punto No sé de que todo es paralelizado no O sea de que sea uno entonces por ejemplo Aquí está No si A cuántos tengo Ah mira aquí está la relación el número de hilos está aquí entonces eh si utilizamos por ejemplo 10 hilos no y solo se puede paralelizar un tercio Pues resulta que tenemos la aceleración Pues solamente es de 1.48 o
(23:29) sea imagínense no si no podemos paralelizar este el algoritmo va a ser nada más punto 43 más rápido No ni siquiera vamos a poderlo llegar al doble muy poquito sí sí dice saas no sube muy poquito este o si es a Por ejemplo si se puede paralelizar un medio Ah pues miren ya casi llegamos a al doble no este dos tercios de o sea de la tarea que se puede par ahí sí no pasamos el 2.
(24:02) 5 y así en realidad realmente la solución paralizamos más no una pregunta si está grabando la clase verdad sí sí sí la puse a grabar Okay entonces si llegamos a 21 2os no este si utilizamos 10 hilos podemos aumentarla este que se vuelva siete veces más rápida de hacer no y pues La idea es que si si es completamente paralelizado realmente se va a cumplir que se aumente si utilizamos 10 hos se aumenta en 10 no Entonces sí O sea la solución No cabe duda paralicemos más okay Pero bueno eh en realidad en no todos los problemas como
(24:52) Les comento son paralelización entonces bueno como cuáles los problemas en redes de computadoras por ejemplo por qué porque tenemos pues entidades por ejemplo este vamos a poner bueno entidades de cómputo pues distribuidas no y qué implica que est distribuidas esto implica que no todos conocen to información no toda la inf entonces pues cómo vamos a paralelizar si yo no sé ni qué me va a responder el otro no si tenemos por ejemplo aquí este Eh así los p to p no de la del cómputo distribuido p un p dos ent cómo nos
(25:52) comunicamos no para para que sea eficiente Bueno lo padre es que existe toda un área se llama de la comunicación para cómputo distribuido muy interesante y justo se enfoca en esto O sea la dificultad pues va radica en Store que es difícil eh paralelizar eficientemente si no conocemos lo de los otros no eh o los empresariales también No si nos dicen o sea como que es difícil paralelizar cuando hay como una incertidumbre porque los empresariales también o sea este no sabemos que nos van a pedir o de qué tamaño son las bases de datos no
(26:32) eh tampoco se pueden paralelizar eh bien y o bueno como tal no en aplicaciones distribuidas o sea las redes como tal o sea es como el generalizado no ahí entran las redes e Pero bueno también vamos a ver un concurrente Bueno o sea no nos vayamos tan lejos por ejemplo en nuestra clase de de algoritmos secuenciales no hay algoritmos por ejemplo como los [Música] de este divide y vencerás no que son muy Pero bueno o sea depende también los algoritmos no O sea no nos vayamos tan lejos cosas así también cosas que hemos
(27:35) visto hay algunas que no son eh los que sí son eh bastante paraliza y hay toda una rama no que se enfoca en cada vez hacerlos más O sea en estudiar Cómo dividir estos algoritmos para que realmente los podamos resolver lo más paralelizado posible pues es no sé los científicos estos que se unen con biología no les doblar el ADN este allá hay unos así muy muy buenos con máquinas multicore muy poderosas que te lo resuelven así no cosas que antes se tardaban un mes Pues ahora lo podemos hacer en un día o resolución de
(28:08) ecuaciones diferenciales el modelado este de sistemas no de no s estimar el tiempo eh también no antes dos meses para obtener algo y ahora dos días bueno generación de fractales este criptografía con Fuerza bruta también si la ponemos a correr en este la paralis amos bien no Y la ponemos a correr con varias máquinas también este Ah bueno y ya este estamos de tiempo Okay entonces la la concurrencia el último punto es que no es trivial van a ver un ejempl yo ahí entonces pues si en la vida cotidiana también no es tral organizar un equipo
(28:54) para resolver una tarea no o sea porque a veces como vemos este yo les dejo una tarea y la primer las primeras dos ej incisos son muy fáciles y los últimos dos son difíciles son cuatro y van a haber dos personas que medio trabajen no este y pues s es un poco Injusto entonces en el cómputo concurrente también suceden cosas así extrañas no O difíciles porque la organización la coordinación siempre es difícil entonces Bueno vamos a ver así un problema más aplicado no O sea ya computadoras que lo comprueba entonces bueno tenemos un
(29:35) procesador multicore no multicore en la parte práctica les voy a enseñar o hablar nada más de la diferencia entre procesador Core hilo y proceso como que bueno Cuál es la diferencia no pero para enfocarnos ahorita más como me tienen que que creer no ahorita que nada más que este que pues sí son distintos pero digamos que para fines de teóricos todo bien No ya en los prácticos Ahí es donde cambia Pero bueno un procesador digamos que lo podemos ver de esta forma Este es un ejemplo de un procesador en donde tiene su Core un cor dos cor TR y Core
(30:24) cu y hagan de cuenta que cada uno de estos cores lo que me lo que lo que ahorita les digo que me tienen que creer es que cada uno de ellos tiene un hilo un hilo Entonces el hilo cuatro el hilo tres el hilo dos y el hilo uno ent cada uno tiene su hilito eh Y Y qué posibilidad hay o sea bueno qué implica que cada uno tenga un hilo bueno que que este que pueden cada hilo puede ejecutar o puede hacer ciclos del procesador al mismo tiempo o sea de forma completamente paralela que los otros cuatro no O sea por ejemplo si el hilo
(31:11) uno quiere leer algo este no tiene que esperarse a que le den tantito ciclos del procesador no O sea lo va a hacer y se puede poner de forma concurrente a erer algo más con el hilo 1 e incluso la misma variable eso es lo que implica como tener cor es tener hilos no sé si se dan cuenta cuando compran su conu no y les dicen este tengo Ay este qué tal está Este chip no Intel no sé cor 5 séptima generación ya te dic No pues tiene es un procesador este de de cuatro núcleos no Y además tienes dos microprocesadores no O sea cada de
(31:58) cuatro núcleos ent es como que Aquí más o menos se tienen que imaginar que cada cada procesador O sea bueno digamos que esteo es solo un procesador Pero puedes tener varios de estos en una sola compu no por eso te luego te dice no pues tiene cuatro procesadores y cada uno tiene cuatro cores no es una super máquina Pero bueno muchas veces no no nada más tienen como de dos cores cuatro cores y solo dos procesadores si te va bien las que podemos digo como comprar la mayoría no sea bueno como acceder que pues es 32 hilos o que 64 ya
(32:32) son muy chidas como para gente que se dedica a renderizar no sé muchas cosas no más o paralelizar no también este entonces Bueno me tienen que creer ahorita que que en cada Core vive un hilito Entonces si tenemos un hilo por cada cor y los hilos pues quieren resolver un tareas en conjunto Y qué quieren resolver en este caso pues van a llevar la cuenta del número de tareas que resuelvan es lo que quieren hacer ahorita entonces cómo vamos a resolver este problema que quieren hacer dice dice sorel concurrente Entonces es como
(33:10) decir que está en paralelo Ajá es Es que es curioso porque el cómputo paralelo Bueno lo voy a ver hasta el final de esta de esta presentación pero el cómputo paralelo es una parte es como entra en el mundo de concurrente Ajá porque di digamos el Paralelo el concurrente es una sub es un subtema el Ah perdón el Paralelo es un subtema de concurrencia así como el distribuido son subtemas de concurrente concurrente engloba todo todo por eso pero por ejemplo cuando alguien nes dice no Yo me dedico al cómputo paralelo hay que
(33:46) entender que se dedica a estudiar Cómo dividir un problema para que quede lo más paralelo no porque el concurrente es más que eso dice es una simulación de paralelo no lo concurrente una simulación pues no no no como tal dig como el Paralelo en realidad entra Este es un subtema de concurrente pero pues alguien que sabe de paralelo sabe como algo muy específico no y no precisamente tiene que saber todo lo de concurrente para saber paralelo y este Aunque nosotros a como en general como producción a todo no pero les digo el Paralelo pues es un
(34:31) pedacito y hay gente que a eso se dedica o sea mucho como que siento que un montón de gente que que hace cómputo científico como de los físicos no que andan así de Ay pues quiero estimar el clima que va a haber en en senado no y se una este una ecuación diferencial Bueno un modelado no conciones diferenciales enormes y se enfocan en para realizar y ya estudian las matemáticas para ver cómo dividimos el problema o sea como que eso es así pero es otro rollo no este ahorita vamos a ver como lo general e okay Bueno entonces para resolver este
(35:13) problema nosotros queremos diseñar un contador un contador de tareas pero pues es un contador tal cual ent como que se imagina No no es muy como que tenemos la idea No pues no va ser muy difícil O sea pues qué nada más este un increment no O sea ponle más más en una variable y ya está no este entonces pues La idea es que los hos eh cada vez que acaben una tarea Pues vayan y la sumen no O se le den como más más ya está eh Pero bueno en este caso pues vamos a utilizar pues no es un contador cualquiera es un contador que va a estar
(35:52) compartido compartido entre entre los hilos entonces así es imagínense que es una representación de la arquitectura no un multicore de cuatro cores este y hay todo un análisis no este de memorias porque cada Core tiene sus cachés y depende Qué tan lejos está el caché qué tan eh qué tan qué tanto nos vamos a tardar en escribir no siempre o sea como Nosotros sabemos no saben de arquitectura de computadoras pues saben que siempre es máy fácil escribir en el en los registros no en los en los registros enseguida y luego en el caché
(36:33) uno y luego en el caché dos y luego hasta la ram siempre Es más pesado escribir hasta la ram y no se diga hasta la ROM No eso es más rollo este o sea más más este te tardas más no eh es más rápido siempre escribir en las memorias más pequeñas y más cercanas entonces Este es un rollo aquí estudiar no lo de concurrente a nivel de estudiar el procesador de cada no eh pero solo esto Solo es este solo les puse esto para que vean no que pues abajo de de de esta abstracción bonita hay más nosotros vamos a usar en todo el curso una
(37:12) abstracción bien bonita como esta no y pues si se dan cuenta es Java no este nos hace que no liemos programamos en alto nivel no nos hace que no lidamos con escribir en o sea imagínense ocuparíamos c no este escribe en el caché un registro uno o sea y Buscar no en en cada la documentación de cada procesador porque de hecho no todos tenemos esta misma arquitectura no habrá quién tenga una más chida y qui y que dependiendo del fabricante tenga más o menos cachés no este Entonces es un rollito no pero para que para unificar el trabajo de de
(37:55) resolver este problema y que todos los podamos resolver no en cada quien en su computadora pues vamos a utilizar la abstracción de Java alto nivel entonces eh nuestro contador pues vamos a crearlo como un objeto y por lo tanto va a vivir en la hiip no de Java que la Hip para nosotros en Java pues va a ser nuestra nuestra memoria compartida no bueno así lo voy a llamar y así lo vamos a denotar Entonces es la memoria compartida y aquí tenemos otra vez nuestros cuatro hilitos y cada hilo ahora en javas se vuelve más
(38:34) fácil ya no tenemos cachés y cosas muy extrañas No ahora tenemos pues nuestras stacks no las stacks de Java que son las memorias locales de cada hilo o sea esta stack del hilo a dice Pero entonces en Qué memoria se pone el contador este nada más les puse aquí porque en realidad para escribir el contador No si utilizamos por ejemplo c Pues aquí si hay que establecer bien en Qué memoria va a ir no por ejemplo lo más común es que se ponga en la l3 en la ram Ajá para que sea accesible por todos porque a veces la l1 cach solo la puede
(39:20) escribir el Core 1 Depende como está El fabricante No pero si lo ponemos aquí al contador pues no no lo van a poder escribir los demás no entonces hay que escribirlo en una memoria compartida que sería la Ram la ram todos la podemos ver entonces lo que sucede abajito sea hasta abajo pues es que cada Core tiene una copia del contador imagínense no voy a poner el contador este así de color morado No aquí pues aquí vive el contador en la ram resulta que cada cada cor tiene una copia él tiene una copia del contador este tiene
(39:57) otra este tiene otra Y este tiene otra no entonces suceden aquí cosas y ya eso es a nivel de computadora hay algoritmos a nivel de caché para que lo que está en la ram viaje a cada caché no con estos algoritmos de a partir de un bus no depende Qué tan lejos quede Entonces ya el hilo uno lo que va a hacer es que va a poder leer en su cach el objeto compartido que está en la ram pero pues esos les digo como que eso es a bajo nivel no sería meternos ahí este a a a revisar bien Cómo está la compu de cada quien no sería como algo así general y
(40:37) ver qué tipo de protocolos de caché hay abajo entonces por eso les digo como que no queda para un primer curso no es como que ya para cuando tienes un algoritmo ya sabes de concurrente y quieres que quede bien eficiente Entonces te metes hasta abajo y ahora sí no este Claro que pues hay gente que se dedica a eso no incluso a hacer protocolos de caché y esas cosas buen nosotros como estamos aprendiendo pues vamos a estar acá arriba Entonces el contador dónde va a vivir en la Java virtual Machine en la Hip no este y
(41:12) tenemos cada hilo va a tener su stack su propio stack es su memoria local entonces sucede acá lo mismo resulta que existe el contador no que vive en la y además cada hilo pues tiene una copia de ese contador no Por ejemplo si leyó value Pues en en temporal pues va a tener una copia de value no este Okay entonces pues S como utilizamos Java e un nivel mayor de abstracción Y es más fácil analizarlo ahorita entonces e cómo vamos a programar pues tenemos una clase de un contador la cual tiene un atributo de value eh se inicializa en un determinado
(42:07) valor este contador vamos a pensar que siempre cero y este tenemos un método para incrementar no get an increment y este y esta operación de value más más Pues en realidad si se dan cuenta es una operación una operación de lectura no operación de lectura este una operación este cómo se llama de la alu no se hacemos Eh bueno este s una operación de lectura y escritura porque en realidad las estamos escribiendo en temporal no esta esta igualdad leemos value y le escribimos en temp y ahora hacemos que value sea igual a temp más un no y ahora
(42:59) sí regresamos no entonces como que se dan cuenta este value más más pues no es en realidad una sola operación son varias no O sea al menos son tres pero creo que aquí van dos no leemos escribimos luego aumentamos y luego regresamos varias operaciones este Bueno eso es importante porque ahorita van a ver qué cosas pasan entonces imagínense que inicialmente V es igual a cero no el contador pues lo inicializador ya saben lo de Java no New Counter el típico deamos va en cero en cero pero se cuenta como una sola operación o se cuenta como
(43:52) las tres se cuenta como las tres y ahorita vamos a ver como que Pues es que así Así es no O sea en Java en realidad pues es una abreviación pero pues en realidad son tres operaciones no y en el mundo secuencial cuando si ponemos a varios hos a contar de forma secuencial no O sea como de Ay cuento uno luego vas tú yo cuento otro o un solo hilito no un solo hilito que vaya contando de uno a 100 no hay problema porque el hilito siempre va a hacer como e temp igual a Val luego Val igual a temp + un temp no y esto lo va ser 100 veces pero siempre
(44:28) en ese mismo orden No pero de forma concurrente Ahí es donde pasan cosas extrañas de forma este compartida no este contador compartido Entonces por ejemplo Esta es una situación no cosas que cosas que pasan eh supongamos que tenemos los hilos uno y dos Entonces vamos a voy a poner imagínense que Esta es una línea de tiempo H son líneas de tiempo de eh los hilos tenemos al hilo a b c y d entonces son líneas de tiempo Okay entonces Esta es Ejecutan get an increment no que es esta cómo se llama el método entonces resulta que que
(45:26) el hilo a y el hacen un get voy a abreviar get increment y aquí este hace otro get entonces resulta que guardando en temp Bueno vamos a hacer los pasitos por ejemplo aquí en voy a ponerlo en rojo aquí lo que hace Es que voy a leer temp no entonces inicialmente temp es igual a cer y resulta que B también le temp al mismo tiempo y dice temp es igual a cer y luego ellos tienen su variable temporal no en su propia stack o eso no lo pueden ver los demás y entonces dicen value también imagínense en realidad
(46:32) aquí tien una value y este aquí aumentan a uno tienen su propia copia de Val también entonces Val es igual a 1 ellos hacen su operación en su propio procesamiento y en su propia memoria entonces Val es igual a 1 Y luego dicen Ahora sí return este bueno miren aquí regresan el regresan el anterior en realidad no pero aquí se disponen Ahora sí a escribir no entonces resulta que este Bueno voy a ponerlo acá vamos a ponerlo az y ahora sí value
(47:42) un compartido No y value un compartido No o sea digamos que ellos hacen se cuenta con sol os hacen leen no la variable guardan en temp su la variable anterior luego aumentan en uno no value de forma local y luego ahora sí se termina por escribir de forma compartida Okay Por qué Porque cada quien hace sus operaciones en su propia stack y luego por fin se reflejan acá pero si se dan cuenta al hacer al ser tres operaciones distintas en realidad ambos leyeron temp o sea guardaron en value en tem el value igual a cero no Entonces como lo hicieron
(48:31) justo al mismo tiempo resulta que al final el valor del contador quedó en uno entonces eh resulta que value pues es uno cuando en realidad hubo dos dos hilos que quisieron registrar una tarea entonces en realidad pues hay dos tareas resueltas no no una y al final el contador quedó como en uno no Entonces más o menos como que cachan porque sucede esta situación porque son tres operaciones no una sola no Entonces es en lo que leo en lo que hago mi operación y en lo que se refleja este que en eso Pues resulta que ambos
(49:14) leímos temp igual a cero Ajá Eso estaría mal entonces no no es un contador no es un buen contador O sea no cuenta no O sea este queremos que registre dos el objetivo es que registre las tareas que todos hemos hecho y este y no sucede no Entonces otro ejemplo eh algo así como más feo no cosas que pueden pasar acá por ejemplo e tenemos tenemos a b c y d no Entonces por ejemplo aquí eh Por ejemplo qué podría pasar no resulta que el hilo a imagínense no que el hilo a hace un quetan incremento luego el hilo d hace
(50:21) otro y luego el hilo c hace otro pero en eso el hilo B este el hilo B el hilo B hace otro y el hilo c resulta que empezó aquí se durmió y terminó acá pero no ver que podría pasar este Bueno voy a piensen que todas son get increment no este voy a ponerle get an increment y é por ejemplo este como regan se dan cuenta no regresan el valor anterior al que leyeron no Entonces digamos que el hilo a pues leyó uno y puso value en un luego el hilo d le yo uno este le yo uno y puso su Val en dos no
(51:27) Y luego el hilo vamos a [Música] ponerlo esir este aquí sería 2 3 disculp entonces haces aquí get increment lo que lees dos el hilo b y pone el V en 3 este Y entonces qué pasa aquí Pues resulta que eh digamos que el hilo a le temp igual a cer no O sea pues es lo que él regresa y resulta que el hilo c como empezó antes en el tiempo porque como recordamos son hilos pueden hacer las cosas al mismo tiempo o sea no hay problema No no tiene que esperar por nada entonces el lo c pues leyó aquí temp y aquí Pues digamos que se
(52:30) durmió este y por fin acá dijo Ah miren value igual a 0 + 1 value es igual a 1 no y por fin acá Se reflejó value compartida Por fin se reflejó acá entonces imagínense que él ya habí este el hilo a había puesto un el hilo d valió en dos el hilo c valió en tres y él como leyó un valor atrasado se durmió y escribió aquí entonces puso un valor viejo no pero bueno al final resulta que el contador termina en v igual a uno entonces hecho per del trabajo de los demás sí y Pero puede pasar esas cosas puede ser que un hono sea muy rápido le
(53:23) un valor viejo y nos arruine a todos no entonces el resultado Debería ser al final quedó el contador en tres no debería quedar en tres este y el problema es que el hilo 3 el hilo c en este caso leyó la leyó value lo guardó en tem y mientras los demás aumentaron hicieron sus cosas pues él se quedó dormido sea es medio lento no porque pues sí En realidad puede pasar que hay los más rápidos más lentos no no no controlamos que sean Exactamente igual de rápidos o exactamente este qué tal que tenía otra tarea no Entonces no no controlamos eso
(54:01) y el hilo 3 pues eh regresó un valor desactualizado de value porque tenía tem como un valor viejo no de tem eso suceden cosas raras y bueno entonces el comportados correcto no no nos funciona pues imagínense Llevamos una cuenta de 10 tareas y resulta que de repente se puede convertir en una porque hay alguien que le di un viejo está feo no pues no no nos funciona e Por eso yo Les comento aquí que este contador no es correcto con respecto a la definición de un contador no O sea van a ver que en el cómputo concurrente
(54:41) casi siempre comparamos objetos que hicimos en el mundo concurrente contra el mundo secuencial no porque pues este es un contador cont concurrente pero decimos Ay pues no no sigue la definición de lo que debe ser un contador secuencial que es la que todos conocemos y alguna forma de arreglar este rror Ah Pues justo es un Quiz no este este es Quiz Si queremos un contador concurrente que sí funcione qué se les ocurre Ah pues sí se dice Luis no usar candados o semáforos Pues sí sí es muy sencillo no hacer el get increment
(55:19) synchronize Ajá Y qué es el sincronize pues es un candado no también José José Camilo dice también no pu es un candado Este Entonces dónde ponemos el candado dice Camilo que pues en en getan increment no Y pues sí podemos utilizar candados y restringimos que exista una parte del código que solo puede ser ejecutado por alguien a la vez okay Entonces dónde ponemos el candado pues justamente en getan in qué puede ser un candadito como dice Camilo No pues aquí le ponemos sincronize y arreglado ya no pasan cosas raras entonces así por eso puse la
(56:09) imagen no es como tener una puertita con llave y nada más puede pasar el procesador que tenga la llavecita así tal cual Así se ve un candado ponerle a una puerta llave y Solamente entra uno a la vez Entonces ahora Sí ya este se se arregla esto ya Cómo se vería e el primer y lo hace un getan increment y lo termino y ya luego el segundo suponiendo no que es medio lento y se queda dormido este lo toma y hace lo que tiene que hacer eh Ajá dice zel sí sincron es una palabra reservada sí es la primerita la vamos a ver en la segunda clase este
(56:57) de de la pero si es un candado tal cual este ya la siguiente clase también Bueno sigi este tema de teoría también es este es este candados o sea vamos a ver candados y sincron simplemente es una palabra reservada que ya tiene Java hagan de cuenta que llva cada objeto tiene la posibilidad de convertirse en candado entonces por eso se les puede asignar a los métodos como tal como que ya va es muy es muy amable no pero bueno este entonces imagínense nada más para terminar no que que este que abre el hilo dos Pues toma el
(57:34) candado para aumentar el contador pero como que medio se queda dormido no y hay otros procesadores otros Perdón otros hilos que quieren tomar el candado para aumentar y tienen que esperar a que hasta que termine para poder hacerlo y mientras van a estar aquí esperando no van a pasar cosas raras Pero va a ser medio Lento no y en realidad este comportamiento si se dan cuenta al poner un ahí parece secuencial o sea no es como al final vamos a ir en secuencia no solamente el que tenga el cado va a poder ejecutar hasta que termine pues estos
(58:06) van a poder ejecutar algo no y el que lo gane Pero bueno este hasta aquí nos quedamos y ya si ya son las 11 sí verdad si ya son las 11 mañana haía entonces los veo mañana a todos Va Sí sí con Isabel por favor Okay entonces nos vemos a también Sí sí mañana s hay laboratorio Este pero si no hay cosas que modifiquen valores los hil los podrían estar haciendo otras cosas Ah sí s pueden estar haciendo otras cosas depende del tipo de candado que utilices y este Pero bueno eso ya lo vemos despues si hay ha la mañana les
(58:59) comparto las indicaciones va a ser muy rápido pero s es al menos para que les explique no de cómo vamos a trabajar de este pues qué van a utilizar Cómo van a ser sus prácticas o sea como rápido no va a ser no va a durar las dos horas no pero sí al menos una media hora 40 minutos y no sería más fácil la implementación inicial y ya compartir los valores y agarrar el valor más grande Ah sí pero por ejemplo cómo te pones de acuerdo no O sea cómo sabes que todos ven los mismos valores Sí eso es un problema interesante Sí se también se grabarán
(59:39) los laboratorios este Bueno entonces nos vemos no escuché bien hay ayudantía mañana sí sí hay sí hay ayudantía y hay laboratorio Okay entonces nos vemos mañana Bye que tengan buen día an
