2024 08 30 10 02 41 - YouTube
https://www.youtube.com/watch?v=5DHXbQHSXmw

Transcript:
(00:00) e recording in progress Okay la clase anterior vimos Bueno al final terminamos con [Música]
(01:05) este con que Bueno les comenté algo así muy rápido de la aniz habilidad no pero eh lo que tenemos que recordar eh que es muy muy importante es esta frase esta no que las condiciones de corrección eh Como linealiza bilidad consistencia secuencial o consistencia en la quietud consisten en transformar no Esto es lo que es sumamente importante transformar la historia concurrente a las a la secuencial para ver si esa historia secuencial es correcta con respecto al objeto que se está implementando eso eso es lo que te
(01:52) debemos de recordar no que es sumamente importante entonces eh la diferencia entre estas tres simplemente van a hacer que las reglas van a cambiar y la laliz habilidad es la más estricta O sea la más pesada de cumplir después está la consciencia secuencial y consciencia y la quietud es la más Eh chafita bueno de cumplir o sea es lo que te permite eh es una consistencia más baja así podemos decir consistencia más alta y consistencia más baja Entonces simplemente son las reglas lo que cambia y bueno entonces la clase anterior nos
(02:32) la pasamos viendo definiciones no definición tras definición qu era un objeto este un objeto pues es un conjunto de métodos y esos métodos describen al objeto eh los objetos tienen estados por ejemplo la cola el estado de una cola Pues sería los elementos que hay en esa cola después de cierta operación después de cierta llamada método que era una especificación secuencial era simplemente el conjunto de historias que se pueden obtener a partir del lenguaje o de la especifica O sea bueno de la descripción del objeto vale por ejemplo
(03:10) eh tenemos un lenguaje o sea lo podemos ver así un lenguaje de de una cola que consiste en encolar este el primer elemento al inicio y desencolar al final Cuáles son las cadenas que podemos obtener de Este lenguaje pues son todas las de la especificación secuencial es lo que habíamos visto con respecto a esto okay Ah entonces e Ah bueno además no habíamos visto que que esta ejecución era correcta con respecto a un a un este objeto de tipo cola por qué Porque si nuestra cola empieza como vacía No se hace un dq y se regresa vacío pues es
(03:52) correcto se hace un enq de B se hace un enq de a y después es un deq de B Es correcto que se regrese B no perdón se hace un deq y se regresa B Entonces es correcto que se regrese B no es lo que habíamos visto entonces decíamos que esta ejecución es correcta con respecto a la especificación secuencial de una cola no o sea es una cadena válida para la descripción de lo que es una cola Okay este Bueno entonces eh habíamos visto que además que la dificultad va a erradicar cuando pues por ejemplo esta esta ejecución Pues será es secuencial no O
(04:37) sea tenemos lo que hace el hil c luego el B luego el a y casi casi que se forman en el tiempo no O sea de forma secuencial y lo difícil pues ser Va a ser cuando tengamos una ejecución así de concurrente no O sea todos se traslapan aquí esto se traslapan también entonces cómo la ordenamos no de forma para que quede una historia secuencial y nosotros podamos ver si esa historia secuencial es correcta con respecto a una cola o sea hacer lo mismo vale que en la que en esta ejecución que en esta de aquí entonces Eh bueno digamos que el objetivo de todo
(05:17) esto es definir o entender así la definición formal de la Line realizaba este en el libro nos manejan una Sí una que es como la pues la la base No de hecho la inabilidades herlich y Win Pero bueno herlich es el uno de los autores del libro no entonces este como que es distinto al paper en el que lo inventó no O sea como que lo pone más lindo sientre en el libro pero bueno es una definición formal y la verdad es que está pesadita No yo la la clase pasada se las enseñé era esta de acá no H la la clase pasada simplemente se las comenté así
(06:02) muy rápido pero pues sí está como pesadona no o sea son muchos conceptos porque tenemos este concepto de extensión de una historia este la extensión de de H es H prima no eh tenemos una historia legal e además tenemos es otro concepto que es complete una historia o sea como la historia completa de H prima oa todavía de la extensión tenemos este concepto de linealización y y este y ya no Pero bueno vamos a vamos a ello o sea como que el objetivo es que entendamos bien Qué dice aquí en la definición porque pues yo les puedo platicar de que trata
(06:46) la laliz habilidad pero pues lo mejor es entenderlo no O sea como tener esa confianza de que podemos leer esa y decimos Ah no hay problema no la entendemos entonces Eh bueno entonces ponemos Eh bueno yo les había comentado no que primero es muy importante la la definición de laliz habilidad está eh En este sobre bueno definida escrita no sobre este concepto de una historia Dónde estaba aquí no una secuencia finita de eventos de invocación y de respuesta entonces eh se ve o sea como esta es una historia no eh tenemos un evento de
(07:35) invocación otro de invocación uno de respuesta otro de respuesta de invocación de invocación de respuesta y de y bueno Y este no tiene no es es esa invocación está pendiente porque no tiene una respuesta asociada O sea que haga mach no no tiene una Eh entonces habíamos visto la definición de una historia luego habíamos visto la definición de una extensión de una historia no la extensión simplemente es completar bueno Añadir alguna respuesta para las invocaciones pendientes Pero puede ser que añadas o no añadas por eso dice cero o más Okay
(08:18) entonces habíamos visto que por ejemplo pues esta es nuestra historia no que describe perfecto esta ejecución Entonces esta historia es el conjunto de secuencias de de secuencia de eventos de invocación por ejemplo estos y de respuesta como este y como este y este también entonces e para obtener su extensión estas son dos dos este formas en las que podemos obtener su extensión uno pues es que se mantenga igualito no porque Podemos agregar cero respuestas en este caso pues agregamos cero respuestas cero puestas
(09:04) agregadas Y en este caso es otro ejemplo de otra H bueno de una extensión una H prima y aquí sí agregamos una entonces Esta es una extensión en donde agregamos eh una respuesta vale Y pues la respuesta va de AC acuerdo ya vieron Como por ejemplo aquí le falta aquí el enq de dos este agregamos que devolvió true no como que lo logró esa es una extensión de una historia y complete de una historia simplemente era e quitar las invocaciones que están pendientes Entonces por ejemplo si tenemos esta historia que es la que describe esta
(09:47) ejecución e este para ser complete simplemente lo que hacíamos era quitar La invocación que está pendiente No que en este caso pues sería esta de aquí esta porque no tiene una respuesta que hach Okay entonces este sería un complete una historia completa de ha entonces Bueno una historia completa siempre nos va a devolver historias sin invocaciones pendientes No eso es lo que siempre nos va a devolver y además podemos hablar de las historias como las proyecciones la proyección de la historia del Lilo p la podemos
(10:29) escribir esbir así y es solamente lo que hace el hilo p no también podríamos escribir la la proyección sobre lo que hace el hilo q no y pues iría ahora pondríamos todo lo que hace el Q no todo esto y esto bueno eh Por así esto sería todo lo que hace loco no luego también podemos hablar sobre las proyecciones del objeto a eh de cada objeto por ejemplo podremos tener una ejecución que que tuviera este no no solo una cola no sino que fuera este cola uno y cola dos no Entonces que el hilo tenemos el hilo a y al hilo
(11:24) bueno otra vez al hilo p y al Vale entonces el hilo p Pues no sé él hace a la cola uno hace un enq no y regresa a true y este otro hilo a la cola dos hace un deq y obtiene empty entonces podría ser así entonces la proyección de la historia de en este caso no eh Bueno voy a ponerlo así de esta Pues sería H de q1 Pues sería q1 bueno p el proceso p hace a q1 un enq de un Ay no me un poquito más por acá p q 1 punto enq 1 no y obtiene la respuesta q1 y
(12:34) true Vale entonces esa sería la proyección del hilo de sobre la cola q1 y también la podemos obtener sobre la cola q2 no es es como nada más lo que sucede Pues en cada cola o en cada proceso las proyecciones vale Este Entonces una historia secuencial se ve de esta forma tenemos un evento de invocación y un evento de respuesta que le hace match es decir que comparten el mismo proceso y el mismo objeto Vale entonces así así funciona Este Entonces por ejemplo pues tenemos aquí la la el evento de invocación y de respuesta con invocación y respuesta con
(13:22) mach enseguida no O sea entre ellos no hay ningún otro evento si hubiera por aquí entre ellos pues no sé un evento de invocación de de alguien más o de respuesta pues ya no sería secuencial Entonces esta historia habíamos visto que sí era secuencial porque tenemos evento de invocación y de respuesta enseguida invocación y respuesta enseguida Eh entonces Bueno un montón de de definiciones Ah y finalmente esta de historia legal que la vamos a ocupar una historia Es legal si para cada objeto en una historia este pues la proyección o
(14:00) sea como Pues esta subsecuencia que pasa en el objeto x es es este está en especificación secuencial del objeto x Ah traducido no este Pues digamos que así lo podríamos poner en traducción No si lo que pasa eh si lo que se ejecuta ejecuta en x es una historia correcta con respecto a un objeto eh tipo x no O sea no sé si lo que se ejecuta en la cola uno es correcto con respecto a un objeto Pues de tipo cola no O sea con la descripción realmente de una cola y este ya habíamos visto que que la historia anterior si era si era legal porque
(15:02) sucedía esto primero O sea si lo vemos así Primero se se hacía un deq se regresaba en es correcto no inicialmente la cola está vacía Entonces no hay nada que devolver se agrega en q se agrega a Perdón se agrega B se agrega a con dos enq y Y si hace como se hace un deq al final y se regresa B Es correcto eso no era complete eso no era complete Cómo aá bueno Esta es una historia legal no estamos hablando de historias legales Vale y una historia esta Pues sí En realidad es una historia también se podría ver completa no la diferencia
(15:43) entre complete y legal comples cuando están las invocaciones con su respuesta verdad Ah a ver a ver este Ah bueno s sí Sebastián sí complete a ver para que cachemos sí complete es son historias o sea como que lo obtenemos siempre lo que obtenemos siempre complete como dice Sebastián son invocaciones que tienen todo su respuesta es decir Son son este historias que no tienen ya invocaciones pendientes Pues sí es una forma así de verlo Ajá eh pero es distinto complete es esto O sea pues es es formar una historia pero ya vieron aquí en realidad
(16:25) no es este [Música] es muy importante ver la diferencia porque aquí para decir que una historia es una historia o sea como que lo que puede ser legal es la historia secuencial Okay entonces una historia que es complete O sea que está completa no precisamente secuencial miren una historia complete simplemente pues no tienes invocaciones pendientes pero de de allá que sea secuencial pues no porque tenemos por ejemplo en este caso este tenemos una invocación de p no y no tenemos su respuesta Enseguida lo que tenemos es una invocación de q Entonces
(17:08) ya por esto Esta historia no es secuencial lo que sí es que está completa porque no tiene invocaciones pendientes o sea porque pues le quitamos Esta no es que esa era la que no tenía no tenía una respuesta que hacía mach esta operación esta invocación en Entonces es distinto una historia complete pues es simplemente como pues tenemos H no una historia que está pues bastante concurrente porque no las invocaciones no siguen su respuesta vale o sea como que entré entre su invocación y su respuesta tenemos una operación no
(17:41) que no es de no es de p entonces complete Simplemente te dice toma toma la la historia h y Quítale la pendiente que en este caso pues le quitamos esta no Y para decir que una historia secuencial Es legal o sea para decir que una historia Es legal pues ocupa ser secuencial vale o sea las historias que son concurrentes que no tienen esta de invocación respuesta en seguido invocación su respuesta enseguida esas no son este no pueden ser como confirmadas no que nos o sea bueno no pueden no podemos analizar si es
(18:14) legal o no ocupamos que a fuerzo sean secuenciales Entonces vamos a decir si es legal como que legal es como este Bueno yo lo dejé así pero en realidad se puede podemos decir como válida o correcta o sea vamos a decir que una historia secuencial es correcta válida o legal no sí este si es correcta con respecto a lo que se espera de una cola entonces dice zel Entonces cuál es la diferencia entre secuencial sola y secuencial legal Ajá por ejemplo que vamos a copiar esta por ejemplo no
(19:18) si si esta implementación no imagínense que es una historia h1 y esta es la h2 entonces en vez de devolver B devuelva a No si ambas O sea si lo analizamos todo ambas son ejecuciones secuenciales Por qué Porque pues tienen invocación y respuesta su respuesta enseguida no invocación y su respuesta enseguida así todas las dos ambas son secuenciales pero esta Es legal ahí esta Es legal y esta no Es legal Por qué Porque no es correcta O sea no está en especificación secuencial de en este caso una cola por qué porque pues si este regresa
(20:12) a no cumple vamos a ponerlo as no cumple con fifo no lo que requerimos de una cola o sea una cadena válida de una cola sería este que cumpla con fifo no Y esta no cumple Entonces esta no Es legal pero ambas son secuenciales Okay Ajá vale Vale entonces eh esta historia pues si no sería secuencial vale o se Bueno ya lo habíamos resuelto la vez pasada este o sea que Ajá Exacto Sí zuriel sí O sea que haga bien lo que debería hac sí O sea si tenemos una definición estricta de una cola con sus métodos y todo y tenemos esta ejecución pues no cumple
(21:15) con lo que con la definición estricta de una cola no la cola pide que sea fifo eh Bueno es como que en resumen es eso No pide que sea fifo que los enq se metan al final y los deq saquen lo del inicio eso eso ocupa entonces no es correcta con respecto a lo que se espera lo que debería ser una Okay entonces este una historia secuencial pues Ah bueno Esta no es una historia secuencial pues simplemente porque tenemos este Ah bueno creo que aquí ya lo he escrito no porque a cada invocación no le sigue seguida su respuesta Que hace mach ya
(21:57) siendo más específic podríamos decir que que eh esta este evento no hace match con el de arriba No pues no porque pues es otra invocación no de otro de q Entonces no no es en much y ahora sí eh Por ejemplo tenemos esta esta historia vale entonces la escribiríamos este ver la Tena por aquí escrita no volver escribir que estaba por aquí tal vez est Okay entonces este q de uno no y luego
(23:03) en q de P y luego regresas uno Luego haces q true Luego haces e este de empty e bueno de q sí de q Luego haces en q de dos luego no hay regreso no se p no tiene y el que sí regresa es el de p no p q M es lo que sucede vale Esta es la historia que describe este o sea ya viéndola así no la historia así escrita que describe esta ejecución Entonces nosotros Bueno aquí la pregunta es Cuál es la extensión de la historia cómo sería Cómo se les ocurre que sería H prima que era una extensión este
(24:08) agregar cero o más respuestas a las invocaciones pendientes si lo vemos así Cuál sería la extensión no es única verdad Ajá sí exacto no es I Ajá dice dice Sebastián Ajá sí sí sí exacto no es es una extensión si le agregando eso nada más sería la ponemos así y si agregamos una sería O sea a quién completamos a esta que es La invocación pendiente le pusimos su respuesta Que hace vale o sea bueno e dice puede ser en q true dice suriel Ah Ajá Exacto Sí en Exacto Sí y podría ser ella misma Ajá también podría ser
(25:13) ella misma podría ser ella misma Sí o sea como que puedes agregar cero o más vale o sea si como dice tel si agregamos cero Pues nos queda esta Y si agregamos una nos queda esta Por qué era true ajá si fuera ella misma no sería completa no porque solo queda solo es enq Sí a ver primero por qué es true mm diga o sea este HM vamos a ver Déjenme ver si acá lo tengo [Música] Bueno mejor se los digo acá esa mucho rollo meternos Eh bueno por qué
(26:17) escogimos true Y por qué no decimos false no O sea como que s este como que también queda esa duda no O sea si la puedo completar con true pues me imagino que no así me lo inventé entonces este digamos que el objetivo de hacer la extensión y de hacer también el complete o sea también el complete es que eh lo completemos o lo quitemos para que nos favorezca entonces este por ejemplo en este caso como se regresa eh empty no O sea como este de que regresa empty quiere decir que que pues al final esta operación no vio a esta no O sea como que podremos
(27:12) pensar que que en el tiempo sucedieron así no para que este regresara en ti y no dos no Entonces digamos que el resultado de este en q2 eh podría ser sí podría ser true pero también podría ser false por qué Porque si completamos nuestra nuestra nuestra extensión como más nos convengan Es decir para que sea correcta con respecto a una cola pues no importa o sea lo que si realmente se pudo encolar dos o no porque al final nuestra ejecución va a ser correcta o sea como este des encol empti no importa no Entonces voy a ponerles aquí
(27:54) que el objetivo de H prima y complete y complete de H es e pues modificar H de la forma más conveniente y esta forma más conveniente o sea esto conveniente eh O sea que sea correcto con respecto al objeto al objeto Okay por ejemplo así O sea aquí da igual otra extensión como dice Alejandro no podría ser Eh así en vez como de poner aquí esto otra H prima Pues sería No le pongas true le ponemos
(29:02) false esa sería otra sí y y sigue siendo correcto o sea est esta bueno sea como que nos conviene no nos da igual lo que si se en colos o no Porque este regresó en Pero bueno ahorita vamos a para laiz habilidad entonces dice Bueno prun si fuera no se vería completa no porque solo es en que Ajá sí O sea hay que quitar ese en que para que sea completa y en extensiones también se puede agregar otro registro o sea que ahora p hiciera otro de Q en q eso se puede Ah no no no O sea solo puedes agregar respuestas Pero no invocaciones
(29:50) vale Este sí O sea no puedes agregar como que p haga Ajá sí sí sí que p haga invocaciones Okay entonces e por ejemplo Cuál es la historia completa de de esta No si nada más tenemos H sería lo que hace primero p pues es esteen vamos a ponerlo todo no p hace voy a ponerlo abreviado hace en Bueno si en peterson o se ha el objeto peterson hace el método Loc y luego este el el hilo q hace petero punto Loc no Y entonces quien lo obtiene primero Pues sería p él diría peterson pensemos hay que ponerlo entró no como que entró no s
(30:53) aquí como que lo logró vale es ese es el TR como que pues ya está ahí o sea él tiene candado él logró terminar de ejecutar Y luego el enq esdp hace enq Bueno vamos a pensar que en su cola no es el objeto de tipo cola hace un enq de dos y ya Ya acaba no O sea no no obtiene la respuesta Entonces esta esta historia por ejemplo no cuál sería su complete complete H dice p peterson lock y p peterson true Ajá sí exacto no bueno a ver como que hasta quitando eso no más bien sí este qué tenemos incompleto como dice Camilo pues estas dos no entonces para
(31:59) hacer la historia esto Entonces quito estos Ahí está es es complete quito esos dos No qué nos dice complete quita este bueno quito las ocasiones pendientes ahí está no eso sería una historia completa y Bueno pues esta historia es correcta con respecto a un candado no Bueno pues nada más se hace un lo y ya no pasa más Es trivial okay entonces el que no estaría O sí el K Ah tienes razón no disculpa si Que bueno que me si es más bien este Ay sí esta quito esta y quito esto
(33:12) no si si tienes razón este peterson Sí sí sí aj Y dice si hubiera un p no tendría por quitarse nada ajá si no tendría por quitarse nada eh Pues nada más quitaríamos el inicio no de esta Ajá porque pues este aún así no tiene No tiene final no O sea también ocuparíamos este o sea como para hacer la extensión est serga complete No pero si quisiéramos hacer la extensión de esta historia pues podríamos este simplemente completar este completamos tanto esta esta de aquí y esta de acá no se habría que completar ambas entonces
(34:17) pues harías como pq en q este bueno true y harías un este q peterson no para completarlas o sea como que una extensión no agregar dos respuestas en este caso Aunque pues sí como que si la agregas no no estaría correcto Pero bueno vamos a ell no me adelanto [Música] entonces que una historia esté bien formada y es lo que van a escuchar seguido en en el libro es siempre como de el proceso está bien formado la historia está bien formada no es es un concepto así teórico que lo que lo único que nos dice es muy sencillito que aprendernos no bien que
(35:09) dice cada cosa pero lo que dice es que cada sub storia que hace cada hilo es secuencial vale o sea a A qué se refieren eh se refieren a que este por ejemplo no Endo esta Si tienes esta historia no este la historia la subh hisoria de cada hilo o sea podemos hablar de la proyección o sea lo que sucede en p siempre es eh digamos que evento de invocación y evento de respuesta es secuencial vale o sea no puede ser que y después otra vez no evento de invocación y pues seguiría uno de respuesta y así va cosas que no podrían
(36:10) pasar Pues es que no fuera evento de invocación y otro evento de invocación vale o sea no esto no podría pasar por qué porque este no tiene su mach no es como lo que consideramos siempre que no pasan cosas raras así O sea que que por ejemplo p no puede invocar de que no obtener respuesta y luego vuelve a hacer otro de que y no tiene respuesta y luego hace otro no O sea no no puede ser todo tiene que ser haces invocación esperas respuesta y no puedes hacer otra invocación si la respuesta no ha llegado es así como los eventos o sea los hilos
(36:49) son secuenciales vale es una consideración entonces eh Ahora sí en la l idad eh tenemos primero Bueno este principio que está en el libro que lo que nos dice es que las llamadas a métodos deben tomar efecto o bueno aquí por ejemplo esta palabra no should appear to take effect instantaneously no podemos decir que parece que toman efecto de forma instantánea vale en el intervalo entre su invocación su evento de invocación y su evento de respuesta es lo que nos dice Este primer principio y bueno este quiere decir A
(37:35) qué se refiere no que por ejemplo tenemos esta esta esta implementación de este de dos hilitos de p1 y p2 Y eso claramente es una cola entonces quiere decir que eh siguiendo esta definición Este primer principio que deben tomar efecto entre su de invocación que es este por ejemplo evento eh de invocación y el evento de respuesta que es cuando acaban Entonces nos dice debe parecer que toman efecto de forma instantánea en un punto vale en bueno dice aquí en algún momento no O sea en un momento consideremos un punto entonces de y
(38:24) bueno Y este punto en el que toman efecto le vamos a a denotar como el punto de linealización e entonces Bueno vamos en en en la teoría se en la teoría vamos a poder encontrar eh analizando el código la implementación vamos a decir mira en este punto parece que puede tener efecto para los demás hilos como se acuerdan cuando cuando vimos la implementación wif que yo les dije o sea que analizamos dijimos bueno en qué momento un Nilo va a ver que yo encol algo y habíamos dicho Bueno yo creo que va a ser cuando se
(39:04) haga Tail más más No porque ahí es cuando el apuntador este ahorita ahorita voy ahí es cuando el apuntador cambia y entonces los demás sí los van a ver no este el método de que se acuerdan que el método de que comprobaba decía Tail menos Head es igual a c en Entonces no hay nada que desencolar no Y entonces este por eso era importante no si estaban si el hilo este pedos estaba encando algo pues el otro hilo no se iba a enterar hasta que cambiara realmente ta si no lo cambia Pues él siempre va a regresar como o la
(39:48) cola está vacía entonces hay un punto siempre en los códigos Bueno teóricamente lo es más complicado pero hay un en el código este y que eso se va a reflejar en en el intervalo de ejecución en donde toma efecto es decir vamos a considerar esto este esta forma de toma efecto de forma instantánea es como que eh la llamada eh Es la llamada a un método no sé sea este pues no sé enq deq lo que sea es percibida por los demás hilos vale zil Así quedaría o sea como ahorita hay
(40:53) que pensar como de Okay como que toma efecto en algún punto s eh digamos que hay que considerarlo el punto en el que mi enq realmente se ve para los demás o sea realmente pueden ver que yo encol una no porque pues como el código pues es enorme no O sea pues no sé no da enorme no pero pues tenemos no s líneas de código la uno la dos la tres o sea en este intervalo pues ejecutamos varias líneas de código no entonces va a llegar un momento entre este intervalo no sé que la línea no sé en la s Pues por fin hice Tail este
(41:29) aument el el el el apuntador Y entonces ahora sí alguien puede decir Ay mira yo sí vi el a No yo sí vi a y entonces yo voy a regresar a porque yo yo vi que realmente se encol una Vale entonces así este así funciona eh este este primer principio de anelis habilidad y Bueno espero que que al final todo tenga más sentido Pero vamos este no O sea no dejen de de poner atención Vale entonces en las implementaciones que están basadas en candados podemos encontrar fácilmente el punto No de linealización Por qué Porque pues este
(42:16) punto o sea digamos que este el enq va a tener efecto en los demás en cuanto él gane el candado no O sea en cuanto s ganó el candado Pues es obvio que este va a tener efecto al punto de linealización ahí no Por qué Porque nadie más va a poder hacer nada hasta que pues el hilo se deje el candado Entonces el punto de linealización definitivamente va a estar aquí no y ya luego el siguiente hilo que logre adquirir el candado pues va a tener su punto de linealización no eh Y así O sea cuando usamos candados es muy como Pues
(42:59) la verdad fácil ver dónde tiene efecto okay Porque pues si tú tomaste el candado y haces un enq Pues cuando lo dejes probablemente yo voy a ver lo que hiciste No no va a haber pierde este y yo voy a percibir que tuvo efecto eh entre que se tomó el candado y que lo dejaste no O sea en ese momento tú hiciste un enq en ese momento hiciste un deq Okay entonces es es sencillo cuando estamos eh sección I críticas como que hasta podemos formarlos así de forma [Música] secuencial entonces en las implementaciones cuando no ocupamos
(43:38) candados Ah hay que ver así un zoom en el código y y analizar en esta se acuerdan es una implementación que ya vimos que dónde tiene efecto pues puede tener efecto aquí si la cola está este llena Pues el en va a regresar vamos a considerar que regresa fal no return falso y si la cola no está llena pues no voy a percibir que que agrego algo hasta que este se haga esto no Y entonces aquí no sé se va a regresar que realmente se encol algo no es como que lo que representa el Tail más más no O sea yo quiere decir que ya metí algo este en en
(44:27) el último índice de Tail y que hasta le aument Entonces en este punto los hilos bueno el hilo des encolador que bueno se acuerdan esta implementación solo es para dos hilos Vale entonces el hilo de es encolador en este punto él va a decir Ah mira si es cierto yo este este veo que Tail es es distinto no eh de o sea por ejemplo si estaba vacía pues va a decir Ah mira final realmente puedo ver no y o o no No si está si no está si está vacía pues va a regresar este en este caso y ya que esté que no esté vacía va a regresar
(45:15) este lo que esté al inicio no que en este caso va a ser e bueno en este caso pues regresa x no x pero digamos que este eh Hasta que modifique eh en este punto también tiene efecto para para los hilos encolador o sea también el que se haga Lía 18 quiere decir que se aumentó get y por ejemplo si no si estaba llena entonces por fin veo no que este que puedo realmente agregar algo pero si no pues simplemente voy a regresar un pues está lleno vale pero son como puntos en el código que son claves vale como que podemos decir que
(46:07) ahí justo este son los puntos de linealización porque si está llena este si está si está llena Pues voy a terminar aquí y en este punto va a tener efecto para los demás no y si no está llena Pues en este punto voy a decirles a los demás que ya hay algo nuevo con el Tail más más y lo mismo con los des encolador en este punto voy a decir pues mira est vacía Este ya ya acaba no y si no está vacía este pues regreso el primer elemento y muevo el el el cabezal de get no Entonces en este punto cuando muevo el cabezal de get tiene efecto para el
(46:49) encolador entonces así O sea como son estos puntos en donde parece que toma efecto esto entonces Bueno ese es el primer principio luego antes de meternos este a lo que viene este les voy a hablar del orden parcial y del orden total Okay el orden parcial simplemente este lo vamos a denotar con esta línea y esta línea en realidad pues la he estado usando ya O sea ya tiene no es la primera vez que la ven no esta línea este en un conjunto x pues simplemente es una relación que es este irreflexiva o sea que por ejemplo si tenemos un enq
(47:35) de a no del mismo hilo p a un en q de a del mismo hilo o sea que es justo la misma operación no puede ser vale o se Esto no puede ser que una operación este tenga un orden con con su mismo operación vale o sea Eh bueno podos escribirlo así también no puede ser que suceda que yo mismo me apunto a mí no O sea como que yo me precedo a mí no Y esta relación también va a ser transitiva es decir que por ejemplo si si dos operaciones tienen una relación y esas Y esa Y esa última operación se relaciona con otra Pues
(48:21) entonces el orden se mantiene también de la primera a la última vale es como lo que o sea en realidad es así como est es una definición formal sobre conjuntos pero es lo que hemos visto no es como lógico en el tiempo o sea si tenemos eh este así no tenemos nada más al hilo a Entonces si suponemos que el hilo a está ejecutando Pues no sé un enq de a y luego hace un enq de b y luego hace un deq y Sacada no entonces quiere decir que aquí hay un orden y una Bueno una relación en el orden parcial y esa es otra relación en orden parcial no
(49:07) entonces quiere decir que también se cumple esto Pues sí no pues en el tiempo si esto sucedió primero y esta sig una relación Pues esta fuerza sucedió antes no eh Y tienen esta relación Entonces ese es el orden parcial entonces aquí por ejemplo el orden parcial eh sería eh de aquí acá de aquí acá y de aquí acá de aquí acá e pero quiero que noten que estas no tienen orden parcial así lo vamos a considerar Vale y estas dos tampoco tienen orden parcial entre esas dos vale Por qué Porque son concurrentes no podemos decir que una
(50:06) sucede antes que otra entonces Esas no y luego lo que consiste O sea la laliz abilidad tenemos un orden parcial que pues son las ejecuciones que son concurrentes hay ciertas operaciones que no tienen un orden parcial entre ellas que son como en estas dos y estas dos digamos que par no y la idea de la analizaba es transformar esto a un orden total es decir el orden total va a ser un orden parcial o sea pero que para todos los distintos X y Y en este conjunto siempre se va a cumplir que hay un orden como que ya ven
(50:47) no como que ahí se ve que estamos tratando de que realmente obtener un orden secuencial no siempre una precede a otra entonces vamos a ver eh De hecho es lo que nos va a mostrar la laliz habilidad que un orden parcial lo vamos a poder extender a uno total Eh entonces este Y además lo que nos va a decir la laliz habilidad es que si tenemos un orden parcial este en X y Y entonces ese mismo orden se debe mantener en el orden total Entonces el orden se mantiene al orden total Entonces por ejemplo no eh Bueno mejor me voy hasta acá Vale
(51:48) entonces cuál es ese orden la clase anterior Ya lo habíamos visto pero bueno hago mejor una nueva entonces este orden nos dice que analiz habilidad nos dice que que para construir un orden parcial un orden total Hay que seguir estas reglas vale o sea digamos que la historia concurrente va a ser el orden parcial lo que vimos ahorita muy formal y la historia concurrente Perdón perdón la historia sí la historia concurrente es el parcial y la historia secuencial es el total el orden total Entonces qué reglas vamos a seguir
(52:25) para construir esto es que si existe una precedencia entre una llamada a otra en el orden parcial entonces este debe suceder o sea debe tomar efecto antes esta situación tomar efecto Entonces qué nos dice que el orden parcial se mantiene al total H quién tiene un orden parcial ella no estas dos estas dos estas dos eh estas dos son estos órdenes no eh Ajá entonces pero si dos llamadas se traslapan voy a ponerlo en azul se pueden ordenar de la manera que más convenga Y cómo nos conviene Pues que sea correcta entonces quién se puede
(53:12) reordenar estas dos se pueden reordenar y estas dos se pueden reordenar Por qué Porque no existe un orden parcial entre esas entre ese entre cada par no O sea no existe aquí ni existe acá entonces ordénalas como quieras entonces por ejemplo no si nos dicen esto y nos dicen además que las ordenemos como más nos convenga Pues nos conviene que en q1 y se regrese true suceda antes en el orden Total que de que este Bueno voy a ponerlo se me olvidó poner q no este es de p nos viene que suceda antes no que de q1 o sea como
(53:59) que pues cómo va a ser que se encola algo que no que no ha sucedido O sea no no tiene sentido que lo pongamos antes no nos conviene de acuerdo a lo que es correcto Okay entonces este después tenemos que mantener el orden parcial que es todas estas Y entonces nada más podemos reordenar estas eh cómo nos conviene este y bueno que suceda primero en q2 del proceso Q que que suceda en q2 y que después suceda p de q 2 vale Y yo sorpresa no este aquí que esta está incompleta no bueno Entonces ahora sí la inabilidades
(54:55) esta eh tenemos sea una historia H bueno Perdón vamos a vamos a leerla bien una historia H es Line realizable vale H será inable sí H tiene una extensión H prima y existe una historia legal secuencial s tal que sustan dos cosas primera condición que si completamos la extensión va a ser ser equivalente a esta historia legal secuencial este o sea digamos que es historia correcta secuencial Ese es el primer punto y el segundo es que cada llamada al método a método que preceda otra en H debe ser eh este igualito en ese o sea digamos
(55:52) que el orden si sucede eh m0 existe un orden parcial entre m0 y M1 entonces debe existir también un orden total en ese de m0 a M1 vale o sea pues se debe mantener es lo que nos dice no es como como esto e el orden parcial se mantiene al Total no O esto de que la llamada al método que preceda otra debe tomar efecto también en el en el orden total pu sí o se es como es esta vale esta segunda línea pero lo que nos faltaba por completar esta este esta definición que no está tan formal es Qué vamos a hacer con las Ay discúlpenme qué
(56:40) vamos a hacer con las invocaciones pendientes vale es como lo que nos faltaba digamos que esto es lo que vimos la diapositiva anterior eh dejen Lo pongo aquí no di positiva anterior ent esto ya lo sabemos no manten el orden parcial Pero además nos faltaba esto qué hacemos con las invocaciones pendientes Ah pues primero hay que completar las que podamos y luego oa bueno digamos que construir no O sea poner respuestas agregar cerom má y ya las que no pudimos agregar pues las quitamos las invocaciones que están pendientes Y
(57:19) entonces ahora sí aplicamos Esto vale Ah cómo lo ven o sea este entonces a ver ya viendo esta esta implementación no ya no más acabó Ya casi acabó mucha info Sí mucha info es que les digo est pesado pesado por teoría porque en realidad siento que no está tan difícil pero tienen que entender o sea siento no la definición formal porque somos computos O sea no hay que ver también la teoría entonces bueno si tenemos esta hist entonces H prima de esta historia pues podríamos agregar aquí un true no sea como toda la historia y al
(58:07) final hacemos agregamos un q este en q bueno no sería as Vale y complete Pues sería la misma porque ya está completa complete no y ahora sí ya la historia Line realizable pues ya la completamos Y entonces de este era de una cola entonces decimos que esta ejecución es linealiza vale Y ya ahí acaba este Pero bueno sea Lo bueno es que ya les est sirve que lo procesan se les pega en su mente y Los vemos vale Este volvemos a revisar y vemos ejemplos no para ver este las impl las ejecuciones finalizar podremos ver otra vez el
(59:11) ejemplo lunes Claro claro Sí o sea vuelvo a repasar pero sirve que ya les di lo primero entonces este bueno que disfruten su fin no vemos s Bonito fin recording Stop
