(61) Clase 14 2024 08 23 - YouTube
https://www.youtube.com/watch?v=ZuEme2ZzvYs

Transcript:
(00:00) al Hola buenos días H
(01:30) Oigan este Aprovechando que somos varios ya ahorita Valeria Me comentó Bueno una de sus este compañeras me comentó que no tiene equipo que pues sí le gustaría trabajar en equipo no sé si alguien tenga un equipo de dos y y este y consider un integrante más o [Música] este a Ah ya qué bueno qué bueno Valeria sí sí sí sí que bueno sí O sea yo siento que o sea hacerlo de uno todas las tareas está bien o sea tampoco creo que es mucho pero de a dos sí se este ya con eso tienes al menos con quien discutir los ejercicios y ya con dos Es bueno o
(02:23) sea con dos siento que ya con eso es mejor Vale entonces e ya le subí su segunda tarea Ojalá la hayan esteo y bueno la leemos ahorita que acabe ya este este el segundo Bueno entonces este Ah bueno igual No si alguien más le falta equipo Pues ahí hay un equipo de dos vale e Okay este entonces bueno nosotros habíamos visto el primer problema que yo les había comentado que de hecho es Yo creo que el primer problema o sea bueno nosotros vimos el primer problema pero justo coincide con que es el primer problema este que se formaliza y que pues forma
(03:23) parte del del cómputo concurrente No ya como disciplina de hecho este tienen resultados muy importantes por ahí de los 80as que es esta esta prueba al final no que si ocupas resolver el problema de la exclusión mutua Y garantizando al menos deadlock free para un número n de hilos ocupas al menos n localidades de memoria V es como el gran resultado la gran Cota Cota inferior no es es una Cota bueno como como computos computas bien sabemos que las cotas son sumamente importantes no O sea ya con eso nos dictan qué tanto podemos mejorar
(04:07) algo y ya no seguir intentando no eh entonces bueno este problema este pues fue resuelto también desde el 81 por peterson por por este por lamport con el candado de del panadero de Bakery también no este y bueno habíamos visto que de la diferencia de peterson o sea bueno de la generalización que es del algoritmo de filtrado que es la generalización de peterson a a Bakery se acuerdan que nada más bueno la única diferencia o gran diferencia es que la propiedad de Justicia es este sí se garantiza en Bakery pero pues filter no
(04:49) Entonces es algo que nos gusta yo les había comentado que en realidad ese algoritmo no s o sea bueno lo vimos como de forma pues código No teórica sí Ay qué bonito pero la realidad es que no se aplica tal cual en la práctica Entonces en realidad este pues aquí lo que nos comentan es que ha habido varios Este algoritmos basados en el de Bakery y a la fecha de hecho hay unos unos candados que se llaman spinlock que yo creo que algunos los han escuchado los spinlock simplemente este pues son cantos que nos brindan una
(05:27) ventaja que pues es que si no obtienes el pues te vas a quedar por allí espineando o sea como dando vueltas no y más o menos Creo que estos que vimos son así no O sea no no tienes el candado pero andas dando vueltas en un coil Pero bueno hay les digo que hay distintos tipos de candados nosotros ahorita vimos como la base pues teórica no lo que salió primero y que coincide con que pues es lo más eh sencillo o sea lo introductorio para nosotros de entender Vale entonces no no se estresen no de que ay Quiero ver yoos increíbles pues
(05:59) vamos a ver este bueno candados que realmente se ocupan en la práctica y que pues si les interesa se hay análisis de Ay que otro output no de rendimiento de Cuántos este puede Cuántos este hilos puede manejar ya o sea otras cosas Pero bueno ahorita nada más este con esta esa introducción teórica Vale y ya este vamos avanzando entonces siguiente problema es un problema también muy muy famoso y que se usa un montón en el cómputo concurrente y es el de los productores y consumidores y esto O sea bueno Yo quiero ponerles El ejemplo de que pues
(06:43) puede ser que por ejemplo productores puede ser e pues una una en una cola por ejemplo en una cola en una q no este el método en que por ejemplo y los consumidores Pues en esa misma cola sería el método de que como que o se es como sient el ejemplo más fácil el método enq le da cosas o le da ems no que consumir al método de eso es por ejemplo así como para que se den una idea no de estos productores y consum edores otro ejemplo Pues sería O sea ya más aplicado este por ejemplo en el en el tcp bueno Eh sí tcp protocolo tcp de redes no
(07:49) e este protocolo Simplemente nos dice que vamos a enviar paquetitos en orden y que el otro nos debe dar un acknowledge no O sea un ah en ese orden Entonces nosotros le mandamos más no como que ahí también se ve como de yo te yo yo Qué hago yo produzco paquetes él los consume no y de hecho no voy a producir más hasta que él me diga que realmente funcion no Entonces sería como que pues el que envía bueno eh el que envía sería el el productor y el que recibe sería el consumidor y de hecho el que recibe pues le da este da
(08:31) un esto en redes por ejemplo Entonces digamos que yo produzco paquetitos de información el que envía y el que recibe Pues los consume y de hecho dice Ay me llegaron bien Mándame más y ya entonces el otro le envía otros y así un problema este como bien clásico no de la computación en general Vale entonces bueno por eso también el cómputo concurrente importa solucionar este problema pu bueno como nos gusta este Bueno a mí me gusta no este la forma en la que se escribe el libro con alis pop No creo que como que nos da el
(09:12) chance como de analizar los problemas como desde más arriba no no ni siquiera a una situación como muy de algoritmos de vamos a hacer las variables no es como que nos permite como abstraer un poco los problemas entonces ahí va otra vez no imagínense que otra vez tenemos a bop se acuerdan que compartió en el patio que sus perros su perro y su gato no se llevaban entonces por eso teníamos este problema de exclusión mutua no O sea queríamos que el patio era la sección crítica y el perro y el gato solo entraban este no podían estar al
(09:45) mismo tiempo en esta sección crítica bueno Pues resulta que Alice y Bob se casan no y pues resulta que también como que el perro y el gato se casan o sea como que este de repente se llevan bien entonces oes divorcia no se separa y son vecinos entonces las mascotas se quedan con Alice por ejemplo porque pues ya se aman las mascotas es así no se pueden separar pero el juez no ahí en los litigios y todo pues le dice aob Tú te encargas de la comida no y resulta que las mascotas se ponen de lado de Bob y perdón de Alice Y pues ahora no quieren
(10:20) ver a Bob no Entonces ahí como que hay una una exclusión mutua no pu así pues se casan se separan y las mascotas ahora son amigas s pobre B no siempre siempre de amable y así pero bueno entonces alis quiere que o sea ti esta regla dicen okay Bob se encarga de la comida porque pues también es tu perro y ahora es tu gato también entonces Alice quiere que cada vez que que saque sus mascotas pues ya esté la comida en el patio no es lo que espera Alice y Bob dice Bueno yo quiero que pues que Alice al menos me limpie los los trastes no O sea
(11:00) que estén listos y que estén vacíos no así entonces eso eso quiere no O sea que que Alice quiere que la comida ya esté yob quiere que que ya no haya este comida en los trastes no para poder sacarlos entonces diseñan este protocolo no entonces Alice qué va a hacer pues va a ser primero Ah bueno van a poner una lata hagan de cuenta que se ve esto así este tienen la casa de no sé de Alice de Bob y van a poner una lata en medioa Entonces esta lata pues es como una en realidad es como una bandera no eh Bueno ahorita van a ver entonces la ponen en
(11:40) el centro de del patio y van a esperar Alice Espera que la lata esté horizontal si está horizontal pues la saca sus mascotas y cuando las mascotas regresen y no haya comida en la este no haya comida pues va va a bajar la lata la va a poner como vertical no este entonces como que nada más ponen l horizontal y vertical no como true false Entonces qué va a hacer pues al revés no va a esperar a que la lata esté vertical si está vertical va a poner comida y este y finalmente cuando haya comida pues va a poner la lata en horizontal no entonces
(12:13) como que la lata horizontal pues significa que que hay comida no y y en vertical implica que está vacío simplemente así funciona y entonces e bueno nosotros tenemos aquí un mini protocolo no y un protocolo A diferencia de los otros que en vimos de candados este protocolo pues pues es como distinto también no eh No los o sea digo los hos no hacen lo mismo Alice tiene como su propio protocolo tiene el suyo Pero bueno al final la lata es nuestra variable compartida vale entonces bueno Ustedes es el Quiz para que para que
(13:06) analicemos consideran que que se cumplen las propiedades uno exclusión mutua starvation free estas dos nada más vale Y les digo la propiedad de productor consumible entonces creen que se cumple esta a la sección crítica dice Camilo es que no se vean aj exacto no en m se cumple O sea pues no se ve nunca o sea Alice solo sale con el lata horizontal y solo con el lata vertical no y ya entonces exclusión mutua se cumple muy bienv free creo que no a ver starvation free Por qué no se cumplía Esta sí alis sale eh con la lata
(14:13) vertical horizontal horizontal y Bob con la vertical esto si se cu puede pasar que al no ponga la lata en vertical Pues sí pero por ejemplo en este caso eh Como que o sea como Pues en realidad estamos otra vez en un escenario Pues que es bloqueante no entonces podemos pensar que bueno starvation free que nos decía la definición era que eh todos tienen éxito eventualmente no Entonces digamos que ay como que est eventualmente lo que nos dice es que si eventualmente Alice pone la lata en vertical Bob sale No Bob sale y
(15:20) viceversa No si Bob eventualmente Pon la en horizontal al y Sale entonces como que le suena no como que sí porque o sea no aquí por ejemplo no es como que Alice pueda salir muchas veces no O pueda salir muchas veces porque ambos se necesitan no O sea como si como que esta situación de eventualmente se si eventualmente pues al sale no quiere comida pues Bob sale no Y también este o sea bueno Bob tiene que poner comida eventualmente no sabemos cuándo no pero si el protocolo este si ambos no avanzar Pues eventualmente el otro va a hacerlo
(16:03) no y eventualmente va a salir como que es se refiere a esto starvation prale entonces Bueno ya entonces esta propiedad última de productores y consumidores consiste en que este los consumidores no harán nada mientras no hay algo que consumir no y viceversa e los productores este son los encargados de proveer no Y entonces también los productores No pondrán nada Por ejemplo este si no hay espacio Vale entonces Okay entonces por ejemplo es como interesante ver esto O sea la exclusión mutua pues simplemente es pues no hay dos en la en la misma
(16:54) sección crítica No ya dicho de forma así más este más las secciones críticas de dos o más hilos no se traslapan vale entonces eso eso es Y acá es pues no voy a consumir Mientras no haya algo que consumir y los productores no van a proveer Mientras no haya espacio no para proveer entonces este problema de productor y consumidor ocupa o se sirve de la exclusión mutua no digamos que lo necesita Por qué Porque por ejemplo ahorita pues se ve muy fácil no como que pues solo tenemos dos hilos Alice y Bob y garantizarles este pues como que alis
(17:35) no sale mientras Bob no ponga y al revés no pero se dan cuenta si tenemos una cola un concurrente y hay varios hilos que encolan y varios y los que se encolan no tenemos varios productores y consumidores Entonces qué podría pasar en este caso este que como es concurrente puede ser que dos hilos consuman lo mismo no O que dos hilos Eh bueno sí creo que es el problema no produzcan lo mismo Pues no sea cada quien va a poner este entonces puede ser no que dos s los consuman lo mismo no puede ser entonces ahí a fuerzas necesitamos exclusión
(18:12) mutua o sea siempre que solucionemos un problema de productores y consumidores vamos a ocupar exclusión mutua porque pues sí no O sea para que realmente podamos cumplir esto ocupamos que no haya dos consumidores que consuman lo mismo y ya entonces Bueno hay varios problemas que surgen del exclusion no entonces Bueno nada les quería poner un ejemplo no de de de si se hace esto de forma concurrente como o sea bueno este un problema que utiliza la exclusión mutua Pero bueno o sea les digo es muy importante este problemita
(18:50) porque ya vieron no por ejemplo para hacer un contador pues decimos Ah Mira pues Pon exclusión mutua y ya está no solucionado e y mil cosas qué quieren hacer por ejemplo en la práctica dos que que va a ser el siguiente jueves de la siguiente semana vamos a hacer una cola concurrente Cómo Pues con exclusión mutua o sea vamos a ocupar candaditos y los vamos a poner a correr no a todos los hilos Y no van a pasar cosas raras porque tenemos código delicado no este entonces así funcionaría y Bueno les digo no es como
(19:28) una solución así como Ay tengo un problema concurrente Bueno Ponle un candadito no es como una solución y una solución así muy eh la verdad no que parece como este algo muy trivial Vale y Okay entonces siguiente paso eh vamos a leer la tarea este Okay entonces lo primerito es es este el primer punto es identificar el tipo el tipo de propiedad vale Y también dependiendo No si si es una propiedad segura deben o sea por ejemplo no sé la inflación sube cada sube año con año no Entonces me tienen que decir bueno Esta es una propiedad de
(20:21) seguridad o de viveza y si es segura pues me tienen que decir a la cosa mala que nunca sucede pues es no sé que la inflación sube año con año no O sea bueno que la inflación no suba con año es la cosa mala que nunca suceda o la cosa buena que sucederá no en si es de viveza Aunque Bueno creo que ya lo ven así como muy fácil o sea bueno lo ven así simple vista está como que la ven no de seguridad pero bueno entonces cada una de estas de estas Este de estos ados Okay Eh responder esto y muy importante parece que
(21:06) eh Por ejemplo esto no O sea como ustedes me dirían Eh bueno como que tiene truco e porque cuando dicen la cosa mala que nunca sucede es que la inflación no suba no pero pues eso nosotros o sea como en nuestra lógica no es malo vale pero aquí digamos que se tienen que fijar en argumentar no O sea que es una propiedad segura No tanto como en lo que es bueno o malo en el mundo vale porque s no es bueno que no no es bueno que que suba no pero bueno este entonces son esas me me preguntan vale o sea me me dicen si si
(21:47) no entienden la redacción ahorita de algo vale Okay entonces el segundo punto también es como sencillitos bueno nada más es Mostrar un ejemplo de una ejecución de filter en donde un hilo a lo rebasa más de una vez cualquier otro hilo B eh Y entonces Eh hay que considerar número n de hilos consideren un número n mayor a 10 no O sea como que pues es un sistema grande sea y y explican Por qué no se cumple la propiedad de Justicia no entonces bueno yo aquí les puse sea que pueden mostrar una imagen de una ejecución o
(22:32) describirla pueden ser 10 Ajá sí sí O sea pero les puse 10 para que no quede como tan tan trivial no porque pero o sea no crean que tienen que describir todo lo que hacen 10 hilos no Simplemente me refiero a que si son n = a 10 quiere decir que va a haber niveles nueve niveles no por eso por eso les puse O sea no es como que ay Este somos 10 hilos y el uno hace muchas cosas o sea no pero entonces me describen como una ejecución no sea pueden dibujarla no de así de a y bueno así como hilo un dos así no pero bueno sea les digo no
(23:19) tienen que Mostrar justo todos los hilos o sea en la cuando la dibujen no se pueden poner aquí como bueno Y aquí están los demás Vale entonces como que sí de Mostrar cómo cómo van avanzando Pues no sé los hilos En los niveles no o sea puede ser que Eh Pues el hilo uno se queda en el nivel No sé no est ejecutando sí Entonces el hilo uno como que no acaba no Y ese es el hilo a y el hilo B no entonces el hilo B acaba y acaba no tarar tarar él acaba muchas veces o sea eh puede tomar el candado muchas veces antes que que ya lo
(24:05) logre porque ya resulta que es bien lento para cambiarse de de este pues es es la razón no por la que un hilo B podría aventajar varias veces a uno a no pero o sea bueno me gusta este ejemplo o sea bueno como que ustedes lo armen para que buo vayan analizando no O sea bueno sí dónde Pero dónde es donde B puede tomar ventaja de a y además este en la clase vimos nada más un ejemplo en donde a Pues empieza primero y termina al final no pero ahorita como darse cuenta que en realidad podría ser que a lo rebasen en realidad muchas
(24:39) veces y un mismo hilo vale porque pues si son por ejemplo 10 niveles ocupa ponerse siempre o sea bueno ocupa no ser siempre la víctima no para no quedarse entonces así este como que considerar no como que si ve puede puede terminar varias veces eh de ejecutar el lo antes que bueno y pensando que n más es lento O sea no que se queda ahí como detenido por siempre vale Este Entonces Bueno e después creo que vieron con Isabel Creo que este mismo problema o uno similar Pero bueno en La ayudanta Y es justo no Argumenta si la siguiente
(25:28) implementación que es victim este de un candado para dos hilos cumple con y van a tener que ver no si cumple con exclusión mutua con deathlock free con starvation free Vale entonces este si no lo cumple pues simplemente como que Mostrar un ejemplo vale o sea como este no sé Pues no sé me dicen mir no es starvation free Porque si tenemos una ejecución de dos hilos este Bueno sí pues no hay más No o sea un cado para dos hilos entonces pasa que no sé me dic No pues que a ejecuta el Loc y y en la línea en la línea justo en
(26:05) la línea no sé la línea si se nombra como víctima entonces B No puede salir y entonces B no puede tomarlo ni a o sea como que me digan no este o que que ya siempre lo toma antes que ve o sea como o sea me den un ejempl ito vale Si no lo cumple y si lo cumple eh Pues como vimos o sea por ejemplo si cumple exclusión mutua pues decir bueno eh tenemos que usar en variantes Ajá pero si te das o se se dan cuenta no es así como que no las hayamos visto no por ejemplo para demostrar exclusión mutua pues lo que me tienen que decir es y
(26:41) como solo son dos hilos O sea no hay que usar inducción vale o sea pues no no es como que o sea como que tengamos ahí filter no O sea varios varios hilos n hilos no sea aquí solo son dos Entonces por ejemplo para exclusión mutua me tienen que decir No pues la sección crítica de a este por contradicción se acuerd por contradicción eh suponer que la sección crítica de a es concurrente a la de B no a la sección crítica de B Ay s miren otra vez mi reunión gratuita otra vez me nos va a sacar en 10 minutos Pero bueno no s
(27:21) entonces un problema tengo que volver a a comprarlo bueno acá yo creo me da tiempo de ver la tarea eh Okay entonces eh es encontrar esto no O sea bueno suponer por contradicción Que Vale entonces este es es describir esto si cumple deadlock free por ejemplo Mostrar no que que un hilo siempre lo toma no y por ejemplo un el el hilo a siempre que quiera eventualmente es distinto no como son de viveza es mucho este eventualmente lo toma no o él y lo ve dependiendo vale este o un hilo siempre tiene al menos éxito no no los dos y ya
(28:21) demostrar por ejemplo decir como supongamos que ni el hilo a ni el hilo B O sea por contradicción no que ni el hilo a ni el hilo B logran tomar el candado vale eh dos por contradicción este a y b se congelan entonces así por ejemplo en es es para demostrar Esto vale o sea es la invariante ya en realidad ya las vimos este siempre se cumple Entonces como tal no ser invariantes para mostrar los ciclos super formal solo hacer contradicciones Ajá es que por ejemplo en este caso la invariante como solo son dos hilitos
(29:05) pues no es como que tengamos que hacer una inducción No simplemente es como algo que o sea una invariante es algo que siempre se cumple vale aquí es como muy fácil porque solo tenemos dos no a y no no super formal o sea No pues no pero sí que la idea principal esté ahí no O sea que realmente es esta O sea que mira tengo esta contradicción no y no podría pasar porque en la línea 7 o en la línea 9 sucede Esto entonces si el hilo a toma antes o lee la víctima del otro no y ve bui o sea como que así vale pero no muy
(29:41) formal sí exacto no no muy formal Pues creo que en mi libro es tan formal o sea pero sí O sea que que se note que saben Por qué vale bueno y obviamente pues que si realmente sea de free o no no O sea que no no tengan el error vale que sí sea O sea que sí realmente sea deadlock free Y pues su argumentación este o que no sea y entonces pongan su ejempl ito no miren aquí encontré una ejecución en donde se ve claramente que no eslock free Vale entonces bueno eh este luego el problema cuatro est muy divertido este problema Sí es muy famoso
(30:23) de hecho Eh entonces este problema es el de los prisioneros le puse nuevo problema porque en el libro hay uno no Simplemente aquí son más variables pero pues se resuelven de la misma forma entonces en una cárcel hay n prisioneros y dos guardias Vale entonces los guardias eh les dicen Pues vamos a jugar algo no Y si nos ganan Pues los liberamos Entonces miren Cómo es Pues resulta que el Guardia ahí tenemos el Guardia a y el B entonces ambos van a llevar un prisionero a la vez a un cuarto en el caso de a El guardia a va a
(31:01) llevar los prisioneros a un cuarto e y les van a dar pues ahí alimento no y el Guardia B los va a llevar a un cuarto F y ahí les van a bueno los van a dar cosas para que se bañen no es como que pues haí la presión entonces en cada cuarto existe un interruptor en el cuarto a existe el interruptor l1 y en el existe en el perdón en el cuarto de de e o sea del guardia a el l1 y en el cuarto del guardia B es el cuarto F existe el L2 Vale entonces eh Y bueno aquí les puse como las este como que las las probabilidades o
(31:52) bueno la la Cómo se [Música] llama la frecuencia así la frecuencia con la que los pasan Vale entonces este Guardia pasa cada prisionero al menos una vez cada do n veces o sea cada do n prisioneros vale Y este otro los pasa una vez cada tres n veces prisioneros vale o sea como que por ejemplo si son 10 10 prisioneros pues este puede ser que repita uno pero no va a repetir uno más de dos veces o sea más de más de 20 veces o sea bueno más el más del número de veces que están los demás vale Y también por ejemplo este no O sea no
(32:28) puede repetir un prisionero o sea puede pasarlo varias veces Este pero no no cada tres n veces prisioneros vale no sea O sea no puede ser que solo lo pase a él o sea sí como que varía Pero puede ser que pase a uno y lo vuelva a pasar luego luego no O solo pase a otro y pum lo vuelve a pasar a ese mismo entonces bueno eh Y los prisioneros digamos que viven aquí en el cuarto r Aquí están los prisioneros y ellos prisioneros tienen un interruptor l3 Vale entonces bueno los guardias les dicen eh la condición para que los
(33:14) liberemos es que todos estén bañados y alimentados Okay entonces reglas los prisioneros no hablan no O sea no tienen lengua este eh Bueno o sea como que no sé bueno no que no tienen lengua pero no pueden hablar o sea cero cero cero pueden hablar entre ellos pero pues les dicen Pónganse de acuerdo antes de empezar este juego y este pero pues ya una vez que empieza no pueden hablar Vale entonces yo les doy todavía una suposición Bueno una suposición más que es que el estado inicial de todos los interruptores es
(33:56) off vale entonces su su objetivo es diseñar una solución un protocolo para que los prisioneros puedan liberarse entonces Bueno después argumentar porque su solución es correcta es decir tienen que decir bueno no todos los prisioneros tienen Ah bueno eh para argumentar esto pues este es como decir no que su protocolo satisface su Bueno tu protocolo satisface esta línea no que una vez que alguien dice ya estamos bañados entonces e realmente Qué hacen entre sí O sea pasan solo los aprietan sí ha de cuenta que todos los interruptores l1 L2 y l3
(34:51) Pues en realidad son como buanos no H pues o sea son tienen dos estados estados son on y off vale o sea como que pues solo es uno u otro y ya entonces este si lo pensamos así como en hilos Pues los o sea los prisioneros son hilitos y las los interruptores son variables banas y pues un solo bit no cero o es Uno Vale entonces e en realidad hay varias soluciones porque les puse muchas variables no O sea el problema así pues este que manejan en el libro Pues solamente hay un cuarto y solamente hay un guardia no entonces
(35:41) Bueno pero aquí hay como les puse varias este cosas no O sea este hay o sea los prisioneros pueden solucionar bueno pueden ustedes hacer un protocolo para Bueno más bien varios no O sea pueden no hacer el mismo todos Ah por ejemplo lo que nos ayuda un montón es que sabemos el estado inicial de todos los interruptores vale muy bien lo de las frecuencias m Okay Eh lo de las frecuencias es que por ejemplo es que dejen pongo con otro colorcito Entonces por ejemplo no tenemos e n = a 10 prisioneros no entonces e puede ser no que pase 20 veces no O
(36:48) sea aquí si do n 20 veces entonces en esas 20 veces puede ser que eh Por ejemplo vamos a nombrar los no pasa el prisionero uno pasa el tres pasa el cuatro pasa el el no sé eh Ay Bueno voy a empezar de de cero vale pasa el al Hola de
(38:22) nuevo No no sí es un problema Entonces bueno la solu ya el lunes sacar digo que te registras y luego todavía que te registras tienes que hacer validar algo para que te den el tiempo que quieras y no solo 40 minutos pero bueno entonces seguimos no tenemos Si consideramos voy grabar prisioneros no entonces en las 20 veces por ejemplo pasa el prisionero cero el prisionero cuatro el prisionero luego el uno luego pasa el prisionero no sé El Siete luego pasa al nueve eh luego vuelve a pasar al cero no sé Luego pasa otra vez al seis y luego al
(39:17) cinco entonces si se dan cuenta eh Por ejemplo no ha pasado al dos no pasa al tres y luego otra vez pasa el cero y pasa el cuatro Aquí vamos 1 dos TR 4 5 6 7 8 9 10 11 y no sé luego otra vez pasa al cco al TR al 1 al si al nu 14 15 6 7 eh 19 y al menos por ejemplo pasa al al dos una vez cada 20 veces en este caso por ejemplo no O sea pensando Ay tienes razón este viernes 31 puse Ah lo reviso pero si les dejo el sábado lo corrijo para que quede todo el sábado el sábado este Okay Sí que bueno que me hiir
(40:22) gracias entonces este tenemos no que que cada 20 veces pasa a pasa al menos una vez a cada prisionero por ejemplo en este caso pues se había saltado al prisionero dos no Pero al menos cada 20 veces va a pasar el prisionero dos Vale entonces imagínense si son 100 prisioneros al menos cada 200 veces va a pasar a uno puede ser que repita todos vale los repita los repita Pero al menos va a pasar a uno más o menos este porque se me borró el chat Entonces el que preguntó de la frecuencia más o menos O sea si se dan cuenta Ah qué
(41:12) bueno Eduardo sí se dan cuenta en realidad este problema puede ser resuelto gracias a la frecuencia por ejemplo podemos contar este pues Una vez que se cumplan las dos por n veces no en lo que Y cómo Contamos con el interruptor no como está en off e Entonces todos pasan y cada vez que que que pases pues cuentas no siempre que pasas al cuarto cuentas cuentas cuentas cuentas ú sabes que eh Y por ejemplo Pon a alguien a contar es muy importante o sea para solucionar este problema eh No todos los prisioneros deben hacer
(41:45) lo mismo porque si se dan cuenta eh podemos poner bueno sea la solución podría ser los ponemos unos a pasar lista y a otro lo ponemos sí que pasa lista pero que ese cuente no O sea no todos tienen que contar vale o sea como cada vez que me pasen voy a contar voy a contar voy a contar no Bueno de hecho podría ser así sí podría ser que todos hagan lo mismo pero es bueno Hay muchas formas no O sea una forma sí podría ser porque dice zuriel Por qué era 1 7 9 pasaban dos veces antes del dos Ah porque la frecuencia en que los pasa es
(42:28) uno es al menos de uno cada dos n veces no es decir que por ejemplo si son 10 prisioneros y es o sea esas dos n veces son 20 veces quiere decir que al menos pasa una vez a cada prisionero no entonces tiene que a fuerzas pasar al dos al menos cada 20 veces no o o al Siete o al nueve o sea todos tienen que pasar al menos una vez cada 20 veces vale o sea por eso pero no crean como que que justo Yo sé cómo los deben pasar no Solamente era un ejemplo no de por ejemplo puede ser que repita el cero que repita el nueve que repita o sea puede
(43:02) ser que repita varios no este pero siempre siempre siempre tienes que pasar una vez cada 20 veces no Y si son 100 prisioneros tienes que pasar al menos una vez cada 200 veces Vale y y así Entonces en este caso el otro pasa una vez cada 300 veces no es como que o sea podemos como pues pasarnos no O sea e podemos ir contando no qui quien ya cuente que pasó este una vez cada do n veces no pues podemos ya terminar o podemos nada más contar no que solo contemos la primera vez que pasamos a cada cuarto y este o sea solo pasamos lista no cada vez que
(43:51) pasamos la primera vez a cada cuarto y que alguien cuente vaya contando esas veces que pasó el otro no O sea prisionero que cuente y los otros pasan lista Entonces el prisionero que cuenta este registra no dice Ah mira el interruptor está en on entonces alguien pasó lista y yo qué voy a hacer lo voy a resetear para que alguien más pueda pasar lista y así O sea por ejemplo sería otro no otra solución y también dependiendo o sea por ejemplo podría ser no que cuentes lo que hizo eh cómo nos ponemos de acuerdo no que alguien cuente
(44:25) lo del l1 y alguien lo del L2 y Al final nos decimos en l3 no O solamente pasamos lista en l3 vale o sea como que así hay opciones pero igual bueno vean ustedes Cuál les gusta más para redactar y también para argumentar que su solución es que sea correcta vale o sea cómo vamos a argumentar esto pues vamos a decir mi protocolo realmente satisface que siempre que cada que un prisionero avisa este dice esta línea o sea que todos estamos bañados y alimentados quiere decir que es este que realmente o sea es cierto no por qué ya pues entonces
(45:03) argumentando porque siempre en cada ciclo Ajá Ajá bueno está garantizado que al menos Sí o sea cada 20 veces está garantizado que todos ya pasaron Ajá Exacto sí sí sí sí sí sí Sí o sea puede ser que repitan a alguien no pero pero este pero de que ya pasamos todos Ya pasamos todos no entonces esa es una opción por ejemplo Eduardo no contar Pues bueno este hay que que alguien cuente las 20 veces no de alguna [Música] forma Vale entonces es esa sería el cuatro el cuatro siento que es el más divertido no o sea como que este está divertido no
(46:00) como para discutir con sus compañeros No ver que es qué es lo mejor pero si parece un acertijo Bueno este luego tenemos este último ejercicio que es el de peterson que bueno este cómo va esto no eh Bueno es el Double peterson así le puse Lo bauticé eh entonces este este candadito lo que hace es que ocupa tres candados peterson vale tres candados peterson Entonces por qué Porque peterson es para dos hilos Entonces yo lo que quiero es hacer Bueno o sea lo que sucede aquí es que hacemos un candado para cuatro hilos
(46:46) entonces ocupamos usar eh tres tres peterson por ejemplo lo que hacemos Es eh Este es un lo no bueno los locks todos son de peterson vale o sea son para dos hilos Este es otro lock Este es otro lock vale entonces sabemos que peterson pues puede hacer solo para dos hilos Entonces tenemos hilo uno hilo dos y luego tenemos al hilo tres y al hilo cuatro Entonces el ganador de estos dos o sea del primer lock va a pasar entonces por ejemplo no sé si gane el hilo uno pues se va a enfrentar con el que gane de acá no se el hilo tres no no
(47:28) enfrentan y al final solo va a pasar uno el hilo no sé el tres imagínense no Entonces es una forma de hacer y se parece en realidad si se dan cuenta filter pues es una generalización de peterson y se parece como un poco no O sea como que en realidad lo que va haciendo es que Siempre va dejando a uno por nivel Entonces se podría ver peterson de esta forma no O sea como que es muy bonito verlo así O sea en realidad sacrificas a uno por nivel y es como ponerle un candadito Peters en cada Pues en cada como pu hacer un
(48:01) árbol no poner un cada un c peterson en cada este nodo no de este árbol y sabemos que siempre va a ganar uno entonces hace uno se va enfrentar con nosotros y así pum P O sea podremos hacer una generalización enor pero bueno es solo es para cuatro hilos este candado entonces Bueno lo que tenemos que hacer aquí eh Bueno y aquí se ve el código vale o sea tenemos aquí se eh variables compartidas tenemos tres candaditos eh luego yo les puse que aquí o sea código vale o sea no si lo ponen en Java no va a correr así tal cual
(48:39) entonces cada quien tiene su propio ID Vale entonces tenemos un ID único vamos a suponer no que el hilo uno pues tiene el uno el dos el dos tres y cuatro Vale entonces si tengo el id1 o el dos voy a tomar el candado uno y si tengo el tres o el cuatro voy a tomar el dado dos y al final el que pueda salir de este digamos que del de la línea el que el que el ganador de la línea 10 no que va a ser pues el que tenga el id1 o el dos y el ganador de la línea 12 se van a enfrentar para tomar el de la línea 13 el candado TR y también se van a dejar
(49:15) en esa forma primero se deja el candado 3 y luego dependiendo si tomaste el candado un pues lo dejas o si tomaste el candado dos lo dejas vale es como este una forma no de reciclar el hilito o sea de usar peterson para cuatro imagínense también se podría usar para oo hilos o para 16 no Okay entonces van a ustedes a demostrar analizar si se cumple con uno exclusión mutua deadlock free exion free y Justicia V o sea sobre este sobre el Double peterson entonces Aquí les puse que Pues en realidad este buen aquí o sea si cumple con con
(50:06) la propiedad Pues otra vez no muestra la invariante que se mantiene no en este caso pues si son más pasitos no O sea pero no son igual muchos no somos cuatro hilos entonces también pues no hay necesidad como hacerlo generalización no pero pues sí O sea como que algo se mantiene en en cada paso de o sea de este arbolito y sabemos que en cada un tenemos un peterson aj se ve tudo ese no pero bueno ustedes como lo ven así fácil ahorita como sea si yo les digo a ver sabemos que peterson cumple con estas tres no peterson será que será que esta
(50:45) generalización cumple también con estas tres pues es como esta Double peterson cumple con estas tres vale Y bueno este y bueno no hace falta que que demuestren peterson peterson ya lo demostramos Vale pues si me dicen este este candado como nada más mantiene Ay mir este candado como mantiene lo mismo en cada nivel y peterson lo mantiene Entonces se cumple no O sea no me hace falta que que me pongan otra vez la demostración de exclusión mutua de peterson ni nada de eso vale o sea no más como considen que que sabemos que peterson s cumple con
(51:25) estas tres y ya entonces bueno importante no notar si peterson este cumple con justicia o sea ustedes lo ven así no peterson cumple con justicia eso no lo analizamos analizamos filter y analizamos Bakery no peterson cumple con justicia es la pregunta no h y luego no peterson si si cumple no con justicia eso nos amerita que Double peterson también Vale y ya pues me me argumentan Pues sí o no No por va Bueno no lo siento tan largo la verdad no la ch está como hacerlo no O sea como que pues no es muy eficiente pero bueno como que como que
(52:15) este como que se implica no de se implica de de Peters no al menos exclusión mutua siento que está así como muy directo vale Y pues sí se parece a filter Okay entonces alguna duda Vale pues creo que aún no no pero cualquier cosa Me comentan va por mensaje privado del discord o o en el discord en el general vale Y este igual de su práctica si todavía tienen dudas No este pues no hubo dudas el jueves en realidad o sea como sobre la práctica pero pues bueno siento que está muy sencillita esta no pero igual no importa
(53:13) si tienen dudas este o cosas así como de la entrega algo así me Me comentan va el próximo jueves ha la s y ya se les dejo así su práctica dos igual no revisamos los ejercicios y este tenemos les doy igual este que es la entreg del sábado o sea de este sábado al siguiente más o menos es lo que les dejo en prácticas y está un poquito más larga Pues sí tampoco mucho Vale entonces nos vemos el lunes que tengan buen fin Bye by recording stoped Hello
