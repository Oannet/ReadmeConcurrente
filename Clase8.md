(61) Clase 8 2024 08 15 - YouTube
https://www.youtube.com/watch?v=n_LZmOhvWiA

Transcript:
(00:29) al al ah Hola hola Ahora sí
(01:44) verdad ya me [Música] escuchan Sí vale gracias Es que veía que no se movía mi micrófono y di nadie me contesta eh H H H recording in
(02:47) prog Bueno ya le sub su su práctica y como les había comentado lleva este primero como parte importante del contexto estees primero como contexto de lo que vamos a ver a hacer primero Esa práctica Pues así como la tarea un también está siento que sencillita no no es como para Ir calentando este Pero bueno tampoco creen que van a ser muil desp pero realment muy sencilla entonces la tienen que entregar el 24 o sea el sábado pero de la siguiente no no Enton tenemos bastante este Eso es en entrega luego bueno ahora
(03:39) sí ya vemos varios 16 creo que ya Empiezo con esto Vale entonces el contexto no una frase muy bonita de que dice que pues es que la necesidad de sincronización a veces ustedes me preguntan Bueno o sea y a fuerzas tiene que ser paralelo pues no O sea con que vayan una después de otra Ay esper mi conexión está mala este Bueno me me escriben no si no si no
(04:52) se me no s no me escucho bien No se ve bien Okay entonces Este sí O sea como Les comento no en realidad no tienen por qué ser justamente en paralelo pero con que tengamos ahí varios hilos tratando de hacer cosas ya con eso Hay un problema y ocupamos sincronización es muy importante entonces bueno Esto pues surge desde los años 60s no por da extra e entonces eh nosotros como les comenté no se tenían que traer ustedes este ahorita Me comentan Cómo cómo tienen sus compus este qué compus tienen Cuántos cores cuántos hilos este bueno ya les
(05:29) digo así los tienen reales e y este pero bueno a pesar de como les comenté no O sea en realidad Este sí es una una preocupación un poco pequeña no sea bueno tampoco es así tan grave pero sí es una preocupación si ustedes tienen compus como pues la pentium no la pentium 4 este que salió en el 2001 pues ahí sí como que ay va a estar van a van a batallar un poco no este y porque que está pentium justo Aquí tengo en este libro este le Intel pentium 4 vieron era de los primeros procesadores que tenían multihilos pero miren aquí la palabra
(06:13) simultáneos y Ahorita les voy a contar No hagan de cuenta que este nosotros tenemos computadoras multihilos desde los años 50 Aquí les pongo desde los años 50 tenemos la disac la seac obviamente pues quien tenía ellas pues nada más eran como militares no empresas o este o sea eh pues muy pocas personas en el mundo no pero sí había y eran multihilo Eh entonces bueno ustedes dirán No cómo que o sea como rayos son multihilo pues miren Es que aquí está la diferencia una arquitectura multihilo este es muy importante tiene este de un
(06:56) solo procesador tiene esta capacidad de seguir múltiples programas de ejecución sin la necesidad digamos que que el software diga este de que se haga esto en software sino que se hace en Hardware digamos que en Hardware lo que tienen en vez de tener Pues digamos que una una una sola este un solo registro como para guardar e el contexto de ejecución tenemos varios por ejemplo en vez aquí en esta figurita no tener uno pues tenemos no sé cuatro no Y entonces lo que hacen estas computadoras viejitas de los años 50s
(07:34) que ya eran multihilo es que pues no podemos ejecutar este pues estos hilos al mismo tiempo pero eh lo que nos va a permitir es que se guarde como que el proceso de cada hilo o sea como que su historia de cada hilo en Hardware y no en software Entonces esto les permitía desde los años 50 por ejemplo primero se ejecutaba lo que tenía el de color azul no este el este la memoria de color azul luego la memoria en color rojo luego la verde y así entonces para que se pudiera ejecutar otra vez la azul pues había que
(08:08) parar la verde y poníamos la azul y así O sea como que era en realidad modo secuencia pero se iba guardando como que lo que llevaba cada hilo o sea eran hilos pero este no no realmente simultáneos a eso se refiere Entonces desde los 50as tenemos esto no eh tenemos este multihilos pero no simultáneos O sea de ahora sí que esto yo V tuvo yo así e entonces Bueno es muy importante que que esta capacidad de seguir múltiples programas pues la tenían desde el Hardware y no desde el software o sea por eso este hablamos de multihilos no
(08:50) desde los 50s y por eso en los 60s da extra dice Bueno o sea sí En realidad ocupamos sincronización a pesar de que no es simultáneo no no se Ejecutan estrictamente en paralelo ocupamos sincronización Okay entonces Eh Esto es no las multihilo Ah bueno esta imagen pues la la saqué de de este libro abajo tienen las referencias no porque también si quieren revisar ahí les digo como que sab tanto del chisme ahí de que por ejemplo cuándo salieron las multihilos simultáneas y este cómo se componían las multihilos este no simultáneas las de
(09:27) los 50 y así o se está todo el chisme no de todos los los procesadores Entonces si se dan cuenta eh dado esta definición pues tenemos las arquitecturas multio Pues en realidad no son exactamente iguales a una arquitectura multiprocesador no porque pues multio pues desde los 50s no multiprocesador ahí sí desde los 2000 este entonces bueno esta las arquitecturas multiprocesador es bueno cre des desde los 90s en realidad Pero bueno 2000 es ya este accesibles al público común no como nosotros Entonces Bueno una arquitectura
(10:12) multiprocesadora Ahora sí pues está conformada como lo dice el nombre pues ahora tenemos múltiples procesadores no eh Entonces ahora sí A diferencia de la otra Ahora sí podemos ejecutar eh dos hilos o más en el mismo en el mismo ciclo O sea sí podemos tener de forma simultánea no no se forman no como en esta línea no se forman realmente son se pueden ejecutar de forma paralela este y esto es debido a que los recursos de ejecución de están distribuid en los procesadores y a bien escuchamos también es cierto o sea todas
(11:13) nuestras compas ya tienen ambos Por qué Porque Ah ya no escucho ahora okay esperen conectó mis dispositivos a ver me escucho un poco mejor si me escucho todavía Ah okay ya se escucha bien Bueno okay me avisan porque como que está medio inestable ahorita en la tarde V Okay entonces bueno puede repetir lo último que dijo sí este a ver ay ya entonces no se me escuchó bueno e entonces la arquitectura
(12:20) eh Ya sí vamos a a repetir todo esto la arquitectura multihilo este como les había comentado desde los 50s no Entonces si si ahorita ustedes dicen yo tengo una arquitectura multihilo multiprocesador y multicore no en mi compu Pues sí los tres son ciertos Solo que es muy importante notar que en realidad las arquitecturas multio nacen desde los 50s Aunque tenían los procesos o sea digamos que podían ejecutar distintos programas Sí pero no de forma secuencial No perdón no de forma paralela No al contrario eran secuenciales O sea primero ejecutamos
(12:59) los del azul luego lo del rojo luego lo del verde y para que ejecutar través lo del azul ocupábamos para al verde y así solo había como este una forma de ejecutar una sola cosa a la vez y no s hasta los 2 miles que salen estas computadoras ya este multiprocesador que lo que nos permiten Ahora sí es tener Hilos de forma bueno que se Ejecutan de forma simultánea Okay entonces eh En la actualidad nuestros procesadores o sea además de tener ten nosotros varios chips no O sea chips o procesadores en nuestra compu además
(13:34) tenemos cor o sea los los procesadores tienen a su vez cores miren en esta figurita se ve muy bonito entonces los procesadores por ejemplo este mi comp un ya busqué bien y la mía tiene 10 cores no y de hecho ni siquiera me dicen Cuántos procesadores porque es sm no te dicen bien las cosas pero sé que tiene 10 cores entonces este Qué es un Core y Qué es un procesador pues como lo vemos aquí ahora sí que este un Core está contenido en un procesador miren aquí se ve justo busqué una figurita en internet donde se viera bonito no mir
(14:20) por ejemplo un Core es una unidad del procesador O sea de nuestro cpu un Core lo que tiene pues es una unidad de control su propio reloj su registros su alu O sea que quiere decir que puede o sea que si nuestra compu tiene varios cores quiere decir que cada Core puede tener un hilo no un hilo real entonces quiere decir que si nuestra si nuestra cpu tiene cuatro cores quiere decir que puede haber cuatro hilos que Ejecutan cosas al mismito tiempo porque no tienen que pedirle recursos al otro no lo que sí comparten es un controlador y pues
(14:59) obviamente no todo esto de de input de entrada salida este comparten caché además comparten otro otro tipo de memorias no Entonces es distinto por eso podemos decir que un procesador tiene varios cores no y y como les digo o sea en realidad Por ejemplo yo les digo mi comp tiene 10 cores Yo sé que tengo 10 hilos reales no 10 hilos que pueden ut arse de forma simultánea e y O sea que pueden hacer cosas de forma totalmente paralela No eso eso significa entonces eh aquí les pongo no sea como Bueno si lo leen tal vez después a detalle o pero
(15:45) que ya lo hayan revisado entonces eh cada procesador Además este pues tiene su su arquitectura particular depende qu este Qué modelo compremos o sea bueno qué compo tengan tienen una Intel pues probablemente tengan una arquitectura distinta no O sea este Cómo tienen los cachés no Cómo se conectan los cachés l1 L2 l3 este Cómo se conecta incluso cómo está interconectados ambos chips no O sea ambos procesadores que contienen sus cores Cómo están este conectados o sea esto cambia y es es un ejemplo pues simplemente una arquitectura moderna no
(16:23) moderna ahora sí que de los 2000 para acá Todos tenemos más o menos algo así parecido pero cambio dependiendo la computadora entonces bueno yo les estoy comentando No aquí de bueno cada Core este en realidad guarda un hilo no O sea bueno es un hilo simultáneo pero este en realidad hay dependiendo del fabricante por ejemplo Intel eh ha desarrollado este Intel ha desarrollado e este pues como formas no en las que de hecho cada cor pues tiene la capacidad de tener hasta dos hilos y te aseguran ellos que son dos hilos simultáneos no pero
(17:12) dependiendo revisa que también amd también tiene una tecnología similar de Apple la verdad no no he visto pero la realidad es que o sea lo que s es una seguridad es que cor equivale Pues al menos a un hilo real simultáneo vale Pero bueno si O sea ya eso va a ser todavía más este específico no dependiendo Incluso si compraron O sea si tienen un chip de Intel que tenga esto que se llama aquí Este lo puse o sea lo de hiper trading así le dicen entonces que es la capacidad que cada Core tiene más de un hilo no y Bueno
(17:46) aquí dice que son dos hilos los que tiene por Core no entonces este okay Bueno entonces también luego este espero que bueno Más o menos les haya quedado claro No multihilo pues es la capacidad de tener varios hilos no multihilos simultáneos la capacidad de tener varios hilos pero que además se pueden pueden ejecutar cosas de forma paralela Y eso multihilos los tenemos desde los 50 multihilos simultáneos desde los 2000 de forma este Cómo se dice pues pública no O sea como para comprar como compu de casa y y a su vez con los multihilos
(18:31) simultáneos tenemos nosotros arquitecturas multiprocesador o sea de dos chips por ejemplo dos chips o tres chips o cuatro chips no depende que compo tengan y además cada chip tiene tiene un número de cores que es la capacidad de almacenar un hilo y este hilo que se puede ejecutar de forma simultánea no entonces este Esas son las diferencias no tenemos multihilos multicore multiprocesador Vale entonces yo les si alguien les dice y los nuevos procesadores Qué hacen Ah pues lo que hacen Es que este optimizan lo más para
(19:12) crear hilos virtuales digamos que pues es lo mismo No abajo pues pasa lo mismo tenemos cores no Por ejemplo si tienen Intel pues tienen hasta dos dos hilitos por Core no imagínense entonces lo que hacen estas De hecho son como lo que optimizan las Pus no pues es que te aseguran que está tan optimizado que estos ocho hilos simultáneos se ven como 16 o sea es lo que te aseguran no y que y que el procesador aprende y que se enfría solito y que el enfriarse solito lo que hace es que te mejora el rendimiento o sea como que ya son cosas así pero bueno
(19:52) o sea no es innegable que abajo en realidad tienes esto no O sea sí obviamente yo creo que pues debe haber haí unas gráficas no este no pues Miren mi sistema de enfriamiento es más increíble y por eso esto no O mi sistema para cambiar de un de un hilo a otro es más rápido y por eso parece que en vez de tener ocho hilos reales tienes 16 no O sea como que te da este Pero bueno o sea es ya son cosas así por arriba no gente que se dedica a eso las marcas se fabricantes no se dedican a esto pero les digo sea en realidad si
(20:28) nosotros quisiéramos sí ver de seguro cada quien tendría una arquitectura diferente no O sea sobre todo los que tienen fabricantes distintos Pues se vería aquí abajo bastante distinto no Okay entonces Esas son las tres cosas distintas luego este bueno de como multio multicor multiprocesador y además yo también luego en las clases luego seguro los ando mareando que a veces les digo hilo y a veces digo les digo proceso no este Por qué Porque miren en realidad un un hilo o un proceso el gran este el gran este diseñador No pues del
(21:09) carnel y de Linux no y de todo lo ahora s que si dan cuenta pues él tiene todo que ver con hilos y procesos No él dice que pues un hilo un proceso no le gusta diferenciarlos él dice que ambos son contextos de ejecución es decir como que una unidad de ejecución en el procesador Okay pero bueno nosotros este pues los podrem o sea eso dice Linux y Linux y hay varios no también autores que respaldan esto si ustedes se van a internet es una pelea no en Star overflow Así que no que un un proceso es lo mismo y hay otros que te van a decir
(21:52) no este un proceso es un programa en ejecución y un hilo es un proceso que puede ejecutarse de forma paralela con otros hilos concurrentes y compartir recursos por ejemplo no O sea tomando Este ejemplo un proceso podría ser como ejecutar un programa en la máquina virtual de Java Okay consideren así un proceso y y este y entonces un proceso es un programa en ejecución y este este digamos que esta este programa que se ejecuta en esta máquina virtual de Java Pues tiene un hilo principal no Pero además como nosotros vamos a usar este
(22:38) vamos a hacer programación multilog pues vamos a llamar así vamos a crear varios hilitos no entonces en bajo esta definición Pues el proceso sería el programa principal de Java y a la vez este proceso se divide en hilos no O sea como que hay hay esta definición Pues un está contenido en un proceso Vale entonces el proceso es capaz de ejecutar varios Hilos de forma concurrente y permite que compartan recursos no por ejemplo o sea como les digo un programa de Java como lo vimos ya en clase como yo les decía miren
(23:17) tenemos dos variables compartidas entonces imagínense que tenemos al hilo a y al hilo B entonces quiere decir que estos dos hilos comparten recursos no y el programa principal es el que jala los dos pero bueno por ejemplo ya viéndolo aquí en la práctica en Java Pues en Java siempre tenemos un hilo principal que es el que jala o sea el que le das a ejecutar y es el que jala el programa El que lleva el tiempo general del programa y además tenemos los dos sub hilos no a y a b que comparten o hacen cosas de forma concurrente Okay entonces por eso
(23:51) yo a veces uso de forma indistinta proceso e hilo no porque pues el proceso contiene a los hilos entonces Pero si yo les digo proceso Pues también puede ser que les está hablando de un hilo no O sea por eso los uso a veces de forma indistinta y se me va la onda y de hecho también lo hacen en el o sea en la literatura también ustedes pueden encontrar que hay autores que hablan de procesos no de process One de process two así sobre todo los los los que son muy teóricos los que son muy muy este más enfocados a la práctica les encanta
(24:25) y sobre todo los que programan en alto nivel como en Java como como en rost como así este les encanta hacer esta diferencia de que no que un hilo Es simplemente este Bueno un hilo está dentro de un proceso y y un proceso puede tener varios hilos o sea les encanta hacer esta distinción no pero bueno o sea yo eh Pues no O sea bueno no me parece pues no sea tan importante no O sea pueden usarlos también de forma indistinta y y yo los les creeré no Okay entonces un proceso como les pongo aquí pues les digo se considera también como un
(25:03) conjunto de hilos que comparten el espacio del proceso no que es memoria disco cpu este ciclos del procesador entonces bueno ahora sí no ya ya que tenemos todo este contexto pues ahora sí que es la programación mtil en Java o sea cómo se da no cómo funciona o sea porque ya ustedes ya les ya les conté No que pues cada hilo vive en un cor no pero pues eso es como a bajo nivel no pero nosotros estamos en Java y nos damos el lujo de olvidarnos un poquito de todo eso Entonces bueno arquitectura de de la bueno y los hilos como bien sabemos
(25:48) nosotros ya ya tienen tiempo usando Java este pues todo corre sobre la máquina virtual entonces como que pues es nuestro nuestro enfoque de estudio entonces la máquina virtual pues tenemos ahí varias varias áreas no pero bueno la que nos gusta a nosotros y las únicas que nos importan No pues van a ser esta área de trad synchronization que está aquí y la de Memory management no que este que pu está ahí el colector de recolector de basura eh Solo nos interesan en realidad esas dos vamos a estar si llegamos hablar de algo son de
(26:29) esas dos pero no lo demás no nos importa si acaso tal vez este H cuando comparemos el el performance no el funcionamiento de de este de algunos programill pero yo creo que será por la práctica cuatro pues tal vez hablaremos un poquito de los compiladores no sea como si hace alguna diferencia compilarlo de una u otra que sí sí la hace pero pues tampoco es así mucho este Pero bueno o sea no no no hay más vale Y bueno lo único que tenemos que saber de todo esto es que un hilo en Java es equivalente a un hilo nativo no
(27:08) del O sea si yo les digo que mi comp tiene 10 cores No yo tengo una Apple entonces quiere decir que tengo 10 hilos nativos Entonces este pues en realidad si yo creo 10 hilitos Pues yo creo que ya el 11 que cree pues va a ser un hilo reciclado no O sea no no se va a ejecutar de forma simultánea se puede crear otro o sea se puede crear más Hilos de los que en realidad tiene tu compu pero digamos que en realidad los 10 o sea los que yo tengo no Y eso Si no es que tengo yo abierto mil otras cosas no este Pero bueno o sea ya el 11 Pues
(27:43) no va a ser real el 11 va a ser un hilo reciclado que va a tomar la tarea de ese otro y que va a decir Ay mira soy un nuevo hilo pero en realidad no O sea no se estás ejecutando de forma estrictamente simultánea este Bueno entonces cada hilo en Java va tener una región de memoria y esta región como ya les había comentado es la stack la stack de cada hilo que es su memoria local no su memoria este propia de cada hilo y esta Va a contener este variables locales no configuraciones de métodos todo esto va a guardar la stack que van a ser
(28:18) ejecutados por este hilo nada más y el tamaño de estas stacks pues Ah bueno me equivoqué la variable no este el tamaño de las stacks es una variable pues ya de la ya mach no es como que nosotros podamos asaros más memoria a los hilos entonces este cosas que tenemos que saber no que así está [Música] luego en relación con digamos además entonces además de las tenemos creemos un objeto as porva virtual va va a guardar en la javip la memoria eso así Alo que ya está no la
(29:25) vir Entonces cómo se va a guardar Hip pues la Hip tiene pues les encanta decir no que es rápida y que es safe no O sea que es segura para los hilos es decir que de hecho lo que o sea además de esta de esta figurita en realidad es como que cada cada hilo pues tiene asignada una región de la Hip no O sea si un hilo crea algo en la Hip est o sea bueno de forma eh compartida No para todos pero el hilo es el que lo crea pues va a estar asignada en una regioncallao interesante este ya la parte práctica Ahora sí Bueno
(30:26) unilo en Java eh ya Java pues este trae todo implementado No pues es una instancia de la clase Java no y aquí está el link y ahí pues pueden ver todo lo que le incluye este pues y que es simplemente un objeto Okay entonces Cómo podemos crear un hilo pues Existen dos formas distintas la primera pues es extendiendo la clase TR y la segunda es implementando una interfaz rable okay entonces bueno ya aquí les ahorita vamos a los ejemplos vale ent unilo Este tiene los siguientes atributos tiene un ID tiene un nombre que le podemos asignar
(31:11) tiene una prioridad y tiene un estatus no entonces el status este por ejemplo New pues es cuando simplemente creamos al hilo Run es cuando ya está siendo ejecutado block es cuando está bloqueado el hilo esperando algo no y v eso lo vamos a ver cuando veamos monitores eh también tiene Time Waiting que es cuando está esperando estoco es como una sub de bloqueado pero pues aquí está está bloqueado pero esperando por un lapso específico y termin que pues es cuando ya ya terminó No ya hasta pues ya va a dejar de existir el hilo depende no
(31:52) Si hasta le perdemos la la referencia pues ya ya se acabó Entonces miren lo que les comento este está muy bien entonces así Bueno me Me comentan no si no se me escucha bien o si me entienden Okay entonces cómo queremos unil en jaa Pues de esta forma no eh Esta es una clasecita example que tiene aquí su su Main no en entonces aquí este le comparto Bueno vamos a crear una instancia de extend y otra instancia de esta de TR les voy a enseñar th St simplemente es este una clase que ya vieron lo que hace pues es que extiende
(32:49) TR como Les comento o sea es una forma de crear un hilo extiendes TR y siempre que creas esta clase Pues tienes que este que que que cómo se llama crear crear O bueno sí como crear el método pero tiene un nombre no Java Pero bueno o sea como esta clase de TR tiene por default Run siempre siempre tienes que este crear este método Okay entonces lo que est dentro de The ron Ajá sobreescribir sí sobreescribir es la forma bien tienes razón Camilo es la forma no de decirlo tienes que siempre sobreescribir la clase Run
(33:30) porque si no lo haces pues este te va a marcar error O sea no pues creo que at es una clase abstracta entonces a fuerzas tienes que hacerlo eh luego este en TR name por ejemplo lo que hacemos Es que tenemos el nombre del hilito no eh cada hilo va a tener nos referimos a cada hilo como thread y aquí con current thread podemos obtener el nombre y también podemos obtener el ID también si le ponemos ID Pues también no obtenemos su ID Ya pues simplemente es lo que hace esta clase este imprime su nombre no Y esta otra miren lo que hace aquí
(34:15) pues es simplemente crear una instancia de esta clase de trent el hilo a Vale y el hilo B es otra forma es la segunda forma de crear un hilo que lo que es es este simplemente es que podemos implementar la clase rable igual sobre escribiendo la clase Run aquí puse lo mismito no se hace lo mismito o sea tenemos el nombre del hilo ya está Entonces cómo se ejecuta pues sucede de esta forma la clase que extiende la clase cl el nombre del Lito es TR c no Y la otra la que implementa la clase la interfaz de rable es TR 1 Entonces es distinto
(35:07) Cómo se crean los hilos porque aquí simplemente lo que hacemos Es crear una instancia de TR este tal cual o sea de la clase de javal y le pasamos el rable porque el rable lo que tiene o sea esta interface que que implementamos es este es sobreescrito digamos que aquí pues sobreescribir la clase pero ambos hacen lo mismito o sea simplemente son dos formas de este aquí está simplemente son dos formas de hacerlo no entonces así se vería pero si se dan cuenta puede ser que no se ejecuten justamente en el mismo este al mismo tiempo no por
(36:01) ejemplo puede ser que por ejemplo en esta ejecución primero se imprimió TR un no y luego TR c0 o sea puede ser o sea en realidad todo lo que escribas aquí este Ah bueno también comentarles No aquí pues lo creo no Entonces digamos que aquí sería como New no O sea el estado New del hilo y ya cuando le das en r aquí en Start pues es el estado rable del hilo No eso es distinto entonces así Simplemente los creas y es lo mismito y les digo no no siempre se Ejecutan Ah lo guardé no siempre se Ejecutan en el mismo orden Lo que pongas en Start lo
(36:41) que se ejecute ya Cómo se ejecuta el método Run este no controlas eso no este entonces esa es una forma la otra es este bueno es así como muy sencillita no luego Esta es un ejemplo Este es un ejemplo de cómo se crean distintos este hilitos extendiendo igual la clase TR enseñ Cómo se ve Ah Aquí está bus Bueno este aquí creas una clase no TR St simplemente extiendes y por ejemplo la clase como tal puede tener una variable este eh un atributo no que en este caso sería count tiene sus métodos por ejemplo además de
(37:45) ROM pues puede tener más métodos en este caso es increment no entonces lo que hace esta clase pues es un contador y aquí otra vez obtenemos el nombre del ID y por ejemplo este lo que hacemos Es crear a este tres hilitos no a b c y le damos Start si no le damos Start No pasa nada vale Entonces miren aquí es como curioso porque en realidad el contador está en cero y todo simplemente lo que hacen es poner la cuenta en uno por qué Porque como bien sabemos en Java si creamos tres instancias distintas no de un mismo
(38:24) objeto quiere decir que en realidad esta variable Ay se me olvida esta variable es local no o sea es local a cada hilo cada quien tiene una propia copia de count no entonces este si le damos increment No pues nada más van a este van a estar haciendo por ejemplo bueno [Música] puedo cambio de de inglés español y ve o sea simplemente contar dos veces y todos cuentan dos veces y ya está no O sea no no hay más porque no se comparten en realidad las o sea el contador cada quien tiene su propia copia de su contador no
(39:22) este otro ejempl no es qué tal que ahora hacemos el mismo contador pero ahora este en vez de extender la clase tred Ahora implementamos la clase runnable eh También tenemos Ahora sí count no un atributo de la clase y ahora sí este atributo van a ver que si creamos un solo objeto runnable y creamos tres hilos y a los tres hilos les pasamos el mismo objeto runnable eso como que O sea qué les suena pues como que ahí ya van a compartírselos no O sea realmente va a ser o sea va a ser un mismo contador y se van a y todos van a
(40:02) contar sobre el mismo no Entonces ahora sí V por ejemplo pues como que si ustedes me dirían no Bueno y qué me recomienda usar siempre o sea extender la clase tred o implementar la clase Run siempre no pues la realidad es que es lo que quieran hacer no O sea no no es como quees no sé una ha se el y la otra este increíble no pero sí en este caso si queremos hacer Pues un objeto compartido y pasarle el mismo objeto a los tres no quiere decir que en este caso eh esta variable y está compartida no Aunque pues sí si se dan cuenta por
(40:46) ejemplo aquí este se imprimen de distinta forma pero por ejemplo el hilo cero si pone este eh el anterior el valor anterior era cer no est es uno y este es dos pero no Siempre es lo mismo No Bueno aquí otra vez 0 1 2 Mira as casi siempre se Ejecutan de la misma forma nada más cambia como Cómo Se imprime no O sea en el sistema de de entrada salida sí cambia pero regularmente el hilo dos es el que tiene la cuenta en dos no como que no se respeta esto no casi siempre los ha alguna ejecución donde no casi todas yo creo que porque son
(41:38) bien poquitos no se forman buen como que si este van ejecutar método r uida solo hac un Inc casi que en el orden en el que se lama el este Okay entonces como les comentaba en realidad el hilo principal o sea o el programa no el que corre sobre la llave virtual Machine pues va sobre o sea como que tienen un solo hilo no es el que jala todoos los demás entonces bueno cosas que podrían pasar es que el contador no no terminara miren por ejemplo Aquí está curioso porque en este ejemplo el el hilo M es el hilo principal no y
(42:30) Mientras por aquí pues todos andan este aumentando el Bueno creo que solo tengo otro hilo Solo tengo el hilo cero miren este tengo aquí el método m no y lo que hago aquí pues es guardar el nombre del del este del hilo principal vale Entonces digamos que quien ejecuta el método Main quien ejecuta el método Main es el hilo que se llama aquí Se imprime es el Main ya vieron es el hilo Main el que ejecuta el método el método m y este Ah bueno entonces creo aquí unit y con esta clase esta clase que hace Pues es que implementa la clase
(43:30) Run otra vez tiene su su método Run pero miren en el método Run yo le le digo mientras sea verdadero y este yo le paso verdadero no este duérmete 500 nanosegundos luego imprime tu nombre este incrementa el contador y bueno este Catch pues simplemente es para porque cada vez que utilizas pues pu te puede salir una una excepción de interrupción no entonces pues siempre tienes siempre que quieras utilizar Ah ot otro método te incluyen en los tenemos ya Y tenemos este entonces son esos dos pero bueno siempre que quieras uar tienes que poner
(44:21) un cachar la interrupción Entonces si se dan cuenta este método pues no termina no No termina Entonces el hilo a este Perdón hilo m Pues aquí en realidad el ya terminó no este hilo ya terminó pero el hilo a es el que utiliza el Run este de infinite Counter pues no tiene término no Entonces cuando se ejecuta cuando se ejecuta este este este programa pues nunca termina no a pesar de que el principal ya acabó Cómo es una forma de hacerte de que realmente cuando acabe el termine todo podemos nombrar al hilo a como demonio hay dos tipos de hilos en
(45:24) digamos que este en Java que en general casi todos los lenguajes tienen este que pueden ser hil los normales no o pueden ser hilos este demonios no y lo que hacen es que terminan en cuanto el hilo principal termine si lo ponemos si nombramos a a como como demonio pues ya este va a acabar en cuanto el hilo Main acabe Vale entonces como que ya vieron aquí no O sea como que bueno Yo me imagino no que a preguntar no bueno y que no existe si existe TR Start no que no existe TR este no existe TR stop o sea como que
(46:08) bueno Me imagino no este pero pues no existe Bueno o sea está de desde Java 5 o sea desde hace un buen Por qué Porque este cuando ustedes bua Cuando los programadores usaban TR stop Pues en realidad no sabes en qué puntos se acabó el programa o sea te mandas mandas a que el el hilo se termine pero como ya vimos nosotros en por ejemplo en candados No qué tal que mandamos a que un hilo se se se se pare de repente o sea súbitamente y está justo tomando el candado no y ya no lo libera o o sea bueno eso es como una un ejemplo muy este Eh Pues que se
(46:53) ve muy evidente no que es un problema Eh entonces por eso sabe porque hay otros ejemplos no O sea no sabemos en realidad En qué punto está el hilo como para que este detenerlo de forma súbita no Y puede ser que Si volvemos a correr el programa ahora no funcione si utilizamos thre stop Vale entonces pues en realidad sí existe o sea como que todavía Creo que te permite jalarlo por ejemplo vamos a jugar no este que dijéramos aquí no sale No pero si no sale Qué pasa miren valió queso no este no se detuvo No existe Vale
(47:54) entonces pues si queremos que se detenga esto y no le ponemos un alto en el en el Run No pues hay que hay que nombrar nuestro hilo como demonio e Vale entonces bueno alguna dudita por el momento todo [Música] bien sí me escucho verdad Todo bien vale Este [Música] entonces Bueno les puse un buen de ejemplos así como muy sencillos Pero bueno los pueden correr porque se les dice demonio pues te das cuenta en realidad s no s está raro no O sea en realidad pues es este un concepto que usamos un montón en sistemas operativos
(48:43) no este como cuando se instala un programa se instala Casi siempre como Demonio No por si apagamos la compu se cierra el programa que lo estaba jalando se termina enseguida no O sea como que es Ajá está corriendo el puer tal No sí como que siempre son hilos que se Ejecutan en segundo plano no yo creo que es por eso qué pasa si el hilo es el demonio O sea si es como si el hilo Main es demonio Pues a ver este yo creo que no tendría vamos a nombrarlo [Música] Mira se O sea no podemos colocar al como demonio pero pues te das cuenta como es
(49:46) el principal en realidad el mismo es un demonio no O sea a ver podríamos preguntar porque pues si o sea bueno o sea en cuanto si él acaba Entonces todos acaban no siempre es así es como el principal El que jala a todos no Pero si ni siquiera se puede o sea pero o sea en realidad nombras demonios a los que no son principales no o sea los que creas tú pero bueno es como interesante ver no que en realidad también el que corre o sea el programa el hilo que jala el programa principal Pues también es un es un hilo no y se
(50:28) llama m Entonces sí puede ser que acabe él pero este o sea bueno que que que termine y y mientras losotros no terminen no los ponemos No demonio dentro de un demonio Okay entonces bueno el ejemplo cinco Ah este aquí como es la enseñanza no la moraleja del otro pues bueno Siempre hay que diseñar el método ron para que acá no este en vez de ponerle W TR pues mejor este usemos este pongamos cosas no para que realmente podamos siempre detener lo que está corriendo o seamon es siempre un su pilo Ajá sí o se un deon siempre es un suilo que va a
(51:15) terminar solamente si el hilo principal acaba no Ajá entonces imagínense que le ponemos al hilo principal de pues como que no tiene sentido No porque se supone que ese es el que está jalando a todos Ajá sí como dice Juli un lo damond es siempre un suilo que este que si lo ponemos damond entonces va a acabar en cuanto el principal diga que se acabó no así así funciona de vale Este bueno se claro los en los libros que les presto Pues ahí está como una explicación más detallada pero pues en realidad eso es no eh Pero bueno vamos a ver ahorita no en
(52:01) realidad como que no eh pueden o sea pueden utilizar los H los donds pero también siento que este a veces es es mejor dejar terminar a los hilos y diseñar nuestros programas como bien para que realmente siempre acaben no e en vez de ponerlo seon y que se corte enseguida noo no no se me ocurre como un ejemplo en donde fuerzas ocupemos damond que no sea como instalar un programa en el sistema operativo no como cosas así pero aquí como que no se me ocurre o sea como que lo mejor sería siempre diseñar como les digo no O sea
(52:37) el método Run que siempre tenga pues una salida no por ejemplo este While este Eh Pues mientras sea verdadero que corra no Entonces vamos a poner un método para parar esto no entonces este es el méo stop count que lo que hace simplemente es que pone o sea como que para este ciclo no para que ya no siga Entonces por ejemplo este Cómo funcionaría eh el hilo Main es que ahí está la diferencia como dice Juli este acá miren es distinto cuando nosotros ponemos un hilo de acaba todo o sea ya se corta Tajo todo no este si el hilo
(53:30) Main dice que que terminó todos terminamos no O sea se acaba el programa pero si nosotros si el Main este dice Counter stop count porque Quién hace esto el ilo Main para el programa No aquí en este programa no tenemos damond pero si le damos al hilo principal pues una herramienta para que pare a los demás no O sea pu ahora sí que aquí lo diseñamos de esta forma Entonces el hilo Main dice Ah mira este yo ya acabé o sea mira ahora soy el H no y que acabe todo entonces Todavía este pues deja que corre otro ciclo no O sea lo ponen falso
(54:15) pero por ejemplo puede ser que el hilo ya haya entrado Y entonces este pues si ejecuta la línea 42 no pero ahí se ve como la diferencia paran como este el hilo principal corta no O sea deajo a todos los demonios y si si no lo utilizamos entonces como que todavía le damos chance a que los demás acaben no este es la diferencia es como muy de Tajo ponerlos a todos Demons por ejemplo entonces Bueno aquí este nada más lo que se hace Ah miren lo que hago aquí es que tenemos un un este si estoy poniendo bueno tenemos un
(55:04) en la línea 11 no tenemos una instancia de de Counter este stop Counter que este pues es un es una clase que implementa rable se la pasamos a un hilo no lo creamos aquí en la línea 12 lo ponemos a empezar y este TR Cat lo que hace Pues en realidad es este es [Música] a dormir al hilo m no cuánto 15 nanosegundos este y y ya que acabe no O sea y después en la línea 22 el hilo Main para el programa o sea para el hilo a y este y ya entonces cuando le damos aquí TR Start Pues el hilo Start va a estar imprimiendo y aumentando el contador
(55:55) cada 500 nanosegundos no entonces por eso solo alcanza a hacer a hacer tres no es lo que pasa aquí la diferencia entre entre ambos no O sea y como les digo Aquí no tenemos stop este hay que utilizar Demons o diseñar nuestros programas para que se acabe no y no se queden ahí este por siempre dando vueltas vale Okay Más o menos e s Vale entonces Ok est solo un [Música] ejempo puedes hacer con extendiendo la clase TR la puedes hacer este
(57:00) implementando la clase runnable as todo No nada más que por ejemplo cosas por las que ustedes les gustaría extender la clase TR pues es para tal vez este eh com unificar no su programa o sea como siento que es como más bien como prácticas limpias de Java no e para ponerlos a todos los hilos Que todos tengan la misma lógica no este como que podría ser en este ejempl simplemente lo que les quise compartir es que ven que en en este ejemplo de acá [Música] ex este aquí en este ejito habíamos visto que en realidad todos este los tres hilos no el hilo a
(58:00) el b y el c cada uno hacía una instancia de la clase y entonces en realidad cada quien tenía su propio contador no era un contador compartido No entonces aquí en este otro programa yo lo que les quise enseñar es que pues sí se puede también eh compartir un mismo contador utilizando la clase de de extendiendo la clase tred no entonces simplemente lo que hacemos Es por ejemplo creamos el objeto no el contador Aquí está pu tenes tienes nada más su su atributo count y tiene dos métodos que es incrementar Y obtener el
(58:39) valor son los lo que les puse y este entonces lo que hace lo que hacemos Es que en el método Main pues así creamos una instancia de este contador y luego le pasamos este contador a los al hilo no O sea a la a la clase hilo entonces este bueno la clase y esta clase lo que hace pues es este en el constructor pues guarda no una guarda el contador entonces tiene la mismo la misma instancia del contador entonces quiere decir que los hos van a compartir Ahora sí el contador Entonces ya vieron como que pues no es como que este extender la
(59:22) clase TR no se pueda también podemos hacer objetos este o sea compartir objetos no de forma concurrente entonces aquí lo que hace cada hilo es este yo les puse un for no tenemos son cuatro hilos el hilo a el B el c y el D Vale entonces estos cuatro hilos comparten una instancia de esta clase bueno perdón una instancia de de un solo contador quiere decir que en este caso el contador es compartido y este entonces cada uno pues va a contar aumentar bueno no voy a ponerlo incrementar este 10 veces el contador ent se dan cuenta al final lo que
(1:00:18) tendríamos que tener este aquí el hilo m este imprime el valor final vale Y este Ah mira aquí hay otro nuo Prim el valor final y luego bueno ustedes me dirán aquí esto no esto es nuevo aj y también dice Camilo por acabó en 38 el contador dos preguntas no primero este hay que corresponder a Camilo el contador terminó en 38 porque se acuerdan que yo les había comentado en la clase de la de práctica No o sea Perdón en la clase teórica que cuando no tenemos este candados pasaban cosas raras o sea cierto no hay sincronización Exacto sí s o sea
(1:01:18) perfecto no lo pudiste decir de mejor forma sin sincronización pasa con cosas raras Vale entonces eh Por ejemplo aquí o a 36 37 37 entonces pasan cosas raras no este y y también es muy importante como se habrán dado cuenta eh este hilo Main lo que hace es que eh en esta línea 30 lo que hace es que imprime o sea dice como Dame el valor del contador no eh pero en realidad no este como se se habrán dado cuenta acá en Main no en realidad este aquí yo le le dije al Main que se durmiera tantito 100 nanosegundos y que después
(1:02:17) Este terminara no Ah bueno mejor este este ejempo mejor donde si tenemos no tenemos hilos damond entonces este aquí el hilo también se duerme 15 nanosegundos y y este ya regresa no sea se revive y lo que hace es que imprime su nombre dice hola soy y y para la cuenta no es lo que hace entonces quiere decir que si nosotros no paramos aquí este después de los 15 no y lo paramos más bien y aquí comentamos quiere decir que ni siquiera ni siquiera van a jalar los otros hilos no porque el Main va a pararlo enseguida como que
(1:03:10) este como que se dan cuenta no más o menos este que el Main le vale queso no O sea si hay otra ejecución si él va a parar la cuenta la para o si él va a imprimir algo lo imprime no entonces acá Este el el objetivo de utilizar el hilo el método join Aquí les puse utilizamos join para que este se devuelva la cuenta final la línea 23 y si es para eso pero Además este aquí yao les había puesto Ajá Entonces el método join lo que hace Bueno aquí me fui a otro ejemplo el método lo que hace es que permite que todo se congele hasta que
(1:03:55) termine el método este Ah perdón hasta que termine el hilo al que le pusimos al que nombramos el método por ejemplo en este caso este tenemos así un ejemplo tal cual de cómo funciona join tenemos por ejemplo este es la clase no que extiende la clase TR entonces quiere decir que pues acá tenemos que implementar a fuerzas el método Run no entonces e le damos a a join el número de rondas y miren y este número de rondas es el número de veces este número de rondas que se va a dormir un hilo y acá está no este eh 200 segundos no es el número de veces que se
(1:04:58) duer un 200 nanosegundos y lo que simplemente nos dice es miren voy a imprimir la ronda y voy a imprimir quién soy no entonces este y al final lo que hacen los dos hilos cada quien va a tener un result Bueno voy a ponerlo aquí variable local variable local no son variables locales Okay Por qué Porque este Como creo dos instancias de use join quiere decir que cada hilo tiene su propia copia no de res result y de rounds si compartiéramos un Run ahí serían compartidas pero como cada quien tiene su propio no O sea cada
(1:05:54) quien tiene su el número de rondas que va a dar vueltas O sea que va a dormir y va a tener su resultado no Entonces digamos que lo que hacen ambos hilos es que primero resulta es igual a cero y lo que hacen ambos después es que eh cambian eh result a uno después de las rondas no vale entonces lo que hacen es como se ve este uso de join Me gusta esto para para mostrarles Para qué se usa join Okay entonces bueno eh creamos los estos los dos hilos el hilo a vamos a dormirlo cuatro cuatro veces 200 nanosegundos y
(1:06:40) el hilo B lo vamos a dormir dos veces no 200 nanosegundos Entonces le damos Start a ambos y este solo Vamos a hacer join del hilo B Vale entonces qué pasa cuando solo le ponemos join al hilo B este quiere decir que el el hilo Main no O sea todos los demás hilos tanto el a como como Main vamos a esperar a que el hilo este B termine de ejecutar lo que tiene que ejecutar Vale entonces por ejemplo Bueno voy a ponerlo aquí result de a para que se vea más [Música] bonito azul vale Okay ahora sí no Entonces miren este y
(1:07:42) además ellos van imprimiendo no las rondas e Entonces al final resulta que tenemos que el hilo de a es igual a este o sea es la última línea del Main no dice es la última la línea 41 eh el a no cambió a cero o sea perdón a uno no Qué es el objetivo quiere decir que a no terminó de ejecutar su método ron Okay y el B quiere decir que sí acabó de ejecutarlo si se dan cuenta el B lo que hacen solamente son dos rondas no entonces lo que hace el método join es congelar o sea como que decirle a todos espérenme a que yo acabé para que
(1:08:21) entonces el programa acabe vale Y quién lleva el programa Pues el mail No si nosotros no ponemos ninguno de los dos este join o sea si no le damos join a este si no usamos join qué pasa pues miren no pasa nada no O sea este Ah bueno se Sí o sea salen las rondas de este se alcanzan a imprimir algunas ronditas pero en realidad el resultado de de este del loilo Main Pues el oilo Main No espera no el hilo Main dice yo ya acabé que los demás sigan como no son damons no terminan de ejecutar pero el hilo Main dice no me voy a esperar yo a que
(1:09:13) los otros acaben de ejecutar yo ya acabé y en cuando los otros acaben pues ya no Claro que si le ponemos que el a y el B sean damond ni siquiera van a pasar estas rondas no Vale entonces qué hace el hilo joint pues hace que el hilo Main en realidad todos los demás hilos esperen por este a que el hilo al que le pusimos join acabe en este caso miren ahora el hilo a es el que tiene el join entonces lo que nos dice es que esperen a que el hilo a acabe Para que el hilo Main y todos los demás acabemos Entonces como
(1:09:54) el hilo a pues da más vueltas que el B ya vieron cu el hilo b2 entonces B alcanza a acabar no entonces lo que nos permite Lo que nos hace el método la terminal elain es el TR 3 El tre TR este no no el 3 3 pero el 3 no está Sí el el sería al que le llaman esa como lo llaman el Main lo llaman Main así tal cual no no lo llaman con con nombre Ajá sí miren eh dónde lo haba puesto acá no el TR name el nombre deit Entonces join vamos a ponerlo aquí [Música]
(1:11:06) Este es el hilo Main Ajá ya viste le llaman Main entonces este es la diferencia No si ponemos join obligamos a que Main se espere porque Main ya vieron no si no le ponemos como aquí pues el r de ambos hilos del a y el B pues es un for Pues por eso nuestro programa se acaba no pero si le ponemos un While pues nuestro programa se va a seguir y Main dice yo ya acabé no este y yo ya imprimí y ya entonces se dan cuenta para eso nos sirve el join no nos di espérate a que acabemos todos entonces bueno a que acabe yo si le
(1:11:45) ponemos por eso acá No si le ponemos más bien este solamente a b Pues solamente Espera que vea acabe Ah no Ah no acaba no porque hace más rondas entonces para eso nos sirve join Okay Eh bueno este Ahora sí el programita que les estaba comentando donde comparten los dos el el este Entonces si se dan cuenta aquí ahora ya entendemos no Para qué es el join de los de todos los hilos quiere decir que en estas líneas pues esperamos a que a b c y d terminen de ejecutar 10 veces cada uno el for no O sea entonces quiere decir que como que
(1:12:49) bajo esta lógica este esta línea el hilo Main imprime el valor final pues ya es el que al final el que quedó no O sea quiere decir que Main espera esteo Main entonces de esta forma el hilo Main espera este el valor final si no ponemos join Por ejemplo si más bien vemos el valor por ejemplo antes de los join ya vieron este Main imprime un valor se aquí en la línea 22 que es tres antes no se supone que la línea 32 esperó a que todos terminaran Y entonces se imprimió 36 Vale entonces como les había comentado en la clase práctica cuando no
(1:13:45) usamos sincronización como bien dijo Camilo pues pasan cosas raras no a ve aquí dio 40 Aquí sí dio 40 no pero este el que es el valor esperado Debería ser 40 pero pues el contador como como o sea como suceden distintas ejecuciones este no siempre obtenemos el mismo resultado porque las operaciones se entrelazan de formas raras distintas no O sea no lo vemos pero en la clase teórica lo que vemos es el detallado de las ejecuciones no cosas que podrían pasar este Y entonces aquí como ya analizamos en la clase teórica pues ya
(1:14:23) sabemos no que pueden pasar cosas raras que no siempre nos va a salir 40 Okay entonces este Déjenme ver en cuál voy cuál ejempl ito join Ah Bueno ese es uno y también ese es otro ejemplo cuando este también usamos un contador externo o sea bueno este objeto CNA y se lo pasamos al rable Y entonces el rable ahora usamos la misma instancia para los tres hilos y este entonces quiere decir que el contador pues es compartido No pero en la terminal este bueno en el otro programa en el primer programa de run en realidad pues
(1:15:16) ya estaba compartido No no más aquí como que quise mostrarles que pues podemos hacer lo mismo no O sea con ext cuando extendemos TR y cuando impl rable no hay problema este Pero bueno aquí nada más no lo hice como la cuenta del for nada más aquí pues imprimí así no De hecho si se dan cuenta aquí casi siempre obtenemos dos al final no en la cuenta no pasan cosas tan raras Cuando tenemos solamente a tres no pero cuando tenemos este que cada uno tenía que contar 40 este Perdón 10 y al final debíamos tener 40 y si como que pasan
(1:15:54) cosas raras no o sea como entre más hilos entre más cosas se hagan Eh pues tenemos fallos no por la sincronización Okay entonces este les iba enseñar también el fibonacci No sí bien este Está interesante eh esta clase lo que hace es que extiende la clase TR no y utiliza recursión entonces un hilo el hilo principal pues crea los los dos hilos no y luego los dos hilos quean a su vez otros dos hilos y así no pero pues como les había comentado en realidad tenemos el número de hilos contados no Y además este la llava
(1:16:46) virtual Machine Pues también tiene cada cada cada stack pues tiene su propia límite de memoria y no lo podemos cambiar no Entonces tampoco es como que nosotros podamos cre 18000 hilos un millón de hilos Porque también las tack de Java no O sea pues no nos permite y también nuestro programa pues como tampoco tiene mucho sentido no solo tenemos 10 y queramos 20 pues este claramente los otros 10 van a ser falsos no e Porque no tenemos los cores para para mantener este programación Bueno una programación simultánea no Entonces
(1:17:23) miren estas Este y result son dos variables e que van a estar compartidas por todos entonces Bueno aquí el constructor simplemente Le pasas el el este el número en la serie de fibonacci que quieres no Entonces por ejemplo si le pasas el número vamos primero pasarle cu este entonces lo que hace el Run como como bien sabemos aá sí se está [Música] grabando sí Según yo le di grabar Sí sí sí le di grabar le voy a grabar a la clase Bueno entonces este lo que hace el el como bien sabemos no en fibonacci es este si es n o un
(1:18:25) regresa a uno es la típica de fon y si es otro entonces lo que vas a hacer es que vas a sumar el resultado este del primero con el segundo no Entonces ahí es cuando empieza a aumentarse no la serie fibonacci para que la veamos No si que realmente nos da lo que debe dar Ah mira aquí está 0 1 1 2 3 45 no Entonces yo le pedí la número Ah mira aquí está el número el número cuat en la serie fibonacci es c no 1 2s 3 4 Bueno creo que te cuenta si 1 2 3 cu no sea como que no te cuenta los primeros en realidad sería el número
(1:19:26) seis no Entonces por ejemplo hay que pedirle ahora el número ocho no el número ocho es 34 Ah sí miren Aquí está el número 8 34 entonces hagan de cuenta que lo que hace Es que este el método Main pues Crea una instancia nada más de de este hilo no y lo lo empieza entonces eh le dice que al método Main no le dice Bueno espera [Música] e este le dice al método m que espere hasta que th0 termine no es lo que hace eh Y ya entonces por eso el método 38 pues espera no sea realmente computa el valor final porque si no lo ponemos join Pues
(1:20:27) el método Main acaba cuando quiere Vale entonces Eh Pues cuando es uno pues simplemente este te va cuando es c0 o uno el valor no de N O sea hasta el final de la recursión pues te va a regresar esto pero mientras no sea eso lo que te va a hacer es que te va va a crear otra instancia No va a crear un hilo uno y un hilo dos o sea se va a aut Lamar no y le va a pasar el valor os1 y el valor -2 este hasta que finalmente no O sea como va a acabar la recursión pues va a ser 01 y los va a inicializar entonces este como estamos utilizando
(1:21:08) hilos no Y como ocupamos nos regresan el valor entonces este eh vamos a sumar hasta que este trr1 yr dos terminan no con join y así entonces como que ahí se ve la recursión no va va así hasta que se va a hacer la recursión hasta que llegue a cero a uno y y Mientras todos los demás estamos en espera no se dan cuenta como que les quería poner un ejemplo no de un programa que como que no como que dices Bueno y para qué usas hilos no O sea realmente nos trae un beneficios si a todos los ponemos a esperar No hasta que
(1:21:51) el otro termine y no es como que puedan hacer mucho en paralelo solamente hacen dos no Y eso una sumita como que realmente nos beneficia no de algo usar Este hilitos Entonces este pues sí no como que no miren por ejemplo mi compu valió queso cuando le puse el 12 Ah me todav lo regresó Vamos a ponerle 20 ahora sí no este ya se andaba quedando por ejemplo en 20 mi compo ya se andaba quedando out of Memory no eh Por qué Porque en realidad si se dan cuenta el el hilo cero es el que crea al hilo uno y al dos y el hilo uno es el
(1:22:41) que crea por ejemplo el hilo tres Y cuatro Y el otro crea el cinco y el seis entonces imagínense Cuántos hilos tiene guardados cada cada hilo no este entonces Como cada hilo en realidad tiene un stack determinado o de un tamaño determinado No pues eventualmente llegas a a hacer este out of Memory no entonces como que sí este no un ejercicio podría ser ver si realmente se ejecuta más rápido que la secuencia que yo lo dudo no porque este pues crear un hilo no ejecutarlo O sea como que también te lleva te lleva
(1:23:21) tiempo no O sea y ahí es donde vemos el problema de paralelizar Este programa así como está no es muy paralelizado no y y dudo mucho que que realmente podamos mejorarle algo no este Okay entonces es un programita así eh Nada más para que veamos no lo como lo que no se debe hacer Bueno lo que no tiene caso hacer más bien y este otro es este un programa muy sencillito no este no me quise meter así como dije aquí les pongo para que vean como lo paralelizar porque pues una cosa podría ser hacer ver de cripto este Pero bueno no sé siento que para
(1:24:03) para realizar eso como que hay que este sentarnos no a ver más a detalle el programita y este vi que estaba fácil de hacer por ejemplo tener el determinante de una matriz este se acuerdan que el determinante pues nada más era multiplicar como en diagonal no O sea multiplicamos en diagonal y y este y pues aquí se ve no O sea lo que hace si haces que la eh multiplicas en diagonal uno Este de una fila o sea como este de es 3 por 3 multiplicas en diagonal tres filas y luego le restas en diagonal las filas hacia abajo no entes de acuerdan
(1:24:38) no s eso es que desde la sq no determinante de una matriz Eh entonces lo que hace Este programa simplemente es que Eh pues tenemos así el el hito no O sea bueno eh la clase que extiende a tres eh se inicializa de esta forma entonces cada cada instancia de esta clase lo que va a tener va a ser este eh los números no eh num un num num do num tres y el parcial que es donde voy a voy a guardar el resultado parcial no y este y bueno entonces cómo se se inicializa este Perdón una el constructor es guardar los numeritos por
(1:25:30) los que se va a multiplicar por ejemplo en este caso eh th unilo no va va a multiplicar este la matriz 00 la 11 la 2 2 2 Así o sea bueno lo puse de acuerdo a como va la este método creo que es de cram no no sé entonces eh cada hilito Pues digamos que hace las multiplicaciones que debe hacer donde las hace cada uno lo va a hacer aquí en el método ron y lo va a guardar en su parcial el resultado Entonces digamos que lo que hace este método determinante matriz por TR pues es simplemente este le pasas a cada hilo
(1:26:13) eh este cada hilo tiene los tres números que debe multiplicar okay Y entonces los inicializa y luego esperas a que todos terminen de de este o bueno obtengan no hagan esta multiplicación de la línea 46 Y entonces ahora sí no este una vez que todos terminaron lo sumas y ya no finalmente es ese es el resultado Y entonces este por ejemplo en este caso el resultado de la matriz no es men1 y se tardó le puse para que veamos este Cuánto se tarda 36000 este Bueno 361000 nanosegundos entonces yo lo que les les
(1:27:17) dejé de el ejercicio Vamos a repasar Bueno lo primero que tienen que hacer es es leer el siguiente link e es un link así muy corto no y simplemente lo que nos dice es este es linus thoral diciendo que no que no hay razón para diferenciar hilos y procesos este que pues él personalmente piensa no sea hay que leer esto está cortito no pero bueno es nada más como que lo que piensa linus de de que la gente diferencia entre hilos y procesos que él solo cree que pues son contextos de ejecución no y te explica por qué eh Por
(1:28:02) qué cree eso no entonces bueno sea es como leer eso y escribir en máximo cuatro líneas vale Este A qué se refiere el linus con un contexto de ejecución y cómo lo asocian ustedes con la definición de que un proceso contiene a los hilos no y que en realidad un proceso pues es un conjunto de hilos que comparten recursos no es como que ver así como de bueno como que sí tiene sentido no como que ambos se se retroalimentan como que queden en lo mismo no eh entonces bueno es leer eso luego eh Ah Bueno a mí les quería preguntar Ya
(1:28:40) no les pregunté este alguien me quiere decir cuántos hilos o sea cuántos cores tienen este en su en su en su en su computadora 24 cores Wow no cuál tienes Ah pues sí sí Pues sí y este y ejecutaste también el este esta línea la de get Run Time available procs Cuántos te salieron esa no Ah bueno te deben salir 24 Sí sí vale alguien más mientras Sebastián ejecuta esta Lía alguien más sabe cu cuatro cor Híjole cuál tienes una pentium por ahí tal
(1:29:46) vez 8 una laptop viejita se se ocho bueno Sara yo creo que este cuando andemos por la práctica cuatro este me recuerdas No si no me acuerdo para darte acceso a una Eso es en línea es en línea Te puedes conectar y ya nada más subes tú ah Tienes otra Qué bueno Ay sí que bueno porque cuatro Sí ya o sea cuatro ahorita está bien pero ya después Este cuando vemos el rendimiento de unos este candados ya no Ajá sale 24 sí lo que nos regresa esta línea de processors es simplemente el número de cor porque como yo les había comentado en realidad un
(1:30:37) Core equivale uno real solo que tengan ahí como que las tecnologías de que dicen que dan algo así tengo 12 a lo normal cre que o y 12 los que tengan cuatro pues son compus muy viejitas este y si quiero saber cuántos los hilos de cada cor revisar la especificación de tu de tu compu o sea pero a nivel a ver si encuentras como la la hoja de documentación de tu procesador Ajá o sea como Buscar la tu de deb ir no por ahí este hasta creo que tien el nombre nom del chip y podrías buscar ahí así como el chip tal arquitectura bueno
(1:31:28) obviamente en inglés no para que te salga Ajá sí no pero de seguro tú vas a tener un rendimiento Así vas a poder así ver todo muy increíble este ahorita pues Noa primera práctica pues no se nota mucho No pero bueno entonces sigo con esto el entonces deben revisar el programa determinante concurrente y este y ver cuánto tiempo tarda en ejecutarse en sus compus no y o sea bueno estos experimentos los que tengan los que hagan equipo de tres este bueno de Máximo tres e este deben deben escribir no cada quien cada uno del equipo debe poner O
(1:32:13) sea si tienen tres computadoras distintas pues decir No pues en computadora uno tarda tal en la dos tarda tal Y en la tres tarda tal vale Y también la comp 1 tiene este no sé 10 10 procesos 10 este 10 hilos La otra tiene 12 y la otra tiene así entonces okay O sea si tienen si son tres cada quien este todos deben eh este ejecutar los programas en sus compos Vale entonces el el el punto tres es esto no el cuatro Eh pues ya vimos que este programa pues está implementado extendiendo la clase TR ustedes lo deben hacer
(1:32:55) este ahora implementando la clase rable vale en todas las preguntas hay que poner todas las respuestas eh este solamente en la que les pido que ejecuten cosas no en las otras no en nosotras con que uno conteste no este Bueno o sea pero sí O sea la idea es que todos lean esto no y ya se pongan de acuerdo para que en cuatro líneas realmente puedan responder la pregunta solamente una vale Pero estas cuando les pregunto como de Oigan Cuántos sos tiene pues existan tres respuestas no Cuánto tarda tres respuestas esta pues no solo es un
(1:33:35) programa tienen que implementarlo ahora extendiendo la clase Bueno más bien implementando la interfaz rable es es un programa vale debe ir en el luego deben implementar el programa determinante concurrente de forma secuencial y comparar el tiempo sa ver si realmente con Run o sea cuando usan runnable es mejor no eh que yo yo dudo que sea realmente mucho mejor Pero bueno o sea le dan lo lo corren varias veces no para ver si sí y si es menor vamos a van a utilizar la ley de andal para calcular ese porcentaje que que se puede paralelizar
(1:34:20) no O sea como eh digamos que despeja no ahora este este p van a van a despejar p en la ecuación de andal y pues decir no O sea este porcentaje no sé se puede paralizar en realidad no sé 20% no o algo así e y si no es menor entonces eh van a realizar la implementación para dos hilos en vez de seis y compararlo con la implementación no y este y y con la de Uno Vale entonces porque por qué porque aquí por ejemplo aquí hacen aquí Son seis hilos no O sea cada cada uno hace cosas pero por ejemplo en vez de que este cada quien
(1:35:04) multiplique qué tal que solamente usamos dos dos hilos entonces que uno multiplique solamente la parte que se suma y que el otro multiplique la parte que se resta y ver si realmente más bien así se se se se puede paralelizar mejor no Vale y Y entonces ver no si realmente hay una diferencia utilizando seis hilos o utilizando dos o utilizando uno no y si no pues bueno este se intentó ver la diferencia no e y des escribir con sus propias palabras en máximo dos líneas Para qué sirve el método join no Y si no le ponemos el método join en el
(1:35:47) determinante concurrentes en el programa O sea si no lo usan realmente funciona si realmente se obtiene un resultado Vale entonces eso es lo que tienen que hacer se dan cuenta pues no Está pesado Bueno o sea no sé cómo lo vean no se ve pesado no Ah qué bueno sí o sea es así como que vayan calentando motores no vayan viendo si realmente funciona si es una mentira no ni siquiera pude paralelizar este Hay algún formato para entregarla lo que les pido nada más es que entreguen en un PDF eh las respuestas de los ejercicios no
(1:36:24) sea como la de la un la de la dos la de la TR de ahí es hasta las 5 y así O sea todo lo que pida que yo les pida algo contestarlo en el PDF luego lo que no requiere bueno Esto es lo que no no se requiera que que lo implementen No pero lo que sí este me una descripción de los programas que entregan no O sea como de bueno eh Ajá o sea los programas no sea los programas no los peguen en el PDF Este pero sí por ejemplo en el ejercicio en la pregunta cuatro Bueno aquí en el ítem cu pues me dicen no este se anexa el programa no sé determinante
(1:37:16) concurrente ron Java Este programa lo que hace es tal Y tal Y este o sea como una descripción breve no O sea simplemente lo que hacemos Es dividir el trabajo en seis hilos y ya está Vale o sea como de forma breve pero que sí me digan cómo se llama la clase para que ver yo que tengo que buscar no rápido que se haga rápido y también qué hace Bueno ahorita es como muy sencillo No este lo que hacen los programas es una cosa de nada pero sí Al rato siempre voy a ocupar que me digan Qué hacen sus programas para tener una idea no de cómo
(1:37:49) los diseñaron qué estaban pensando e y eso en el PDF o sea nada más una breve descripción Cómo se llama Y qué hace y los programas junto con el PDF Todo debe ir en un zip Okay eh Y este es muy importante no utilizar Java 21 ahorita no debe haber problema no no hay nada duplicated este como que que este que cambie no a la siguiente versión según yo pero este si la idea es que queden bien oa que mejor usan en 21 se puede cambiar muy fácil ahí en el editor que ustedes escojan e y ya está HM Ah bueno el tiempo de elaboración
(1:38:35) este les puse que pues yo creo O sea si no tienen instalado ya v y así pues y con calmita no platicar con su equipo leer esto yo le hago como una una hora y media no O sea no es mucho por eso les doy o sea les doy tiempo pero como para que se organicen con sus tareas no con su equipo quien la quiera entregar antes no hay problema y si no el otro el siguiente jueves H no sé O sea si tienen algún problemilla me escriben no sobre todo en esas dos horas Este voy a estar como bien al pendiente pero en realidad me pueden escribir en cualquier momento
(1:39:07) vale Este si no se termina algún problema eh o tiene alguna duda no de los programas y listo vale bueno y aquí está este eh las referencias es un video muy bonito de un Ruso hablando inglés que no se le entiende mucho pero que te platica todo lo de la Java virtual Machine está como actual Está interesante pero si en realidad les digo no ocupamos todo Okay entonces sería todo Tienen alguna duda todo bien vale Ah sí Mira sí la grabé es que no lo veía desde AC muy bien todo bien entonces bueno Nos este pues este me
(1:40:11) escriben si tien algún problema si no el siguiente jueves no me comparten su pantalla este por discord por ejemplo podría ser ahí están los canales o así aunque les digo como que creo que tal vez en esta no hay como muchos problemas no Bueno yo espero Si no pues estamos Estoy al pendiente Vale entonces Bueno nos vemos mañana en la clase de teoría que tengan una bonita tarde nos vemos bye
