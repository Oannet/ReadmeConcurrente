2024 09 24 10 03 26 - YouTube
https://www.youtube.com/watch?v=xjTGlXZyI24

Transcript:
(00:11) son de eso Entonces e yo creo que Hola Luis sí de las personas que más saben de snapshots yo creo que sí es la maestra este porque hecho muchísima investigación está haciendo el doctorado sí es muy buena la verdad y en snapshots más o se es Sí sí sí Entonces es un tema que que explica muy bonito y que además A mí también me gusta mucho Entonces está sí es joven es muy inteligente la verdad Entonces e lo está haciendo en creo que va a la mitad me había contado que iba a la mitad y lo está haciendo en ciencias de la computación pero en una parte de de
(01:05) lo que está haciendo en su investigación es de snapshots entonces sabe muchísimo de esto y Y sí O sea creo que le invitaron a un congreso en Oregon y todo es muy bueno e pero bueno entonces el objetivo de hoy es revisar esta parte de registros e revisar la parte de snapshots para que repasarlos dar unos ejemplos como que puedan verlo gráficamente cómo funciona todo esto además los snapshots Son son muy bonitos porque los snapshots son e sirven para muchas cosas no por ejemplo github la O sea una de las principales implementaciones de github
(02:00) atrás de github o Under the Hood de github eh es con snapshots y por ejemplo las extensiones de chrom muchas utilizan snapshots entonces son cosas este muy prácticas y muy útiles y muy bonitas y este repasar los registros repasar los snapshots para que puedan y revisar los primeros dos ejercicios de su tarea va eh eh la maestra les dio un día más eh Para que tuvieran más tiempo de para que tuviéramos una ayudanta más y tuvieran más tiempo de de como repasarlo y verlo entonces tienen un día más del que del que les íbamos a dejar y después
(02:42) O sea estábamos pensando dejarles su examen eh Por ahí de la semana del si Entonces vamos viendo pero básicamente su examen va a serer de las los temas de las tareas de la un a la cuatro va entonces entonces dejen Les comparto pantalla para empezar entonces e vamos a empezar con los registros Acuérdense que los registros e básicamente son objetos son de los objetos eh más más primitivos y lo que les permite hacerlo registros solamente es escribir y y leer los registros por como los los implementamos pueden tener
(03:40) Tres formas o sea podemos implementarlo básicamente con buanos con integrales y con con referencias no Entonces los registros lo que lo que son son justamente eso objetos que nada más les van a permitir escribir y leer ciertos valores y este básicamente cuando O sea si nosotros tenemos un registro secuencial si nosotros estamos trabajando con registros secuenciales nosotros esperamos Pues algo o sea lo que intuitivamente Esperamos que podamos escribir un valor y después cuando leamos sea leamos el mismo valor que
(04:22) acabamos de actualizar eso es lo que esperamos intuitivamente cuando nosotros estamos eh hablando de registros secuenciales un registro secuencial es esto y lo que nosotros vamos a querer eh con con registros este concurrentes cuando con registros que están simultáneamente escribiendo leyendo sobre ciertos valores va a haber diferentes tipos de registro uno les van a permitir eh aquí entra lo que estábamos platicando el modelo pram no entra esta parte de single read single write o este multiple read multiple wr Entonces
(05:04) los registros van a tener una amplia gama o sea ustedes pueden tener registros que sean single read single wr o single read multiple wr y este y lo que les va a permitir o sea lo que nosotros vamos a ver y lo bonito que vamos a ver es qué va a pasar cuando las llamadas de de wr o de read se traslapan entre ellas por qué y Y por qué no podemos usar exclusión mutua por qué no podemos usar exclusión mutua o sea porque nosotros cuando estamos utilizando un registro y lo intuitivamente va a pasar esto pero secuencialmente siempre es más fácil
(05:44) pensar que si pensamos de forma concurrente no Entonces si pensamos secuencialmente en los registros vamos a tener algo así pero ya si pensamos de forma concurrente en los registros Vamos a entrar a a lo mismo de lo que venimos entrando desde el inicio del curso y esto este lo lo que nosotros Nos gustaría tener sería algo como exclusión mutua no para entrar a actualizar unos valores o leer ciertos valores pero no podemos usar exclusión mutua por qué no podemos usar exclusión mutua por no podemos usarlo quién me dice
(06:42) nadie Ah Más bien acuérdense bueno eh cuando nosotros vimos exclusión mutua al inicio eh desde su tarea dos ustedes estaban usando exclusión mutua y para hacer esta exclusión mutua ustedes estaba ustedes estaban utilizando registros entonces la exclusión mutua de de todos sus de todas sus llamadas de todos sus de todos los candados que vimos al inicio del curso lo que nosotros usábamos para conseguir exclusión mutua son justamente registros Entonces pues no podemos utilizar registros para O sea no podemos utilizar
(07:30) mutua con registros porque para hacer la exclusión mutua necesitamos registros sí lo ven más o menos Entonces básicamente acá entramos o sea nosotros no podemos utilizar exclusión mutua porque sería un sins sentido porque la exclusión mutua nosotros conseguimos la exclusión mutua con registros entonces meter exclusión mutua o tratar dec exclusión mutua a los registros cuando la exclusión mutua se hace con registros como que no da no entonces esa es la parte importante que nosotros vamos a tener entonces para nosotros no vamos a lograr
(08:15) este tipo de exclusión mutua pero vamos a tener eh varias propiedades la principal propiedad que nosotros queremos vamos a tener tres tipos de registros principalmente no los registros atómicos los registros seguros y los registros regulares Entonces los registros seguros la propiedad de seguridad sobre los registros lo que les va a decir es primero que eh si un registro es seguro tiene que ser linealiza conforme este registro secuencial Este es un registro secuencial y básicamente un registro secuencial es como ustedes
(08:54) intuitivamente o como conocemos en la vida real se escribe y se lee se escribe un un valor y cuando lo leemos Pues leemos el valor actualizado entonces este lo que lo que les da esta propiedad de seguridad es que les dice que es una implementación linealiza conforme esta registro secuencial y si se traslapan puede regresar cualquier valor en el rango de valores y esto es bastante peligroso porque les va bueno acuérdense de esta parte de acá si se traslapan las oper de escritura y de lectura pueden regresar cualquier valor en el rango de valores
(09:34) en especial este en el rango de valores de un registro entonces en especial este est es nuestra palabra clave que vamos a estar nosotros utilizando realmente los registros seguros son es una ruleta muy bien Eduardo es una ruleta Entonces los registros seguros realmente son muy inseguros no la propiedad de seguridad de un registro no es nada fuerte entonces un registro seguro es de los más débiles y es este nada nada seguro no Entonces los registros seguros son inseguros para que se acuerden y este entonces cuando nosotros tenemos un
(10:21) registro seguro eh nosotros estamos utilizando registros single multiple digo single read multiple wr Entonces tenemos esta parte de acá los registros seguros normalmente los vamos a implementar con single wr multiple read y básicamente O sea ya ya aplicándolo a registros un registro seguro Esta es la propiedad de seguridad sobre los registros pero luego existe estos registros que son registros seguros y lo único que van a hacer es aplicar la propiedad de seguridad a los registros y esto que que este una llamada read que no se
(11:03) traslape con un W regresa el valor más reciente Entonces si ustedes hacen read digo este wr wr dos y luego hacen un read y estas dos operaciones no se traslapan el read les va a dar el dos entonces por eso en un inicio se llamó este registr seguros no porque garantizaba eso y por eso porque justamente la primera parte es que es una implementación linealiza u del registro secuenciales no por se Entonces ya entonces les va a dar esta parte de acá o sea est la primera propiedad que tien los registros seguros de que si una
(12:01) llamada read no se traslap con un write regresa el valor más reciente eso se los da porque la propiedad de seguridad es linealiza con un registro secuencial Entonces esta es la primera propiedad que se basa en la parte de linealiza iliza con este el registro secuencial y después ya tenemos nuestra parte insegura esta parte es bastante insegura si una llamada read se traslapa con un Wi o varias llamadas read se traslapan con uno o en general si se traslapan este operaciones de read y write entre sí puede regresar cualquier cualquier
(12:38) valor entre los permitidos del registro y es una ruleta y este es muy inseguro porque cualquier valor entre los permitidos del registro no solo incluye a los valores este actualizados También incluye a los valores indefinidos sí lo ven Entonces ya vieron Dónde está la la inseguridad en los registros seguros Sí este a ver Ahí les va imagínense que tienen ustedes ahorita vamos a ver más ejemplos cuando terminemos los tres registros este vamos a ver un ejemplo de la comparación entre los tres pero imagínense que ustedes tienen
(13:30) por ejemplo read dos luego acá tienen read y acá tienen otro ahí les va Lo que si se dan cuenta este no se traslap con el pero este Wi sí se traslapa s lo ven Entonces como esos dos se traslapan eh la seguridad o el registro seguro le le da como que de cierta forma le da permiso a este re de poder regresar cualquier valor sí Entonces si estos dos se traslapan No necesariamente va a regresar este dos No necesariamente va a regresar Es dos y luego por ejemplo si ustedes tienen si ustedes tienen o sea este read
(14:39) cuando se traslapa con el wr puede regresar indefinido puede regresar dos o puede regresar tres y si ustedes tienen por ejemplo este y este o sea que se traslapen estos dos puntos igual lo mismo o sea este re si se dan cuenta eh buen nosotros cuando estamos trabajando tanto con registros como con snapshots estamos El tiempo siempre va a ser de izquierda a derecha no Entonces es un poco más fácil si lo ven de esta forma porque lo que pasa primero O sea la primera invocación al método normalmente o sea en registros regulares
(15:25) normalmente o en snapshots es lo consideramos que va primero aunque se esté traslap entonces La invocación siempre va a ser si La invocación es primero consideramos que toda esa llamada al método es primero entonces pero por ejemplo acá Este Wi fue primero este fue primero y estos no se traslapan entre sí pero como hay una operación de read y wr que se están traslap este read puede dar indefinido puede dar dos puede dar tres o puede dar cuatro si lo ven Entonces es nada seguro porque si ustedes lo están implementando el si se trasl con un el
(16:11) re puede regresar cualquier valor aunque no se esté traslap o sea aunque los el r anterior puede también cu o ese no no por la temporalidad este como o sea en este punto el Val permitido del registro todavía no existe cuatro o sea entre los valores permitidos del registro todavía no está el cuatro Entonces como este los registros seguros nada más les dicen que un re se sobreescribi porque son todos los los los valores permitidos o sea cualquiera o sea imagínense que un objeto este objeto tiene por eso lo utilizamos en
(17:00) gith los snapshots Pero entonces este objeto o se este registro puede este tiene como que cierta memoria de todos los los valores que está permitido o sea de todos los valores que ha escrito entonces de si este puede dar de todos los ahorita lo vamos a ver con un ejemplo más claro pero básicamente la característica que tienen los seguros es que puede dar cualquier valor permitido o sea cualquier Rango de valor permitido Y entonces un valor permitido es un valor este que ya se escribió o son uno de los valores
(17:42) escritos entonces un un registro seguro o sea lo que consideramos como valor permitido en los registros seguros son valores escritos o que se están escribiendo Entonces en este caso el read los valores que ya Se escribieron o que se están escribiendo es el dos y el tres entonces este read va a considerar e al do y al tres como eh valores permitidos entonces puede dar cualquiera de los valores y eso es lo que lo hace inseguro justamente que pueda regresar cualquiera de los valores no les da ningún tipo de garantía y eso lo vamos a
(18:19) ver ahorita con un ejemplo más claro pero hasta ahorita quédense con esto que les puede dar cualquier tipo de valor en el rango permitido o sea cualquier tipo de valor que que se haya escrito no entonces eh estos registros son bastante inseguros lo único que tienen de seguros Es que la implementación es linealiza con el registro secuencial y por eso este si dos no se traslapan pues regresa el valor más reciente sí sí más o menos Ahorita lo vamos a ver con un ejemplo más bonito sí Eduardo zuriel okay Y luego tenemos los
(19:11) registros atómicos imagínense que están como en los extremos el el más débil o el más inseguro es justamente el registro seguro y este el más fuerte es el registro atómico Entonces esta implementación también es linealiza con un registro secuencial y este sí se comporta exactamente como esperaríamos regresa el último valor escrito Entonces los registros atómicos piénsenlo como este este los registros atómicos son un poco más intuitivos porque se comportan exactamente como esperaríamos si por ejemplo si tenemos acá
(19:53) eh un re vamos a poner este mismo bueno así tenemos acá un wr 2 y acá tenemos un read para empezar como estas no se traslapan el read va a dar dos y luego tenemos un write eh 3 y tenemos un read lo que les garantiza Es que este read les va a dar o o sea les va a dar o dos o tres y luego si tienen acá por ejemplo otro re por ejemplo que tengan que se traslape este imagínense que este se traslape con varias operaciones right o sea imagínense que acá haya otro Acá hay otro
(21:00) re si este read ya dio el tres Entonces este ya nada más puede dar o tres o cuatro si lo ven entonces va a ser algo eh Como esperaríamos y cuando los dos estén o sea cuando las dos se traslapen ustedes pueden pensarlo O sea si estas dos se están trasladando por qué podría dar tres también porque puede ser a eso voy eso voy si ustedes si se está trasladando ustedes lo pueden ver como e bueno en sí se está ejecutando al mismo tiempo si se está traslapado de forma concurrente Entonces si se está traslapado eh esta operación de lectura y esta
(21:45) operación de escritura están pasando al mismo tiempo Entonces si esta operación de lectura está pasando al mismo tiempo que esta operación de escritura pero de cierta forma o o en cierto sentido esta operación de lectura pasó o sea imagínense que hay todo un código chiquitito detrás de que ustedes estén actualizando una variable o sea ustedes actualizan esta variable a cuatro pero atrás de eso está todo este proceso para actualizar la variable si ese proceso todavía no acabó Y entonces el o sea lo mandan a a leer puede que el
(22:25) proceso todavía no haya acabado Entonces lo único que les va a dar tienen la certeza de que les va a dar o el tres que es el valor que ya tenían o el cuatro si este proceso ya acabó pero si el proceso no ha acabado les va a dar el valor anterior entonces en los registros atómicos ustedes nada más van a tener dos opciones o les da un tres o les da un cuatro o sea o les da el valor anterior o les da el valor nuevo les puede dar también el valor anterior porque puede ser que cuando se manda a leer Todavía no se ha acabado de
(22:58) actualizar la variable o sea puede haber cierto retraso de milisegundos en o de nanosegundos donde la variable Se está actualizando Pero todavía no se termina de actualizar Y entonces mandan a leerlo y como todavía no se termina de actualizar lo que les va a dar es el es el valor anterior Pero esto es muy fuerte porque eh les da bastante consistencia que es lo que nosotros esperamos de un registro por eso de aquí sacamos los snapshots Entonces les va a dar o tres o cuatro porque les va a dar eh si todavía no se
(23:38) termina de de actualizar les va a dar el valor que ya tiene y si ya se terminó de actualizar les va a dar el valor actualizado pero a diferencia de los registros seguros que el registro seguro te puede dar dos tres cuat o indefinido este de acá les puede dar esto si fuera seguro pero como es atómico nada más les va a dar o tres o cuatro si lo ven Sí suriel más o menos quedó mejor ya mejor y después un punto regular entre los registros atómicos y los seguros son los registros regulares Entonces si ustedes lo ven como que del un al 10
(24:36) Quién es más más fuerte está o sea ustedes tienen acá su su métrica del 1 al 10 el menos seguro es el seguro el más seguro es el atómico pero necesitábamos un punto medio y este punto medio se llama regular bonito no entonces ustedes tienen eh el menos seguro es el seguro el más seguro es el atómico y el de medio es el regular Entonces los regulares también los regulares es muy importante que se acuerdan de esto porque la mayoría de los regulares se Ejecutan con un multiple read multi single Wi A diferencia de por ejemplo los registros
(25:23) seguros digo los registros sí los registros seguros que se Ejecutan con single read multiple write entonces lo que tienen acá Bueno la mayoría de los registros seguros son single read single right pero la mayoría de los registros regulares son multi single right entonces básicamente un registro regular véanlo Así véanlo en esta en esta grafiquen esta eh En este como que del 1 al 10 un registro regular Pues siempre seguro no Porque si ya está en un cinco va a cumplir claramente que estuvo en un uno no entonces un registro regular
(26:05) siempre es seguro pero además de ser seguro tiene más cosas porque está acá sí lo ven Entonces es registro seguro más otras cosas Entonces todos los registros regulares son seguros pero no todos los registros seguros son regulares Y por qué entonces un registro regular eh cuando una llamada read igual si una llamada read no se traslapa con una llamada wr eso es linealiza con un este registro secuencial Y entonces se va a esperar como o sea se va les va a dar lo que esperaríamos pero si se traslapan que es donde nosotros entramos
(26:46) el puede regresar cualquier valor bi de las llamadas traslapadas ahí les va imagínense ustedes tienen este right right 2 y acá es más o menos la lógica que creo que tiene Eduardo es 2 luego tienen un read imagínense que el es todo esto y acá se traslapa con un r 3 4 5 Entonces estos tres wres se están traslap con el read y es donde entran nuestros casos especiales entonces lo que les va a dar el registro regular por ejemplo el registro seguro qué les dice en ese caso Cuáles son los valores que puede dar ese r o sea Qué valores puede
(27:51) les puede regresar ese en un seguro todo Sí muy bien dos 3 cu 5 Exacto muy bien muy bien Luis muy bien José diel Entonces en un registro seguro les puede dar todos pero como el regular es es más poderoso lo que les va a dar es solamente o sea lo que les puede regresar Es solamente estos de acá los que se traslapan este no se los va a regresar este no A diferencia de uno seguro el Seguro sí les puede regresar ese e indefinido el regular no el regular no les puede regresar ni el anterior ni el indefinido el regular
(28:39) solo les va a dar los valores o sea solo puede regresar cualquier valor de los que se traslapan Entonces qué valores puede regresar el atómico es Sí muy bien Luis dos tres o cuat no no no no espérense 3 cu 5 sí 3 cu 5 Este sí sí sí e entonces re lo que les puede regresar es 3 45 Ahí voy a eso voy entonces el seguro les puede regresar 2 3 4 5 o indefinido el el regular les puede regresar nada más los que se traslapan o sea 3 4 5 y el atómico dependiendo o sea el atómico les puede regresar o el dos dependiendo de
(29:31) de dónde lo lean o el Una vez que se termine el read les puede regresar Ah No El dos no se los puede regresar les puede regresar el read básicamente lo que hace es que el atómico eh Sí ve las últimas actualizaciones Entonces si el re se hace hasta acá lo que les va a regresar Es o cu o cco porque imagínense el r termina acá eso significa que termina de ver eh todas las actualizaciones Entonces si el r termina acá y el Bueno en ese caso sí regresaría cinco pero imagínense a ver déjenlo así así no Así está mejor Entonces se
(30:21) mantiene igual el seguro regresa indefinido 2 3 4 o 5 el regular regresa 3 cu o c y el el atómico regresa cuatro o cinco por qué Porque hasta este punto el re ya acabó pero la actualización no sabemos si ya terminó o sea de de que se vea la actualización o todavía no Entonces en ese caso puede regresar el cinco si ya se terminó de actualizar o el cuatro si todavía no Entonces los que lo que les va a dar el re para atómico va a ser o el cuatro porque para este punto o se el r Todavía no terminó y sabemos que el Este sí terminó no
(31:01) Entonces para este punto este punto de acá imagínense hay que ponerle el punto uno para este tiempo Uno El Wi 4 terminó y el re todavía no Entonces eso significa que el r sigue leyendo pero acá en el tiempo dos el Wi si el Wi no terminó pero el re Sí entonces no tenemos la certeza de que se haya terminado de actualizar Al momento de que se haya leído ent entonces lo que les va a dar es nada más 4 c si lo ven entonces por eso lo tienen que ver en este o sea en esta cierta como que línea de Pero entonces por qué el
(31:42) regular pue dar tres después están los otros Wi porque no es tan poderoso o sea lo que te dice la definición Esta es la definición todo esto es la definición de un registro regular entonces lo que tú s vas tener con certeza de todos los registros es que tú lo vas a ver o sea el tiempo va a correr como corre para todos de izquierda a derecha o sea va a empezar desde el inicio y va a terminar en el final entonces eh la definición de un registro eh regular es que te puede dar o sea este read no tiene las lo o sea como yo creo
(32:25) que lo estás pensando es igual eh atómicamente o secuencialmente o linealiza a un registro secuencial porque este read tiene que tener ciertas propiedades y ciertos procesos para que lea eh o sea para que pueda ver realmente las últimas actualizaciones el registro regular no tiene esos procesos no tiene esos esas verificaciones Entonces por definición un registro regular Esta es la definición Entonces el registro regular te puede dar cualquier valor de la llamada traslapadas Y si te das cuenta es más seguro que el seguro Porque el seguro te
(33:04) puede dar cualquiera Pero el re si te puede dar nada más dentro del Rango de los que se están traslap y el atómico ya te da este los últimos actualizados por eso véanlo en este tipo de este como de métrica si se dan cuenta eh si lo ven así Incluso el seguro les puede regresar indefinido 2 3 4 5 el regular nada más 3 4 5 y el atómico 4 c Aunque ustedes lo vean como que de cierta forma temporalmente e O sea que que siguen como que o sea que primero fue el Wi 3 y luego el Wi 4 y luego el Wi 5 pero de todas formas el
(33:51) r me acabado de leer un registro regular no tiene todas esas todos esos candados o todos usar directamente No necesariamente porque los atómicos es lo mismo que cuando utilicen candados muy fuertes No si utilizan Por ejemplo si utilizan sincroniza todo por qué O sea yo podría llegar y decirles Ah Oigan Entonces siempre es mejor utilizar directamente synchronized porque así ya no tienen ni ustedes Race conditions ni este no tienen problemas de starvation no tienen problemas de deadlock no tienen ningún problema Por qué no es
(34:27) siempre mejor utilizar synchronize Por qué no siempre utilizamos sincronize para todo Exacto porque son candados de cierta forma sí Exacto muy bien Eduardo muy bien J el tiempo que se tardaría es mucho mayor y son candados completos Entonces si tú tienes eh synchronized Al final tendrías y tú le metes synchronize a todo tienes algo secuencial entonces es lo mismo este zuriel si tú usas directamente atómicos para todo y y no revisas bien Cuál es el diseño que necesitas o qué condiciones necesitas y utilizas atómico para todo
(35:25) eh se tardaría mucho y Además este puede que termines con un read wr secuencial no Ajá entonces terminarías con algo relativamente secuencial y no queremos que sea secuencial s entonces ahí les va un ejemplo más bonito de este de los tres entonces acá tienen un read 1 read 2 read 3 y acá tienen nuestro cero y nuestro right 1 Entonces vamos a ponerlo Así vamos a ponerlo así tienen Cuál es el menos seguro Cuál es el menos seguro jóvenes Exacto muy bien los seguros y después sí irónicamente los regulares y después el atómico muy
(36:35) bien entonces ahí les va si se dan cuenta estas no se traslapan esta llamada Esta llamada no se traslapa con nadie Entonces por definición de registro cualquiera o sea los seguros los regulares o los atómicos cualquiera les va a garantizar que si no se les va a dar el último actualizado entonces este re nada más por simple definición de registro en todos los los registros en seguros regulares o atómicos les va a dar un cero Sí pero la parte que nos interesa es esta de acá los dos se están trasladando con nuestro wr
(37:22) 1 entonces en los registr seguros este de acá vamos a ver qu puede dar este de acá y este de acá en los registros seguros Qué puede dar el read 2 muy bien indefinido 0 o 1 y igual 3 no estamos de acuerdo no sí hasta ahí todos bien bueno y en los registros regulares que puede dar este re do Acuérdense que los registros regulares como es un punto medio nada más puede dar este los valores de de los que se traslapa o sea puede
(38:25) dar cualquiera de los valores que está atras la Pando Entonces en un registro regular Qué puede Qué puede pasar c los registros Bueno vamos para allá los registros atómicos por ejemplo este registro atómico este el registro atómico si se dan cuenta primero vamos a a los extremos no el registro seguro ya sabemos que puede dar cualquiera Y por eso no es nada seguro luego los registros atómicos sabemos que puede dar o sea que es bastante e consistente de cierta forma Entonces si nosotros tenemos este tipo de consistencias r2 y r3 darían uno no en
(39:12) los atómicos en en el atómico ahí en regulares Ah muy bien sí Entonces vamos al al atómico primero pero sí muy bien entonces el atómico este básicamente lo que les dice es que si este read ustedes no tienen la certeza de que este read haya pasado eh cuando ya se actualizó O sea no tiene la certeza ni de aquí ni de acá que ya se haya terminado de actualizar ya se haya terminado de actualizar Entonces si este o sea los dos pueden dar cer0 o uno estos dos pueden dar c o uno pero ahí les va Lo bonito con los atómicos o sea los dos pueden dar cer0 o
(40:03) uno Porque ninguna de las dos tienen la certeza de que se haya terminado de actualizar Entonces les da el cer0 si todavía no se terminó de actualizar o el uno si ya se terminó de actualizar pero a é les va la diferencia el registro atómico si este está en cero o sea puede pasar que este esté en cero y este esté en uno porque que en este punto no se haya termin de actualizar en este sí o puede pasar que este est en uno Y eso implica Por el simple hecho de que es atómico eso implica que este es uno si lo ven porque
(40:42) les da el último actualizado si r2 es 1 eso implica que r3 es 1 sí Entonces eso es como que lo importante que tienen que ustedes considerar cuando ustedes están izando snapshots y este registros en general uno o sea si este ya se actualizó si este ya se actualizó eso implica que todos los demás re ya van a ver el valor actualizado los read atómicos entonces ambos cero también se puede también se puede si ambos cero también se puede porque puede ser que hasta este punto del re todavía Bueno de hecho no no O sea en
(41:26) otros casos Si este right estuviera por acá Sí se puede pero este como o sea veanlo literalmente en tiempo este Wi acabó acá Qué significa que acabe en Wi que ya sabemos que ya acabó todo el proceso de actualización Entonces si este read acab o acá Este a fuerza tiene que ser uno a fuerza pero este puede ser que este sea uno y este sea uno o puede ser que este sea cer0 y este sea uno si lo ven porque hasta este punto ustedes no tienen la certeza H sea este punto acá ustedes no tienen la certeza de que ya se haya acabado de actualizar
(42:09) entonces puede ser cero les va a dar el último valor regresado Sí entonces este puede ser cero o pueden tener El caso así sí lo ven Entonces no se puede cer y cero no porque es eh el atómico Sí sí fluye con la temporal Entonces el Wi acabó acá el wr acabó antes de lo que acabó el read si se dan cuenta o sea write acaba antes que el read eso que significa Que se actualiza antes de leer y si se actualiza antes de leer en ese caso r3 siempre va a leer uno Sí muy bien pero si wr estuviera hasta acá no tienen la certeza
(43:00) de que ya se haya actualizado Al momento de leerlo y entonces sí ya es como dice creo que es Uriel que puede ser cer0 y cero pero en este caso como o sea el atómico es mejor porque Bueno no es mejor pero fluye con la temporalidad es más fácil de entender porque si el Wi acabó antes que el read significa que se actualizó antes de terminar de leer si se actualiza antes de terminar de leer y es atómico acuérdense que siempre vamos a a leer el último actualizado Entonces si se actualizó antes de terminar de leer va a leer el último actualizado o
(43:34) sea uno sí lo ven y estos los dos puede dar uno bueno los dos debe dar uno porque justamente la definición de regular es que da los valores con los que se traslapa no los anteriores los valores con los que se lapa Entonces si se dan cuenta Por eso es muy importante que que revisen ustedes el diseño y todo eso porque en este caso si se dan cuenta en los atómicos tienen más posibilidades de o sea tienen más más casos que en los regulares Entonces no siempre los atómicos son más fuertes que los regular Bueno sí siempre son más fuertes pero a
(44:20) veces los regulares sirven más que los atómicos en general los seguros no van a servir o sea de plano esos no sirven y este nada más para ya empezar a a ver lo de su tarea eh les dice Cuál es la diferencia entre un registro atómico y uno seguro Cuál es la diferencia Cuál es la diferencia entre los dos si se dan cuenta los dos son los extremos los seguros si los seguros no sirven Qué valores regresan cuando se juntan que el seguro no es seguro mientras muy bien sí los que pueden devolver muy bien Sí entonces la
(45:08) principal diferencia es que los registros en los registros atómicos las lecturas deben ser atómicas no O sea justamente que los valores que regresan cuando se juntan read wr si dos operaciones de lectura se traslapan con dos operaciones de escritura entonces la operación de lectura no puede leer Antes de que lo lea la primera es esto de acá si se dan cuenta dos operaciones de lectura se están juntando con bueno en este caso con una operación de escritura pero el segundo no puede leer Antes de que lo lea el primero entonces a fuerza
(45:47) lo tiene que leer el primero antes que el segundo eso es que las operaciones de lectura son atómicas y los registros seguros este pues lo operación de lectura puede leer lo que sea no cualquier valor permitido en el rango de valores Entonces en este ejercicio la Por qué el regular en r2 no puede regresar cer0 Ah por la definición la definición de regular Dónde está acá es que esta variable cuando se traslapan puede regresar cualquier valor Imagínate que tú tienes b0 que no se traslapa y luego los que se traslapan es
(46:24) B1 hasta bn acá lo que te dice la definición es que puede regresar cualquier bi desde un hasta n desde uno hasta n de las llamadas traslapadas entonces la la definición de regulares lo lo acota eso que nada más te regrese cualquier valor Pero entre las traslapadas Entonces esto es básicamente por la definición no puede regresar cero porque nada más regresa lasas o sea cualquier valor de las traslapadas Y en este caso se traslapa nada más el uno entonces en el inciso B del uno la diferencia entre un registro atómico y
(47:04) uno seguro es este las operaciones de lectura en los registros atómicos eh las operaciones de lectura pues son atómicas O sea que si se traslapan entonces la segunda operación no puede para empezar leen el valor más actualizado no O sea eso es si en los registros atómicos una operación de lectura lee el registro más actualizado en los registros seguros Lee Cualquiera cualquiera de los valores en el rango permitido y luego este En qué consiste la transformación de un registro este single right single read seguro un registro regular single
(47:44) wr single read es esto de acá entonces acuérdense que todos los registros regulares son seguros pero no todos los seguros son regulares por esta métrica de acá o sea por su Este sí no si ustedes lo comparan del uno al 10 en qué tan seguro o poderoso son el regular siempre va a ser más que el seguro entonces un registro regular siempre va a ser seguro entonces la transformación de un registro seguro a un registro Regular o sea qué tiene un registro seguro qué tiene un registro regular que no tenga un registro seguro
(48:19) acá por ejemplo eh vamos a ponerlo por acá qué tiene un registro uno seguro a uno regular Entonces qué tiene el registro regular que no tiene el seguro el regular no devuelve indefinido muy bien Sí entonces para empezar el regular no devuelve indefinido y más aún no devuelve valores no traslapados entonces la transformación de regular no hace caso r anteriores Sí muy bien entonces la transformación de un registro seguro a un registro regular si ambos son single read single right básicamente eh en el seguro se añade un registro
(49:25) adicional un registro adicional Y entonces este hilo guarda el valor antiguo porque en los registros seguros si una operación de read y wr se traslapan read regresa a cualquier valor pero los registros regulares no hacen esto los registros regulares solo hacen los valores traslapados Entonces al transformar el registro seguro a un registro regular tienen que Añadir un registro adicional para garantizar eh que solo que re lea los valores traslapados traslapados y este los valores traslapados y no todos no y no todos los
(50:21) permitidos entonces esa es la transformación s lo ven entonces la transformación de uno eh de uno seguro o uno regular básicamente nada más es Añadir e una una condición o Añadir algo más para que el re nada más regrese o sea para que el no regrese cualquier valor si lo ven Entonces por esto se tiene que agregar un registro adicional Entonces ese es el inciso a y en el inciso c eh la maestra sí les explicó no lo del algoritmo de Bakery para lamport de los registros atómicos y eso básicamente eh según lamport el algoritmo de Bakery
(51:20) necesitaba registros atómicos para que pudiera funcionar pero ya después lo lo implementaron cuando lo implementaron con estos registros eh descubrieron que pues no era necesario entonces lamport decía que el algoritmo de Bakery necesitaba registros atómicos Pero ya cuando lo implementaron pues resultó que no Entonces Esa es la la relación entre los registros atómicos y el algoritmo de Bakery sí lo ven entonces bu la idea era ver esto de snapshots pero mejor lo vemos la siguiente clase Entonces el jueves Qué
(51:58) les parece si vemos Snap Ah sí eh la parte de O sea la relación que hay entre el algoritmo de Bakery y los registros atómicos es que lamport decía que el algoritmo de Bakery necesitaba registros atómicos entonces lampor decía que necesitaban registros atómicos pero ya después O sea tiempo después eh implementaron este algoritmo de Bakery con los registros a atómicos que decía el amp que se necesitaban y resultó que no lo necesitaba O sea que incluso era menos eficiente si se implementaron los registros atómicos entonces lampos decía que sí y
(52:40) resultó que no Entonces Esa es la relación para transformar uno seguro a uno regular solo hay que agregar un registro extra para que no devuelva cualquiera Eh sí exacto que agregar un registro extra para que garanticen que que no devuelva todos los valores posibles en el rango de valores porque era menos eficiente porque se tardaba mucho más O sea y para transformar de uno regular a uno atómico que serí igual tienen que Añadir bueno era menos eficiente porque básicamente se hacía muy muy lento y los o sea los registros creo que lo
(53:25) implementaron ya después con registros y transformaciones Entonces al implementarlo con registros regulares y transformaciones el algoritmo se volvía más rápido que implementándose lampo decía que no había forma de que de implementar El algoritmo de Bakery si no era con registros atómicos y luego llegaron y lo implementaron con registros regulares y con registros y con transformaciones y resultó que sí se poda implementar y que era más rápido que si lo implementaba con con algoritmo digo con registros atómicos porque es
(54:02) eso los registros atómicos en en ciertos casos te meten a algo semisecos de uno regular a uno atómico que sería igual tienen que Añadir un registro y para garantizar o sea tienen que Añadir un registro Que guarde el último valor actualizado porque no es solo el último valor y el nuevo es el último valor actualizado entonces este tienen que Añadir un nuevo registro Que guarde el último valor el último valor actualizado y agregar esta condición más fuerte de que no solo puede eh dar todos los valores que que se traslapen sino
(54:46) que también puede o sea debe dar el último actualizado no todos los que se traslapen Entonces es lo mismo tienen que Añadir un registro y y esta condición más fuerte sí dudas hasta aquí ninguna va entonces bueno este fue el primer ejercicio de su tarea e el jueves les parece si vemos los otros dos de snapshots a los otros tres son snapshots Entonces yo yo creo que sí podemos ver los otros tres el jueves para que también no se les haga muy pesado les parece va y si hay paro creen que haya paro no verdad quién sabe a mí me llegó
(55:52) formas pues vemos no Un día a la vez 76 por pero pero paro de cuándo a cuándo O sea creo que una de las opciones será toda la semana y luego por lo de Ayotzinapa dos semanas del 26 al 7 pues vemos entonces por lo mientras la siguiente clase donde sea que esté la siguiente clase e vemos los otros tres para ver snapshots y que lo decía del destino vemos los otros tres para ver snapshots en una clase y que se les haga más más fácil de ver y sí Entonces nos vemos en la siguiente clase cuando sea que sea va cuídense mucho
(56:55) Bye al
