(61) Clase 19 2024 08 29 - YouTube
https://www.youtube.com/watch?v=LkjpkONjrrs

Transcript:
(00:00) de lo que han visto con la maestra o algo así no buen si tienen dudas de algún tema Me avisan para verlo acá va y para que les quede bien entonces la idea recuerdan que que este lo revisamos el martes no quién me dice buen la parte exclusión mutua este ya resolvieron la parte exclusión mutua para este ejercicio ya Ah muy bien entonces quién se acuerda cómo habíamos dicho que que íbamos a a justificar si era o no era deadlock free y estation free quién me
(01:09) dice para empezar era o no era deadlock free ajá No era muy bien y se acuerdan Por qué buen nada más para como que de hecho se pueda a la sección crítica Bueno A eso vamos va super bien Eduardo pero esa es la idea eso es lo que quería repasar con ustedes ahorita porque miren llega a y para empezar sabemos que no es deadlock free porque imagínense que llega a y hace toda o sea entra a lock no entonces hace todo esto y no tiene problema porque cuando llega acá pues a él mismo como la víctima y como nadie más ha
(02:03) entrado este B para este punto es false entonces pasa al siguiente o sea sale de ese ciclo do While y marca B como true no y luego mientras la víctima sea él va a repetir este ciclo va a repetir este ciclo entonces va a volver a entrar acá o sea lo va a ejecutar una primera vez sin problema no Y luego como la víctima es él va a volver a entrar a a estos dos ciclos pero ahora va a quedarse Atrapado en este ciclo Sí porque B es true él todavía no entra a la sección crítica y nadie para este punto ha entrado a la sección crítica entonces
(02:55) nadie ha marcado a bisi como false entonces a se va a quedar aquí ejecutándose y cuando llegue B le va a pasar lo mismo y se van a quedar aquí los dos trabados pero ahí les va lo lo bonito de la concurrencia y lo difícil de la concurrencia es que justamente no es lineal entonces van muy bien en sus razonamientos nada más que chequense esto imagínense que a está aquí no a está poniendo que B es true y al mismo tiempo B pide el candado esto es Ultra común que pase o sea si si lo ven en la práctica va a haber al menos dos hilos
(03:41) que quieran pedir el candado porque si no lo hubiera pues no tendría caso poner el candado no O sea si no quieren entrar dos al mismo tiempo para qué ponemos un candado pero este lo que van a o sea lo que van a tener Es que va a ser muy o sea como un loock entonces puede estar aquí ejecutando su BC es igual a true y al mismo tiempo puede B estar aquí escribiendo que la víctima es B Entonces cuando a llegue aquí va a ver que la víctima ya no es a sino B Entonces si llega acá va a pasar a la sección crítica s lo ven Entonces
(04:32) si hay casos específicos donde un hilo puede entrar a la sección crítica nada más que como encontramos el contraejemplo donde los dos se quedan bloqueados entre sí y los dos lo piden entonces no es starvation fre podemos este decir que no cumple que se pero lo ven o sea Eduardo si hay un hilo si hay un caso específico donde un hilo puede entrar a la sección crítica así entonces imagínense Esto está a y b a y b y los dos quieren entrar a la sección crítica al mismo tiempo entonces imagínate en en las ejecuciones que
(05:24) hemos visto tenemos que que tanto a como B O sea nosotros lo ponemos que son en diferentes tiempos no O sea que primero entra a y luego entra B Pero puede pasar este puede pasar oes incluso es muy probable que pase que los dos estén en log al mismo tiempo no que entre primero a y luego B que los dos estén al mismo tiempo entonces en caso de que los dos estén al mismo tiempo puede pasar que a y en ese mismo momento B está escribiendo que la víctima es B entonces a pasa esta parte de aquí a dice Ah bueno a le esto de acá no
(06:32) a que la víctima es B Entonces como la víctima no es el mismo ya no tiene que entrar otra vez al ciclo y puede pasar a la sección crítica y ya a pasa la sección crítica sí lo ven muy bien todo entonces el punto aquí es que si hay un una ejecución donde este donde se cumple o sea donde un hilo entra la sección crítica por eso les decía que tienen que demostrar diferente exclusión mutua porque en sí este acá o sea siempre va a haber buen casi siempre en todos los los ejemplos que yo vi va a haber al menos una
(07:38) ejecución donde un hilo puede entrar a la sección crítica va si no no se los pondrían entonces va a haber un hilo que va a entrar a la sección crítica por eso tienen que demostrar diferente la parte de exclusión mutua y no pueden usar el mismo el mismo argumento porque en exclusión mutua acuérdense que lo que nosotros queremos demostrar es que nunca pasa se es similar a nuestra propiedad de seguridad que nunca pasa que dos hilos estén en la sección crítica al mismo tiempo entonces eso es o sea lo tienen que demostrar diferente porque puede ser
(08:21) que no es exclusión mutua y en esta ejecución específica donde casualmente no este o sea donde casualmente los hilos no se interbloque y un hilo puede pasar a la sección crítica puede pasar que el otro hilo también pase entonces ahí ya tampoco sería exclusión mutua sí entonces tienen que tener mucho cuidado en eso sí todos alguna duda está aquí no va entonces si les surge duda al rato me avisan o me mandan Telegram cualquier cosa Entonces vamos a pasarnos al cco Cómo van con el cco lo repasamos o mejor nos pasamos al
(09:27) otro Vamos a repasar entonces acuérdense que este les piden demostrar nuestras tres propiedades de exclusión mutua deadlock free starvation free y acuérdense que esas o sea podrían a a Ojo ver que sí se cumple Por qué Porque cuando llegan dos hilos al final los pasan a un peterson lock pues al final siempre dos hilos los van a pasar a un peterson lock no O sea siempre siempre siempre justamente por la como que la definición de de este algoritmo Entonces siempre los van a pasar a a un peterson lock y acuérdense
(10:15) que el peterson lock pues cumple con las propiedades de exclusión mutua de lock free Station free entonces podrían O sea ya con esto ya pueden ver que este algoritmo también cumple con exclusión mutua derock free y starvation free no la justicia es otro problema que ahorita vamos a ver pero en general siempre se cumple Bueno o sea no siempre se cumple pero ahorita pueden ver que como dos hilos acuérdense que teníamos a b c y d no y básicamente a estos dos los peleaban en un peterson lock y a estos dos los peleaban en un
(10:55) peterson lock y al al ganador de este que solo va a ser uno por qué Porque el peterson lock cumple con exclusión mutua los van a pelear también en un peterson lock y que nada más va a salir uno no O sea de este nada más va va a salir un hilo que es el que va a entrar a la sección crítica y pues ya de ahí o sea eso lo tienen que Mostrar bien por contradicción Pero la idea es que ya de ahí satisface este exclusión mutua y también satisface derock free porque dos hilos o sea estos dos hilos no se van a quedar bloqueados no no se bloquean
(11:34) noan aquí porque este peterson lock es de loock free estos dos hilos no se bloquean aquí y los ganadores no se bloquean aquí por qué Porque todos son podemos ya suponer que peterson lole las tres características Sí ya acuérdense que de peterson Ya vimos exclusión mutua yock free y est Ah no vimos exclusión mutua y estation free y deadlock free pues es muy similar O sea la demostración es muy similar a las otras dos Entonces ya pueden suponerlo va entonces si en su tarea ponen que pueden suponer eso incluso Aquí les pone no en el ejercicio
(12:17) Recuerden que en el candado de peterson se cumple las propiedades de exclusión mutua dlock free y starvation free va entonces acá ninguno a y b no se bloquean entre sí c y d no se bloquean entre sí y el ganador de estos dos no se bloquea entre sí Entonces si lo ven Pues no hay forma de que no sea deadlock free No justamente porque peterson lock es deadlock free y pasa lo mismo con starvation free si a y b están peleando por este peterson lock eventualmente los dos lo van a tener si seide están peleando por este peterson
(12:54) lock eventualmente los dos lo van a tener Y si los ganadores están peleando por este peterson lock eventualmente lo van a tener Entonces los tres filtros o bueno si pueden verlo como como similar a filter los tres filtros que tienen acá dense cuenta que como son peterson lock pues o sea cumplen que es Dead loock free y starvation free sí o quieren que lo hagamos un poco [Música] más formal Sí todos o no todos unil siempre va a tener dos candados Sí porque siempre tiene que pasar por estos dos filtros no por este
(13:48) peterson lock y por el otro peterson lock por estas líneas de acá o sea si te das cuenta Dame un Bueno un número al cuatro imagínense el dos no entonces el dos va a entrar en este de acá y va a tener el lock un y cuando puedes repetir el dation free Sí ahí voy voy voy voy entonces este imagínense que el hilo do el qué hecho el hilo dos entra en este candado no entra en el candado uno e imagínense que lo gana no O sea que que el candado se lo dan a él o sea el candado uno si el candado uno se lo dan a él después Lo pasan al candado
(14:35) tres y eso pasa con todos los hilos no tiene que ganar Primero su hilo este o este y ya después Lo pasan como que al general sí Eduardo va Entonces vamos con Kenia entonces starvation free imagínate Acuérdate que acuérdate que starvation free era que si dos hilos o bueno si un hilo pedía un cand eh si un lock eventualmente iba a entrar no eventualmente se lo iban a dar entonces sin pérdida de generalidad imagínate a no imagínate que ahorita estamos viendo la ejecución de a a llega y tiene que pedir el candado uno no por esta parte
(15:32) de acá por la línea 10 entonces a tiene que pedir el candado uno pero y y supongamos que B lo lo obtiene primero no sabemos o sea es una garantía que eventualmente va a tener el candado no O sea eventualmente lo va a conseguir por qué porque esto Si lo ves es una mini ejecución de un peterson lock entonces están dos hilos y está nuestro peterson lock entonces a quiere entrar a ese mini peterson lock Entonces eventualmente lo va a conseguir y una vez que lo consigue lo pasa a otro peterson lock y también sabemos que eventualmente
(16:14) lo va a conseguir porque peterson lock nos garantiza esa propiedad entonces en las dos este o sea nuestros dos candados como los dos son peterson lock lo que va a pasar es que eventualmente va a conseguir tanto el candado uno en nuestro caso de a tanto el candado uno como el candado tres y una vez que consigue el candado 3es va a pasar a la sección crítica y esto lo pueden ver con todos los hilos no todos estos hilos los cuatro hilos que pidan entrar a la sección crítica eventualmente van a entrar porque eventualmente su
(16:50) respectivo peterson lock les va a dejar entrar sí Sí más o menos va entonces la propiedad de Justicia no O sea con eso ya tienen que este pues este Double peterson es cumple con exclusión mutua con deadlock free con estation free no Vámonos a la parte de Justicia que es nuestra parte pues bonita no justicia escribir entonces Vámonos a nuestra parte de Justicia eh igual que que como demostramos o sea esto ya lo saben hacer ustedes nada es igual que todo lo que hemos hecho nada más tienen que como que adaptarlo Pero
(17:51) esto en Sí ya lo saben hacer entonces como todas las demás propiedades vamos a empezar suponiendo supongamos que este este peterson lock Bueno este doble peterson lock no es justo no para empezar ustedes creen que si es justo o que no es justo se quedaron trados en esa parte no es justo aj Por qué no es justo porque peterson no lo es Ajá qué más o sea Dónde dónde Pues porque peterson no lo es Entonces vamos a verlo no
(19:00) empezar aquí ya tenemos que Pero bueno no peterson sí es justo no sí peterson sí es justo dejen dejen lo reviso en el libro pero según yo según yo peterson sí es Sí peterson sí es justo no yo me acordaba que si era justo dejen lo reviso en el libro terminando la clase pero según yo sí es justo si no les digo nada pues si era justo entonces acá lo bonito de este ejercicio es que peterson es justo según yo entonces porque el primero que llega se pone en espera y el segundo Exacto sí sí sí sí muy bien Luis si Entonces peterson si es justo y acá
(19:51) se pueden ir con la finta de que peterson o sea de como peterson cumplía con exclusión mutua derock Double peterson también pueden irse con la finta de que peterson como es justo este Double peterson también pero ahí les va se acuerdan no que teníamos que suponer que no O se a suponer que no era justo y mostrar las dos ejecuciones y ver si entrábamos en una contradicción o no suponer que no este que no es justo entonces ahí les va tenemos este bueno acá tenemos nuestras cuatro ejecuciones porque acuérdense que tenemos a a b c y
(20:33) d no Y estos dos candados o sea el a y al B les corresponde el candado un y a estos digo Y estos dos hilos les corresponde el candado dos entonces a a y a b les toca el candado un y a y a d les toca el candado dos por esta parte acá no por la línea por la línea 11 entonces hay que ver una ejecución o sea nuestra ideal donde se cumple que no es justo y ver si entramos en una contradicción Entonces vamos a empezar con a como siempre entonces imagínense que a gana l1 no y luego al mismo tiempo porque acuérdense que estos dos están pasando
(21:20) simultáneamente en La mayoría de los casos no simultáneamente o en su caso promedio van a estar pasá áneamente Entonces al mismo tiempo d gana a L2 entonces a ya está aquí a está aquí y de está aquí entonces este ya tenemos en nuestro otro candado o sea nuestro candado 3 que pasan si se dan cuenta acá pasa a acá pasa d a nuestro candado 3 no porque ha ganó el candado uno y de Gan el candado dos Entonces los dos pasan a nuestro candado tres entonces este imagínense que a se retrasa aquí o sea este es nuestro otro
(22:24) candado y hace retrasa para que para que no sea justo a se tiene que retrasar antes de la línea 13 no a se queda aquí como que este esperando algo no hace retrasa Entonces eso qu hace como ID eran los únicos que podían entrar a l3 y ya se quedó entonces pues de [Música] gana l3 entonces una vez que gana el l3 pues ya hace toda su ejecución entra la sección crítica aquí entra la cri section este hace el unlock pero no sé si ya revisaron el unlock el unlock es este o está bien hecho porque hace el unlock de aquí y el unlock de
(23:23) aquí de aquí sí O sea cuando D ya pasa la sección crítica y se va Desbloquea su su primer candado y su segundo candado o sea el candado tres y el candado 2s si lo ven entonces d o sea ya de pasa la sección crítica y sale la sección crítica y hace unlock entonces este imagínense que devuelve vuelve a ganar el candado dos y esto pasar porque no hay o sea c no está tratando de entrar no O sea en este momento c no está tratando de entrar aquí no le presten mucha atención pueden suponer que ese no está tratando de entrar entonces devuelve a
(24:12) ganar el candado dos pero as sigue  entonces este a sigue  Y esto qué hace que de vuelva a ganar el candado tres y este cuando a revive o sea cuando a ya vuelve a a a entrar en conciencia y pide entrar al candado 3 el candado 3 está ocupado Entonces si se dan cuenta a había estado Antes que D en el candado tres pero d ya pasó dos veces entonces no es justo y qué contradicción hay en este ejecución ajá No hay Muy bien Entonces como no hay pues ya se nos o sea nuestra demostración por contradicción pues ya
(25:16) no es válida pero ya pueden mostrar su ejemplo de ejecución donde no pasa o sea su contraejemplo Entonces ya pueden ver que no es justo Entonces el argumento si se llega a retrasar entonces pueden ganarle Sí más o menos O sea porque acuérdense que en peterson lock aunque se llegue a retrasar pues no pueden eh ganarle no entonces acá No hay ninguna como que restricción para para decir que que que sí puedan digo que no puedan Gan a Entonces el argumento es ese básicamente pero tienen que Mostrar un ejemplo del ejecución o sea este es solo
(26:08) uno pero es más o menos el el bosquejo de cómo quedaría porque si se dan cuenta según Jeter era si era justo Entonces vamos a suponer que si era justo entonces imagínense que está acá y acuérdense por ejemplo d gana otra vez el candado dos por qué Porque puede ser que c no esté tratando de acceder No si c estuviera tratando de acceder y y ya estuviera en c y d como peterson s es justo entonces tendría que pasar c después de D no O sea no podría pasar d y d y d y d otra vez si lo ven entonces la idea aquí es que si
(26:59) uno o sea en conjunto la ejecución como que los cuatro hilos trabajan en conjunto para que no puedan como que o sea para que no sea justo sí como se dan cuenta que en esta ejecución está a está d pero al mismo tiempo o sea a eh estuvo en una contienda con b pero acá se está trabajando bueno no está trabajando No para que este este argumento sirva acá Tiene que ser que c no está tratando se no quiere entrar ahorita a la sección crítica porque si quisiera entrar pues ya no O sea tendríamos que buscar otro otra
(27:44) ejecución Pero la idea aquí es que está a está D B estuvo con a Pero como a todavía no hac el un lock pues B se queda esperando en el lock un y C no quiere entrar a la sección crítica entonces d puede ganar y ganar y ganar el candado y el otro candado Pues también lo puede ganar y ganar y ganar mientras a este medio muerto no O sea mientras hace retrase sí lo ven pero sé en un inicio si quería entrar a la sección crítica entonces Sigue esperando sí Ah bueno en un inicio se supone que es no debería entrar si lo
(28:41) puse perdónenme pero se supone que no entonces ahí les otra vez imagínense est tienen a b y del otro lado tienen c y d pero c no quiere entrar No si y porque cuando degana l3 por segunda vez donde está a okay Ahí les va este pero sí Eduardo tienes razón entonces s se supone que no debería querer entrar no pero acá están los dos o sea a esos dos les toca el candado dos pero se ahorita no quiere entrar porque si no no funcionaría nuestra nuestra ejecución acuérdense que es más fácil eh encontrar un contraejemplo simple entonces imagínense
(29:27) que estos dos están peleando por el candado uno a ver Tengo una hoja en blanco a mejor se los pongo acá entonces imagínense que a y b están peleando por el candado un y en el peterson normal puedo pasar lo mismo que hace retrase y entre siempre que quiero la diferencia aquí es por el unlock Okay vamos a eso pero se supone que no O sea como peterson es justo e no me acuero quién lo decía pero sí como o sea la forma en la que peterson está hecho hace que cuando uno salga de la sección crítica automáticamente el otro este puede entrar por la parte
(30:20) de de la víctima no sé si acá tengo el Peter Ah bueno no pero bueno ahorita lo vemos chequen esto y ahorita buscamos nuestro peterson para para revisarlo Este es el doble peterson acd Entonces Acá está a y b y a a y b le toca l1 no y luego está d y a c y d le tocan L2 pero ahorita c no quiere entrar entonces imagínense que aquí aquí a y aquí gana d entonces tienen esto no que a y d van a buscar el l3 sí por la línea esta de acá entonces a ya tuvo su candado o sea ella obtuvo el candado l1 deella obtuvo
(31:27) el candado L2 pero a ver aquí se queda a Ah se quedó aquí no Ah se quedó aquí durmiendo Sí o sea obtuvo el candado y de ahí se durmió entonces pasa d a l3 y como a se durmió Pues el único que ahorita ahorita en este mismo momento quiere entrar a l3 es B porque a todavía no ha recorrido esta línea de acá y no ha pedido el l3 porque se quedó dormido automáticamente después de que busco el L2 Sí entonces Busco el el log 2 obtuvo El log 2 Pero luego se quedó dormido sí lo ven Entonces el punto aquí es que d como a se quedó dormido de pudo
(32:29) entrar a esta sección crítica entonces digo Bueno d obtuvo El l3 No porque no había nadie más contendiendo con él porque a está dormido y todavía no pide el l3 entonces d entra la sección crítica sale de la sección crítica Y entonces lo que hace eso es que básicamente este candado se quede libre y este candado se quede libre este L2 pero como ahorita a nunca ejecuta log 3 log Sí sí sí Ah No espera Ah Todavía no se se supone que sí pero como está dormido todavía no o sea todavía no llega para ejecutar el lock 3. lock
(33:18) tiene que pasar por esto de acá pero si te das cuenta ha está dormido aquí entonces Todavía no ha pasado o sea lo va a hacer pero ahorita está dormido y todavía no ha llegado a esa línea o sea tuvo un retraso Sí entonces La idea es que este d ya hizo el unlock pero a sigue dormido entonces a todavía tiene el retraso y como c no quiere entrar Pues de vuelve a hacer esto no de vuelve a hacer esto de vuelve a hacer esto y en este punto cuando D está aquí aquí d está aquí d está aquí o sea la ejecución está aquí en este punto a
(34:07) despierta y Entonces ahora sí ya hace lo que tú dices Eduardo va a ejecutar este log 3. log pero de ya lo ocupó s Entonces deella lo ocupó y Ah no inventes Entonces se tiene que esperar a que de AC para a pasar a la sección crítica o sea cuando D haga un log ya va a pasar a O sea ya va a ejecutar log 3. log pero para este punto D ya hizo este o sea si se dan cuenta de entró a la sección Esta es la de D Esta es la de a imagínense que llega aquí está entonces aquí ap l1 en ese mismo momento pide el L2 pero acá llega este dice no pues el l3 Sí
(35:09) entonces hace el l3 aquí hace el unlock del l3 vuelve a pedir el L2 y para este momento hace el l3 Y entonces casualmente lo agarra d por ies de la vida y ya hasta acá es cuando le dan el candado Y acá es cuando haces unlock unlock pero si se dan cuenta la sección crítica de de D este pues rebasó a la sección crítica de de de a no ya como se queda dormido pues Hay muchas formas o sea en la en la vida real puede ser que que a esté en un procesador que se sobrecalentó Y ahorita no está
(36:13) funcionando o o que pues la ejecución de a haya tenido un retraso o o sea en general son cosas más como de del Hardware que del Software pero pero pasa no O sea que un hilo se quede dormido o incluso puede puede ser que entre en un O sea que que lo metan a dormir porque puede ser que este cómo se llama Ah sí O sea que tengan una restricción como que los servidores en los que están trabajando donde no pu no puedan estar trabajando tantos hilos al mismo tiempo entonces casualmente este metieron a dormir a porque están trabajando más hilos al
(36:57) mismo tiempo de los que deberían Entonces se quedó dormido o que el procesador le haya dado más tiempo de ejecución a Exacto el procesador le haya dado más tiempo ejecución todas esas cosas entonces este Kenia decía dejen Busco mi Dónde está el otro Ahí está debe estar por aquí este acá está entonces o sea s Hay muchas formas de que ya se quede dormido literalmente cuando estén bueno que un hilo en general se quede dormido no Entonces me hab preguntado en el peterson normal puede pasar lo mismo que hace retrase yentre siempre que quiera o
(37:42) la diferencia que es la diferencia creo que es por el lo Porque mira aquí vamos a vamos a borrarlo vamos a subirlo nada [Música] más entonces Imagínate que llega a y a está a y está b como siempre este es nuestro peterson lock no entonces llega y dice Ah Oye mi Yo quiero el entrar a la sección crítica entonces pongo flag equ true la víctima me pongo a mí y este y al mismo tiempo llega b y pone su bandera O sea la bandera de b y la bandera de a la bandera de B la ponen true y luego la víctima se pone
(38:46) é entonces FL del otro Ajá entonces Ah bueno imagínense para este punto no para este punto Ah está aquí y como la bandera o sea B acaba de poner su bandera en true Entonces esto se cumple y luego esto se cumple entonces a este cómo se llama Ah está en este en este While no O puede que a O sea a puede quedarse dormido aquí o puede que a he dormido aquí pero en ninguno de los dos casos B puede entrar a la sección crítica porque o sea bueno imagínense que ve entra la a ver va nu está a y todo el rollo y luego está b y casualmente B
(39:48) gana la sección crítica entonces para que vengan en la sección crítica esto se cumple y luego esto se cumple porque acá ya puso imagínense que B ya escribió que la víctima es él Entonces para este punto la víctima es él y esto se borra o sea se actualiza se actualiza y la víctima ahora es B No mejor Bueno si la víctima es B entonces a puede entrar a la sección crítica Ah entra la sección crítica porque la víctima o sea bella se puso como víctima Entonces él ya puede pasar no O sea la bandera del otro si es true
(40:37) y luego la víctima es el otro Entonces él ya puede pasar y luego imagínense o sea ve ya entra la sección digo a entra la sección crítica a hace el unlock O sea ya después de que hizo lo de la sección crítica hace el unlock y vuelve a entrar Entonces si ve se queda dormid en este punto está en este punto si ve se queda dormido en este punto y ya vuelve a pasar o sea vuelve a decir Ah bueno Mi bandera Porque si se dan cuenta en el onl hacen que su bandera sea falsa no entonces hace la bandera luego se pone a sí mismo como la
(41:21) víctima y luego la bandera del otro sigue siendo true Pero él es la víctima o sea él es el último que se puso como la víctima y como él es el último que se puso como la víctima él es el que se va a quedar esperando hasta que despierte o sea el problema acá o sea bueno la lo que hace que peterson sea justo es la víctima no el último que entre por por Pues por como está hecho el algoritmo el último que entre va a ser el último que se ponga como víctima Y pues el que se ponga como víctima no va a entrar no se se va a quedar esperando
(42:01) Entonces como la víctima ya no es b b es el que sigue que tiene que entrar aunque esté dormido todo el mundo se va a esperar a que B despierte para que entre a la sección crítica bueno no todo el mundo Ah se va a quedar esperando a que ve entre la sección crítica si lo ven Peter justo Injusto exacto va entonces hay varias formas de meter el problema de los prisioneros e Bueno hay varias formas no la la la la la que yo uso es bueno para empezar acá en este punto tienen que Ah diseña la solución Argumenta porque tu solución es correcta Ajá en este
(43:05) Argumenta porque tu solución es correcta tienen que demostrarlo por inducción sobre el número de prisioneros o sea imagínense que el número de prisioneros sea acá entonces tienen que demostrar por el número de prisioneros incluso su caso base lo pueden poner como bueno no caso base si pónganlo como uno porque no puede haber cero prisioneros porque porque si no ya no existiría este problema pero acá lo tienen que demostrar por inducción entonces k = a 1 luego k ig a n y luego K igual a n + 1 entonces su algoritmo básicamente
(43:39) tienen que poner su algoritmo Uy tienen que poner su algoritmo acá y demostrar Por qué jala para un prisionero suponer que funciona para n prisioneros y ya nada más por hipótesis inducción demostrar Por qué funciona para n + un prisioneros Entonces más o menos tienen la idea de de cómo lo van a hacer lo lo que tienen que tomar en cuenta acá es que tienen tres logs tienen o bueno interruptores no tienen l1 L2 y l3 Entonces lo pueden hacer de varias formas Pero una de las formas que lo pueden hacer No sé si ya vieron el
(44:26) problema de los prisioneros no normal con la maestra No ya haban el problema de los prisioneros normal con la maestra no Ah bueno bueno si no lo vemos el martes pero a ver ahorita enfoquémonos en este e la idea o sea están los prisioneros no están en en una cárcel se encuentran n prisioneros y dos guardias lo que si se entrega el sábado pero este lo vemos ahorita o sea el otro lo vemos luego pero este lo vemos ahorita a ver de me apuro si no le pide a la maestra que les dé más tiempo entonces El guardia a lleva un
(45:18) prisionero a la vez un cuarto para alimentarlo en ese cuarto existe un interruptor que es el l1 no y este día pasa a cada prisionero al menos una vez cada dos en veces no entonces ahí lo que los dice es que lo que tienen que tener en cuenta ahí es que siempre van a pasar los prisioneros tanto para alimentarse como para bañarse no y hay un interruptor en cada cuarto hay un interruptor en la parte de de pues como la cocina o sea en el donde los alimentan y hay otro interruptor en la parte para que se bañen y luego hay uno
(45:55) donde están como que todos ahí encarcelados no O sea todos los prisioneros se encuentran en un cuarto y está el interruptor l3 entonces una forma de hacerlo es que los prisioneros acá incluso la maestra les el hint y dice eh No todos los prisioneros tienen que hacer lo mismo no entonces este acá los prisioneros se ponen de acuerdo en asignar a un solo prisionero que cuente No que sería como su contador o en distribuida sería como que el el servidor central Entonces los prisioneros se ponen de acuerdo en asignar a un solo prisionero que cuente
(46:34) mientras que todos los demás pasan lista una sola vez Entonces imagínense o sea acá El problema es que está el cuarto no donde están todos y luego sale un prisionero y para determinar y va o sea sale acá y entra y dice Ah Oye yo vengo de comer el problema acá o sea lo complicado es que puede que haya ido a comer dos veces o sea es que no sé cómo explicar pero imagínense están el cuarto de alimentos y está el cuarto donde se bañan entonces lo que o sea lo que pensarían como intuitivamente es que ponen a un contador acá y dice Ah Oye
(47:28) si te bañaste o si comiste Ven y prende el interruptor no y ya yo lo apago para que si alguien más va a volver a entrar pues lo pueda aprender y yo cuento este pues dos n veces no El problema es que no O sea si ustedes cuentan dos n veces que alguien prendió el interruptor puede ser el mismo prisionero entrando y saliendo de la comida Entonces eso no significa que todos ya estén bañados y alimentados s lo ven como que esa es la parte complicada entonces una vez que vean eso este tienen que como que buscar otra solución lo lo lo chido aquí es que
(48:08) tienen tres interruptores no O sea no solo tienen este interruptor tienen tres entonces ahí les va e un prisionero o sea el prisionero que designaron este va imagínense que es el prisionero a Entonces el prisionero a cuenta las n veces que l1 este el interruptor de acá ha estado encendido y luego ese mismo prisionero cuenta las veces que este ha estado encendido entonces lo que van a hacer aquí es que básicamente Este es el prisionero que cuenta el prisionero a y luego tienen eh sí un bondo prisioneros un buo prisioneros Y entonces llega alguien y
(49:05) dice Ah Oye a mí ya me llevaron a comer voy a prender ese interruptor acá es poco eficiente o sea pero es o sea sirve no pueden encontrar formas más eficientes pero esta es la forma como que más más fácil de verlo porque además es su segunda tarea entonces imagínense que llegue este prisionero y dice Ah bueno yo ya comí entonces voy a prender el interruptor de la comida entonces la luz ya está prendida no de la comida y todos los demás que entren a comer pues van a ver la luz prendida y ya no van a hacer modificaciones hasta que llegue este
(49:43) prisionero a y diga ah está prendido este está prendido este interruptor Entonces lo apago y cuento uno y luego cada prisionero tiene que tener un contador interno No si yo ya prendí el interruptor pues ya no lo vuelvo a prender no O sea si yo ya comí ya no vuelvo a avisar que ya comí si ya comí no vuelvo a avisar o sea si ya avisé No si ya avisé no otra vez Entonces cuando un prisionero prende el de la comida este y vuelve a entrar pues ya no lo va a volver a aprender entonces la idea aquí es que un prisionero va a llegar va a comer y va a
(50:31) prender el interruptor Entonces hasta que llegue el general o bueno el contador va a decir Ah está prendido entonces cuento pongo uno yo más en mi libreta y lo apago para que alguien más lo pueda aprender entonces alguien más que no ha comido bueno que no ha avisado que comió porque puede que ya haya comido pero no haya avisado entonces alguien más que no haya avisado va a prender el cuando coma y vo a decir Ah ya comí y van a pasar así un buen de prisioneros hasta que llegue el prisionero este contador y diga Ah okay
(51:06) Entonces este alguien más ya comió Y lo cuento si se dan cuenta esto es poco eficiente porque pasan muchísimos hilos antes de que tengamos la certeza de que pase el contador no O sea no tenemos una certeza de que el contador va a estar como que pasando una vez sí Y una vez no entonces Pues ese es el como que el punto No pero o sea si es ineficiente pero es una forma que funciona y es una forma fácil de verlo y si ustedes ven esto así después les van a estar surgiendo o sea les van a salir este nuevas como que cómo se llama nuevas
(51:46) formas de de optimizarlo por el punto es que primero lo vean y luego lo lo o sea lo optimicen Entonces sí lo ven o sea llegan un prisionero x y va come y prende la luz porque él no ha avisado que ya comió entonces después de que pasan un buen pasa el cont eh Pasa el prisionero contador y cuenta y luego si vuelve a pasar este prisionero x ya no avisa porque ya avisó Entonces ya con esto tienen la O sea lo tienen que Mostrar pero ya con esto tienen la la certeza de que van a avisar que ya están todos listos bañados
(52:25) y alimentados cuando justamente todos estén bañados y alimentados no porque alguien no va a volver a avisar si ya avisó Entonces el prisionero este contador no va a contar dos veces a una persona o así O sea más veces a una sola persona no sí lo ven y pasa lo mismo cuando se bañan o sea llega alguien y si no se ha bañado Ajá el interruptor l3 que tiene que ver en este caso nada o sea en esta solución nada pero para optimizarlo o sea les digo que hay diferentes formas de hacer este algoritmo pueden usarlo para
(53:12) optimizarlo pero pueden usar l1 y L2 y con la comida con la comida qué Ajá ese mismo contador cuenta las veces que se bañan Pero entonces acá Este contador tiene que tener comidos tantos bañados tantos entonces Y entonces avisaría cuando el contador cuente 2n Más bien avisaría cuando comido sea n y bañado sea n porque si te das cuentas son dos tienen que ser dos variables diferentes porque puede es a lo que voy no puede contar dos n veces pero esas dos n veces pueden ser que todos comieron doble Y ninguno se ha bañado por eso tienes que tener dos
(54:08) variables para que todos estén comidos y todos estén bañados Porque si nada más pones una variable de contador Ah Oye cuando avisa cuando cuentes dos n veces puede pasar que cuentes pero solo cuenta una vez si comen no Avis si comen dos veces Ah pues sí pues sí sí sí O sea sí lo puedes tener como 2n pero lo ideal sería que este o sea sí lo puedes hacer así pero lo ideal sería que tuvieras dos variables por si lo quieres optimizar después pero s lo puedes Entonces si el el contador avisaría Cuando conte 2n entonces cada que actualice su contador
(54:51) tendría que revisar que que todavía o sea tendré que revisar si ya llegó a 2n No si ya llegó a 2n pues ya va a avisar si lo ven y podemos suponer que puede contar ambas cosas a la vez por ejemplo que un prisionero vaya a comer al mismo tiempo que otro se baña y que el contador cuenta ambos no no O sea no tanto porque date cuenta para que el contador lo cuente el contador tiene que entrar aquí o sea tiene que que entrar bañar es 3n no Ah sí pero se refiere a O sea si 3n de las veces en las que pasa pero se refiere a como es comidos y bañados se
(55:40) refiere a que tiene que contar Por ejemplo si es si son 10 tiene que contar 20 para decir que o sea 20 veces porque son 10 que ya comieron y esos mismos 10 Ya se bañaron Entonces serían 20 pero Ajá un prisionero vaya a comer al mismo tiempo que Ah sí pero este prisionero o sea el prisionero contador tiene que entrar al cuarto de la comida para contarlos Y luego tiene que entrar al cuarto de donde se baña para contarlos entonces no puede entrar a los dos al mismo tiempo por eso no puede suponerlo porque tiene que entrar es como si fuera una
(56:20) sección crítica que de hecho es una sección crítica no puede entrar a los dos al mismo tiempo porque pues un Nilo nada más puede estar en una sección crítica a la vez Entonces entra al de la comida o entra donde se baña o se queda en el cuarto donde están todos los reclusos sí lo ven exel y no habría problema si un prisionero come y otro se baña el contador conta el de la comida pero qué pasaría si otro más entra el baño y aún no se ha contado Cómo cómo o sea es lo mismo o sea imagínense o sea un prisionero está
(57:09) comiendo y otro prisionero está bañándose Eso sí se puede o sea eso sí es posible en esta ejecución pero este este va a prender el interruptor l1 y este va a prender el interruptor L2 Pero puede el contador entrar a esos cuartos sin el policía para verlo interruptores no O sea eso sería que suponemos que eventualmente se va a contar una sola vez no Ajá sí es la idea O sea no puede no tiene que ir con el policía o sea no puede entrar y entrar entrar eso sería como que lo ideal pero pues no puede no entonces la idea aquí es que este pues o
(57:49) sea está un un prisionero bañándose y un prisionero comiendo pero este este va a prender el interruptor si no está prendido y si no avisado este y este también o sea va a pasar lo mismo nada más lo va a prender si no está prendido y si no ha avisado que ya comió Entonces cuando el contador entre O sea ya después de aquí van a entrar muchos prisioneros pero hasta que entre el contador es que va a contar a uno más entonces en si no hay problema que los dos estén comiendo y bañándose al mismo tiempo porque aquí
(58:29) cuando entra o sea nuestro unlock aquí sería que que apague el interruptor no para que alguien más lo pueda aprender sí lo ven Saray etel asuras va si tienen Cualquier duda me mandan Telegram digo Telegram este mensaje en discord y lo revisamos va Cuídense mucho Bonito fin de semana Bye Nos vemos el martes Bye
