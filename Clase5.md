2024 08 12 10 01 21 - YouTube
https://www.youtube.com/watch?v=vpCaLNqOp6c

Transcript:
(00:29) al al Hola buenos días e les quería comentar
(02:03) que este en la sección el classroom en la sección creo que de links les puse este un link a a un documento de como de Excel Bueno del D este ahí se me olvidó pero bueno es la lista de calificaciones no es como un Excel de de Google y este y ahí eh Pues ya está como todo no lo que se va evaluar y hasta hasta el final está la lista de participaciones entonces hagan de cuenta que por semana les voy a ir contando y hasta el final se ve como el el este el aumento final sobre calificación no entonces pues depende no obviamente
(02:58) este el que participe más pues para tener un punto extra y ya de ahí los demás pues van para abajo no pero bueno es es extra no es así como que les perjudique noces nada más les quería comentar que se van lo voy a í este guardando las participaciones Ajá sí les cuento las del chat porque pues en realidad no no suelen hablar no casi O sea pues en realidad hasta ahorita nadie ha hablado como por micrófono no Entonces sí me facilita este guardarlas por chat pero igual si pueden si quieren participar con micrófono no hay problema
(03:40) también se las las cuento Sí pero sí o sea los Quiz o como cosas que preguntan este Eh bueno cosas que preguntan ustedes no como no entendí por eso eso Se los voy contando este y bueno también a la gente como que entra y pues buenos 10as diario pues les cuento Al menos una no O sea no es lo mismo con los que participan en ejercicios pero sí les cuento como la asistencia Sí pero sí o sea los que participan tal cual Sí sí para que no me dejen solar Eh sí pero bueno o sea lo importante es que participen en los otro ahí les pongo
(04:31) más o sea la gente como que entró las tres sesiones y dijo Buenos días pues digo Ah a poner uno aj o sea y les voy contando por semana Y así va Okay entonces eh Sí Cuenta igual despedirse Ajá sí porque como digamos que lo único que me cuenta este o sea no me doy cuenta como bien quién entra o sea los voy dejando No ahora ya todos los voy dejando este entrar no Y pues sí como que medio me acuerdo quién entra Pero la realidad es que luego hay gente que no participa pero hasta el final pone buenas o sea como adiós no que tengan buen día o algo
(05:09) así y este y me percato que entraron las tres sesiones ent les pongo un puntito no O sea al final porque entraron Pero obviamente pues a los que participan en los Quiz ahí sí les pongo por Quiz no y por día entonces si cuentan más Okay entonces eh el en la clase pasada vimos no O sea una intro al tema pues vimos que es la concurrencia y yo les había comentado que es este este bueno que concurrente se enfoca en analizar el entrelazado de programas secuenciales no es Sí como que ya tienen la idea y que por eso este
(06:02) paralelo distribuido entran no son un son un subtema de concurrente Aunque pues la realidad es que como como les comenté en el mundo a veces nada más hacen la diferencia entre paralelo y distribuido no aunque sean ambos de concurrente y en distribuidor meten todo lo de concurrente Pero bueno este Entonces es una disciplina y habíamos visto tres puntos muy importantes pues primero porque todo el mundo distribuido no las redes este surgimiento de las redes muy importante este y de ahí no todas las las demás iot este
(06:40) eh red celular Eh Pues un montón de redes por todos lados donde vemos vemos redes este Ah bueno Y también las Apps distribuidas no se ya todo está distribuido todo como hay tanta información pues ocupamos este Ay no empecé a grabar Este Entonces como todo está distribuido e es es el concurrente se usa luego la el segundo punto pues era la imposibilidad de disipar el calor en los procesadores entonces es por eso que en vez de poner más transistores en un procesador dijeron No pues trete más procesadores este y Eh bueno eso como que se empieza
(07:26) a hacer ya a partir bien de los 90s no y y la concurrencia no es un problema trivial como vimos el ejemplo del contador no que como tenemos tres operaciones este bueno como aumentar el valor de una variable Pues nos lleva a hacer tres operaciones este sucedían cosas extrañas no como que alguien leía un valor viejo se duría y actualizaba y todos tenían un valor viejo del contador no a pesar de que ya había cambiado Entonces eso es lo que vimos el tema pasado las dos clases anteriores entonces este este tema vamos a bueno y les voy a
(08:10) explicar no el modelo de cómputo que utilizamos que ya Pues en realidad ya se los había comentado pero este Eh ya ahorita ya más formal no vamos a ver el primer problema clásico que es exclusión mutua que coincide Pues con ser el primerito de todos el primerito que se inventó que de hecho pues dio de entrada este o sea inauguró no la la disciplina del concurrente y vamos a ver tres soluciones para este problema no que pues son candados cómo se soluciona este problema con candaditos entonces este Igual vamos a ver tres soluciones
(08:49) Eh Pues de las primeritas no con las que se solucionó este problema y vamos a ver otro problema clásico de forma muy breve hasta el final pero en realidad todo lo que vamos a ver va a ser exclusión moto Okay entonces el modelo de cómputo eh como como decía se los había comentado pero vamos a a andar como en un modelo idealizado no y que la realidad es que este modelo idealizado coincide con con Pues con Java no O sea este Por qué les digo que está idealizado porque pues nosotros no vemos andar hasta abajo y cachés no moviendo
(09:28) las memorias este O sea no no estamos a bajo nivel estamos a alto entonces aquí nos podemos dar el lujo de idealizar nuestros modelos entonces eh múltiples procesos bueno o elitos por ejemplo este este no de forma concurrente manipulan un conjunto de objetos compartidos entonces imagínense No aquí tenemos objeto un dos tres y cada uno tiene sus variables y estas variables son compartidas así que pueden ser modificadas por los hilitos no cada hilito acá pues tiene en su cerebrito Bueno o sea este cada marcianito no cada
(10:05) hilo tiene su su memoria local Entonces ellos saben acá están pensando otras cosas y de repente van y tienen que modificar la variable compartida y siguen haciendo cosas no entonces ya se dan cuenta como que aquí es eh estamos analizando el entrelazado de programas secuenciales entonces cada hilo pues tiene su programa secuencial En su memoria local y de repente pues se entrelaza con los demás y es percibido por los demás no entonces así nuestro así funciona nuestro modelo y resulta que esta es justo la definición de un algoritmo
(10:42) concurrente un algoritmo concurrente Es simplemente eh la secuencia de operaciones que ocurren es bueno de los procesos sobre los objetos es decir un algoritmo concurrente pues es el entrelazado de programas secuenciales Okay entonces así este así se define el algoritmo concurrente luego un hilo lo consideramos como una máquina de Estados Pues sí no si es un programa secuencial ahora sí que desde las desde que vimos buenoo No desde que vieron este autómatas y que vi máquina de touring y todo eso pues saben que es una máquina
(11:21) de estado simplemente este es este un hilito que pues está en un estado vamos ejemplo acero no está aquí y hace una transición perdón pues un estado así cualquiera hace una transición y esa transición en este caso le llaman acero no eh Y luego está llega a otro estado y hace otra transición y llega a otro estado no y así entonces las las transiciones van a ser a cero a uno a dos a tres Okay entonces formalmente decimos que un hilo p pues es una secuencia de de eventos Y estos eventos pues son sus transiciones
(12:01) Entonces por ejemplo si el hilo este este los perritos no Entonces si si y estamos por ejemplo en un estado aquí No Y tenemos no s en la memoria una variable local que es a esta escrita en a y después hacemos acero y no s acero que sería un gr B Entonces se modifica nuestra memoria y ahora nuestro estado en va a ser B no y luego así a1 también qué tal que es c y ahora nuestro estado acá pues va a ser en a eso se refiere entonces en en concurrente A diferencia de en secuencial tenemos a pensar un
(13:06) montón en el tiempo y pues también en el espacio no en en el tiempo en qué sentido este Bueno pues como estamos todo el tiempo analizando el entrelazado de ejecuciones ocupamos Cómo se entrelazan en el tiempo no entonces pues esta línea que en realidad pues voy a estar este mencionándolo todo curso pues esta línea de tiempo no y vamos a considerar que el tiempo va en una sola dirección que los eventos es decir estas transiciones que vimos no de la máquina de Estados de un hilo pues vamos a pensar que son instantáneos que nunca son simultáneos Y
(13:47) a qué me refiero que son instantáneos que ocurren en un solo instante de tiempo y que nunca son simultáneos que que ocurren en distintos tiempos Okay entonces este y esto nada más por facilidad vale pero miren eh Por ejemplo este Tenemos aquí dos eventos no el evento de inicio del semestre y el evento del fin de semestre Entonces si los ponemos en esa línea de tiempo podemos decir que el inicio de semestre sucede en un punto y que de hecho este inicio del semestre precede a el fin no Y si precede Entonces lo vamos a denotar
(14:27) por esta línea Okay entonces por por ejemplo a precede a b y es este lo escribimos de esta forma entonces justamente este digamos que lo que denota del inicio al fin vamos a considerarlo como un intervalo Entonces por ejemplo yo ya este cuando vimos el ejemplo del contador Pues yo les había presentado así líneas de tiempo del hilo a del hilo B del hilo c y yo les había comentado que que aquí iniciaba get an increment no y aquí iniciaba este otro getan increment no sé de alguna forma no entonces este si se dan cuenta como que
(15:13) es el getan increment es el intervalo no en lo que tarda en ejecutarse este método pero se dan cuenta que en realidad este pues tiene un inicio no y tiene un fin entonces quiere decir que eh las llamadas a métodos inician por un evento de invocación y un evento de respuesta entonces acá lo tengo este a ver eh entonces dejenlo anoto aquí no Entonces en un intervalo o se ya aterrizo en el ejemplo que vimos un intervalo es una este ejecución de un método y este inicia voy a ponerlo cono
(16:18) Inicia con un evento de invocación o seilo dice pues voy voy a invocar este método y finaliza con un evento de respuesta finaliza eh No se preocupen si quieren yo les paso al final las presentaciones Es que este no les he pasado las otras pero ya se las paso con un evento de respuesta no entonces este Así es el inicio de de la ejecución del método y el Okay entonces un por ejemplo un intervalo hablando Todavía de intervalos un intervalo vamos a denotarlo así no como I subintervalo y este intervalo Inicia con el evento a y termina con el
(17:18) evento b y este vamos a decir que precede a otro que Inicia con un intervalo c y termina con un intervalo d si B precede a c Okay entonces si en o sea como que tiene tiene sentido No si tenemos aquí a b c y d entonces entre B y C se tiene que cumplir una línea no para decir que B dice semestre inicio fin sí no este sí es esa es la longitud del intervalo no Entonces miren aquí yo les apunté este bueno intervalo a a intervalo b es solo si el evento de de de finalización de de a empieza bueno sucede antes del evento de inicio de B tiene sentido
(18:13) Entonces vamos a denotar a esta relación a la flechita como un orden parcial sobre los intervalos este y pero es un orden parcial quien sabe de conjuntos porque o sea porque bueno Esto de orden parcial pues viene de teoría de conjuntos no para decirles Entonces si se acuerda si han visto este un orden un orden parcial este no se define para todos los elementos del conjunto no Entonces es parcial porque puede ser que la relación no se cumpla entre dos intervalos por ejemplo entre estos dos el semestre anterior no el
(18:54) 20241 este 24 Bueno no más bien es el año anterior verdad Bueno imagínense el semestre que va que fue de agosto a diciembre no y otoño pues va de septiembre a diciembre Entonces este pues aquí claramente diciembre pues no se cumple que suceda antes que septiembre no Entonces qué quiere decir no se cumple que el evento de respuesta el evento de de respuesta o de término preceda al evento de invocación entonces decimos que no no se preceden y no hay una relación okay entonces por eso es un orden parcial y no un orden Total como como en conjunto
(19:53) Es que esto es mucho de conjuntos este porque no todos no todos los elementos de un conjunto se van a relacionar no puede ser que que los intervalos se traslapen como en este caso y entonces decimos que se traslapan o que son concurrentes no O sea que suceden este comparten un espacio en el tiempo no se entonces bueno por ejemplo un Quiz no sería correcto decir si s y si c d tuvieran estuvieran en otro proceso e igual b prec c igual se cumple o solo estamos hablando de esto cuando están sobre una misma línea no no sí también puede ser otros
(20:34) procesos este Ajá por ejemplo aquí no [Música] e si por ejemplo aquí este se supone que a ver dice c y d en otro proceso igual B precede a c Ajá sí O sea sí bueno por ejemplo podría ser así de esa forma aquí pues son aquí existe un traslape no tras traslape y por ejemplo aquí si sucede algo así no serían eh aquí existe una precedencia no porque claramente este termina antes no y ahora sí que Pónganse otros hilos este puedes tener la cantidad de hilos que que quieras si existe como algún otro no que tenga aquí
(21:39) pues claramente este va a ser concurrente con ambos No pero estos se van a preceder entonces o sea bueno se empieza a ha como más complicado entre más y los Vale entonces por ejemplo aquí sería correcto decir que este semestre que es el 251 no y las festividades del día de muerte Son concurrentes son concurrentes no sí no Ajá Ajá sí Exacto Sí sí sol no Por qué Y ya hacemos nuestra para no hacernos bolas hacemos nuestra línea de tiempo decimos que que este el semestre 2025 inicia en agosto y termina en noviembre no y luego tenemos el día de
(22:31) muertos que inicia aquí Ahí está que inicia aquí no no sé este que es este octubre 31 y noviembre eh dos no ahí entonces sí son concurrentes claramente porque se traslapan en el tiempo Okay y qué relación tendría el semestre 20251 con el 252 de precedencia Exacto 251 precede otro entonces simplemente sería se escriben con esta línea no Por qué se precede Okay entonces el
(23:56) problema Entonces el problema es consiste en asegurar que un solo proceso o Elo a la vez puede ejecutar eh un bloque de código particular okay Y entonces nosotros dijimos la clase anterior fácil fue un sincron el método y ya se van a acabar los problemas de consistencia no o sea porque el contador pues no contaba 1 2 3 contaba 1 2 3 no entonces este eh Y qué nos permitía este un candado Pues justo nos permitía eh hacer un un bloque Eh bueno aislarlo hacerlo que solo un proceso a la vez o un hilo a la vez pudiera ejecutarlo Okay entonces
(24:41) claramente un candado como ustedes ya saben es una solución el problema exclusión mutua Vale entonces bueno este en este en esta clase lo que vamos a hacer eh Pues digamos que es lo obvio no O sea un candado te ofrece este Ah bueno te te permite hacer que un solo hilo ejecute un un bloque de código y claramente esto Resuelve la exclusión mutua pero pues es un candado ya hecho no O sea en Java pues sincronize ya está hecho nosotros no vemos cómo se hizo el candado y en esta clase lo que vamos a hacer Es cómo fabricamos un candado no porque pues sí
(25:22) si no tenemos el candado hecho pues qué qué hacemos no O bueno para entender Qué estamos haciendo en Java cualquier lenguaje que provea un candado Vale entonces Bueno voy a presentarles una fábula muy bonita que está en el libro también si quieren leerlo es capítulo este uno del libro muy bonita entonces bueno este tenemos dos vecinos Okay Bob y Alex entonces Bob tiene su perro y Alex tiene su gato y resulta que cosas extrañas no en la vida pues este comparten el patio vale que que tienen sus casitas y comparten el patio ahí
(26:02) entre las casas entonces tienen un problemilla Y es que los El perro y el gato no se llevan entonces tienen que pues coordinarse no í un problema de concurrencia tienen que coordinarse para que puedan ocupar el patio y pues las mascotas No pues pues no sé el gato noraa el perro no entonces e no pueden estar en el patio al mismo tiempo pero ocupan estar en el patio Okay el patio es vamos a pensar que tenemos estas propiedades este del patio Pues el patio es enorme entonces si te asomas pues no ves a la mascota del otro
(26:43) o sea ocupan un protocolo porque pues como ya vieron el gato y el perro están miniaturas no entonces este Por ejemplo si el gato está fuera Bob no puede confiar en dejar salir al perro qué tal que está por ahí escondido No entonces ocupan como hae de alguna forma y luego este la distancia entre las casas es considerable entonces también no es como que muy muy útil No o sea imagínense que que Bob cada vez se tenga que ir a buscar al gato No o sea entre todo el patio o qué tal que está lloviendo y tiene que salir a la lluvia ir a caminar
(27:22) No hacia Alice tocarle no Y qué tal que le toca y se está bañando Alice no porque pues está viviendo su vida o sea tiene sus cosas eh y Ali Confía en que el gato está fuera Y pues quiere preguntarle si Oye tu gato está fuera no entonces ocupan un protocolo no Estas son las las el problema Entonces eh se diseña un algoritmo no y Bueno quién lo diseña Alice Alice este le dice mira qué te parece que yo este hago estos pasos y vamos a tener una bandera grande en las casas no entonces así imagínense que aquí está la casita de Alice y aquí está
(28:05) la casita de Bob y la bandera este está aquí no así en grande entonces ya no hay problema de que Bob tenga que ir a buscar al gato No entonces todo esto es el patio y entonces Alice dice mira yo voy a levantar la bandera este y si la si veo que la bandera de Bob está abajo O sea si si ve que Tu bandera está abajo voy a dejar salir a mi gato y cuando mi gato regrese pues la bajo y ya está no y el de Bob es un poquito más largo Bob va a levantar su bandera cada vez que quiera sacar a su perro y entonces este si la bandera
(28:45) de Alice está levantada Lo que va a hacer es que va a bajar su bandera va a esperar a que este Alice baje su bandera y cuando Alice baje su bandera entonces la va a levantar otra vez okay entonces mientras su bandera esté abajo y y de Alice no Y la bandera de Bob está arriba pues va a dejar salir a su perro Entonces este ya cuando el perro regrese va a a bajar la bandera se dan cuenta aquí pues cambia un poquito o sea digamos que este Bueno aquí se ve no Qué pasa si si ambos quieren salir o sea si ambos están van a ejecutar el
(29:26) protocolo al mismo tiempo no este pues Alice va a levantar su bandera Bob va a levantar su bandera y o sorpresa no este pues Alice este solamente tiene la opción de de que pues si la bandera de B está abajo va a dejar salir al gato No entonces pues va a volver a ejecutar el protocolo no y Bob qué va a hacer se va a dar cuenta que la bandera de está levantada y va a bajar su bandera ya vieron o sea Alice Pues no le importa no O sea este Bob Bob es el que siempre como que va a ceder no el perro cede y Y entonces Espera a que
(30:12) la bandera de Ali se baje Y entonces mientras Alice vuelve a ejecutar el protocolo y pues Bob como el protocolo está de que Bob si ve la bandera de al levantada la tiene que bajar Entonces el gato es el que sale Okay y ya una vez que que este el gato Sale pues Bob tiene que esperar entonces se va a quedar aquí o sea va a bajar su bandera y va a quedarse aquí Entonces digamos que en el punto 2.
(30:50) 2 este Bob espera Muy bien Entonces eso pasa luego este si o sea el escenario dos no porque hay varios escenarios es en el cómputo concurrente digamos que siempre vamos a estar nosotros viendo escenarios este Porque la realidad es que dependemos de cómo se ejecuten los métodos no Entonces ese es el punto uno cuando como que el feo no cuando los dos quieren justo al mismo tiempo el punto dos es si este por ejemplo un escenario dos si solo el gato quiere si solo el gato quiere pues solo va a estar esta parte de el protocolo no
(31:29) y va a levantar la bandera este Bob no quiere entonces la bandera de Bob estar abajo el gato saldrá y regresará y listo no ahí ahí este termina escenario luego el otro escenario es si este solo el perro quiere quiere salir entonces claramente la bandera del gato de Alice para abajo este y Y entonces Bob eh No se va a cumplir este punto entonces Bob va a ir hasta el punto tres y va a decir Ah mira mientras su bandera está abajo y la mí arriba dejo salir a mi perro Okay muy bien entonces este y los dos cumplen que cuando su mascota regrese
(32:19) bajan la bandera y ya está Vale listo entonces eh vamos a este analizar esto no ya con de forma estricta Entonces el algoritmo solución el problema en la exclusión mutua Pues sí no Y cómo está la demostración pues así este muy muy larguita o sea bueno como que mucho mucho texto pero miren simplemente lo que vamos a hacer es que por contradicción asumir que ambos terminan en el patio juntos no como en la imagen Entonces qué tendría que pasar para que ambos estuvieran eh en el patio Juntos por ejemplo para Alice pues Alice tuvo
(33:04) que haber visto la bandera de Bob este abajo no eh entonces eh Por ejemplo vamos a escribirlo con esta anotación no este Alice vio Eh bueno voy a poner así este flag de Bob en falso no O sea vamos a ponerlo hacia abajo y entonces Alice para que Alice esté adentro o sea para que su gato esté dentro pues su flag debería de estar arriba no pero sorpresa para que esté en el patio sea para que su perro esté en el patio pues debió estar en verdadero y la de Alice porque Bob sabemos que siempre
(34:06) cede este él se debió asegurar que su bandera estaba en falso entonces aquí pues hay una contradicción porque pues claramente no ocupan este es muy importante nunca puede suceder esto porque de hecho este sucede primero no es es este punto o sea Ali siempre pone su bandera en verdadero antes de ver la bandera de Bob no y Bob pone la bandera en verdadero este esto pasa primero antes de ver la bandera de Alice Okay entonces ahí o sea nunca podría pasar porque el orden en el que se Ejecutan estas estas instrucciones es que primero ambos
(34:55) levantan su bandera Okay entonces no puede ser que vean la bandera abajo del otro si es que no la han bajado no O sea ambos la tienen supone que arriba no entonces Alice no va a bajar no va a dejar salir a al gato hasta que la de Bob esté abajo y Bob no va a dejar salir a su perro hasta que la de está abajo entonces se cumple se cumple No ya pues esto es lo que lo que dice aquí entonces Bueno les voy comentar el algoritmo pues no es muy satisfactorio este y bueno ustedes ya lo lo vieron no para Bob como que no es muy
(35:35) satisfactorio al está todo dar no este Y por qué no sería satisfactorio pues miren este que un algoritmo pueda pueda solucionar la exclusión mutua este de hecho se puede solucionar de forma trivial no O sea si la exón muta te dice que solamente una persona Bueno una mascota a la vez debe estar en el patio pues lo podemos satisfacer trivialmente si decimos que nadie nunca sale No o sea es como trivial solucionar este problema pero por eso ocupamos que además se cumplan otras propiedades Okay y se las voy a presentar la primera
(36:17) propiedad Además de exclusión mutua que nos gustaría que se cumpliera es este deathlock free y bueno esta propiedad este Vamos a ponerle es que se suena la verdad no me gusta Por eso siempre les pongo así pero libre de candado muerto está como feo No yo pratic anda muerto e Okay entonces esta propiedad nos dice si ambos quieren sacar a sus mascotas Entonces al menos uno tendrá éxito Okay Eh entonces ustedes creen que se cumpla esta propiedad o sea siempre uno tendrá éxito Sí si Dice Eduardo que s también sí exacto no s y por qué dice
(37:13) bueno en este caso al contrario no yo creo que s pas Bueno este ya respondiendo así Si ambos quieren sacar sus mascotas al menos tend y ese uno Quién es Alice no O sea sí porque Alice siempre puede salir y por qué Porque Bob siempre cede no esa Generalmente el gato no esto se cumple para para Alice no O sea bueno Pero ya vieron lo que pide Death o se está libre de cando muerto lo que nos pide es que al menos uno salga no al menos uno tenga éxito y sí no se sea no los dos este podría pasar que no salga no y lo otro la otra propiedad que es más
(38:12) fuerte que deadlock free es starvation free starvation es se llama libre de inanición les digo que suenan bien feos no libre de inanición este y esta propiedad nos dice que si alguien quiere sacar a su mascota eventualmente lo hará es así no creo que siempre se cumpla Exacto sí como dice Sebastián no Camilo no se cumple puede ser que nunca bajen su bandera exacto no sí pue puede ser que nunca baje O sea qué tal que Alice eh nunca meta su gato yob pues está este esperando no El perro ya quiere pero pues no va a salir no va
(38:54) a salir hasta que Alice este baje la bandera o imagínense que Alice este se va de vacaciones pero deja la bandera arriba Este y pues no no va a salir no Entonces esta propiedad lo que nos dice es que si alguien ya vieron es distinta la redacción si alguien entonces quiere decir que todo aquel no O sea traducción todo aquel que no ya que quiera sacar a su mascota eventualmente lo hará pues no se cumple como bien dijeron No no se cumple e y ya pues la explicación es porque a s qué tal que el gato se va por días y
(39:37) Alice nunca la baja no o sea porque Bob no sale eh si Alice no baja la bandera no y y bueno porque Bob siempre sebe entonces lo malo entonces a usar banderas nuestra buena opción Sí de hecho este van a ver Bueno o sea si es buena opción pero hay que acompañarlo de algo más no nada más digamos que este se soluciona el problema con un solo bit no una bandera este uno o cero true or false no y y este es muy hábil no O sea este solamente un solo bit para solucionar este problema vamos a ver que que se ocupa un poquito más no este vamos a
(40:34) ocupar otro bit otro bit má Okay entonces eh otra otra propiedad es Waiting no y está relacionado con el F tolerance con la tolerancia fallas este de distribuido O sea que vieran distribuido ustedes Entonces se espera que nadie espere por un gran periodo de tiempo no lo que nos dice Waiting pero si se dan cuenta este bueno la ven que no se cumple Ajá sí no se cumple exacto no sí y de hecho este no se cumple y de hecho esto se cumple o sea se se ve hacia los dos lados no porque Alice independientemente eh Si ve la bandera de bopa arriba pues
(41:21) ocupa no vas a dejar salir al gato hasta que vea la bandera abajo y qué tal podría ser que también Bob se fue de vacaciones dejó la bandera arriba y el gato nunca va a salir no O sea como que la tolerancia fallas como que no es muy buena cuando usamos este pues candados no O sea cuando el progreso por ejemplo de Alice depende de que Bob baje la bandera o el progreso de Bob depende de que Alice baje la bandera no Vale entonces este no se cumple porque Bueno voy a ponerlo así ambos necesit que la bandera del otro esteé
(42:07) abajo Okay entonces así moraleja como como dijo Fer dice este qué onda no O sea O sea que con un bit o sea con una bandera no se puede pues miren o sea como que la fábula nos muestra que este problema de exclusión mutua sí puede ser resuelta Eh Pues feamente no pobremente porque pues ya vimos que nada más se cumple de las tres propiedades que les mencioné solo se cumple deadlock free no O sea libre de candado muerto entonces e si se puede solucionar con solamente un bit no O sea solamente es una bandera eh cero o uno y
(42:54) este y este esta bandera eh Bueno de hecho son dos variables de un bit no porque Alice tiene su su true or false o su bandera y Bob tiene su bandera entonces eh cada variable no de cada uno por ejemplo Alice pues va a poder escribir en su bandera no claramente y va a poder leer la del otro pero no puede cambiar la de Bob y Bob puede leer la de Alice Este pero no puede cambiarla pero sí puede cambiar la suya no por eso aquí se refiere a que son dos variables y y aquí pues est single grer o sea un solo escritor
(43:38) multier varios lectores vale por qué porque solamente yo puedo escribir mi variable Pero alguien más o otros más la pueden leer vale Y este protocolo la realidad parece que quién podría usar este protocolo tan chfa no pero pues es lo que se ocupa las interrupciones en un sistema operativo moderno no O sea e está funcionando el procesador y de repente alguien alza su bandera y dice yo quiero pasar no y el procesador le va a dar ahora sí que le va a dar ciclos de procesamiento este una vez que considere no que acabe pues va va este con esa
(44:21) como digamos que la con la bandera va a este pues a darle ciclos de procesado no va a terminar y va a decir Ah mira eso quiere pasar es como que lo que funciona no en sistemas operativos quien Ya llevo este como que estos protocolos así medio chafes no pero pues la realidad es que en t mismo sistema operativo no te importa no O sea o hay tareas que no tienen tanta prioridad entonces Está bien Okay entonces definiendo así eh Bueno vamos a formalizar este problema de lación mutua y para ello vamos a ver este concepto de una sección crítica
(45:00) entonces eh una sección crítica simplemente es este bloque de código que solo puede ser ejecutado por un bloque a la vez no sea nada más le pusimos nombre Entonces si si esto lo queremos meter en un candadito pues Esto va a ser nuestra nuestra sección crítica Okay Digamos que es la zona peligrosa no y este yo luego la abrevio así la critical section y también así la abrevian en en el libro La critical section entonces Eh Pues un cantado nosotros ya sabemos no O sea eh ustedes me habían comentado pues le puedes poner sincronize
(45:47) aquí Este y yo también les comenté no o también le podemos poner eh podemos tomar el candado y dejar el candado no un candadito pues funciona de esta forma es la forma estándar tienen un método para digamos que lock tomarlo y unlock para dejarlo Okay y poner en candado también garantiza que el proceso termine de hacer lo que está ejecutando cómo Bueno haz de cuenta que que lo que esté dentro de de la sección crítica H lo que esté dentro de la sección crítica o sea digamos que esto lo que está dentro del TR eso no lo va a poder ejecutar
(46:37) Ajá es sin interrupciones pero por ejemplo depende también el candado que estemos utilizando ya vamos a ver después que pues va a haber candaditos que tengan un límite de tiempo por ejemplo hay candaditos con esta es la critical section no y y la idea de una critical section es que hasta que el hilo haga unlock este alguien más podrá ejecutar es la idea de una critical section Pero bueno vamos a ver después en la práctica vamos a ver sobre todo que este hay candaditos que tienen Time out no O sea como tiempo de expiración hay
(47:33) candaditos que tienen este como Bueno vamos a ponerlo así este método weight no que pues como está ocupado el candado se van a esperar por ahí no O sea como que sí hay hay cosas este hay candados con interrupciones que nada más les das así como de que solamente los procesos se tarden les damos este un segundo para ejecutarlo si uno lo ejecuta se libera el candado de forma automática y que alguien más Lo ocupe hay candados así entonces bueno este vamos a decir que un candado bueno que Perdón que en un candado unilo está bien
(48:17) formado bien formado si cada sección crítica tiene neidad un solo candado o sea no puede ser bueno Esto de bien formado nada más es como este las condiciones eh del problema Okay entonces Esperamos que que una una sola sección crítica tenga solo un candado son nada de que le pusiste ahí tres candados a la misma sección crítica Okay Eh entonces también cada vez que se llama al método lock Entonces se trata de entrar a la sección crítica y cada vez que se llame el método lock se sale de la sección crítica Okay como que definiendo aquí
(48:55) bien este las condiciones de ejecución de un candale Entonces ya aquí vamos a formalizar estas propiedades que vimos que es este deadlock free starvation free y vamos a ver otra que se llama justicia entonces este vamos a denotar como una sección crítica o sea como había puesto critical section vamos a denotar así y vamos a decir que estaa sección crítica representa este es la sección crítica que tiene el hilo a y que toma por jma vez okay Entonces esto a esto se refiere vale la notación Entonces por ejemplo si la
(49:48) tuviera el hilo B no y lo ve y fuera su y ésima vez en tomar esta sección crítica se denotaría de esta forma Vale entonces un algoritmo de loog no O sea un algoritmo de candado debe satisfacer las siguientes propiedades la primera así ya viéndolo este e formalmente pues una exclusión mutua significa que la sección crítica de distintos procesos nunca se traslapan Okay entonces quiere decir que como se acuerdan esta línea que esta flechita que vimos a escribo mejor con ro con esta flechita que vimos indicaba que
(50:35) existía precedencia Okay entonces siempre tiene que pasar que si tenemos secciones críticas de dos hilos distintos por ejemplo del hilo a y del hilo B entonces una tiene que preceder a la otra okay O sea no se pueden traslapar o al revés o sea este por ejemplo aquí pues sucede primero a a b y aco pues B a a no y es la cima vez que B toma esta sección crítica O sea que B pasa por ahí que B ejecuta ese código y es la jima vez que que ejecuta ese código no sea eso nada más es indistinto no no sabemos Cuántas veces este vea
(51:15) ejecutado ese código no se CA más veces y entonces quiere decir que este que la sección crítica voy a Aquí voy a ponerlo así no a y b Entonces por ejemplo en este caso sería la sección crítica de a y la sección crítica de B este es la parte en rojo Okay entonces sucede antes vale Y no puede pasar esto no O sea que exista existe una sección crítica de que se traslape con una sección crítica de B okay O sea no puede ser porque aquí se llevan encio Entonces eso es lo que como que ya formalmente en la exclusión mutua se refiere a
(52:09) esto Vale y deadlock free nos dice que si si algunos Hilos trat de adquirir el candado entonces algún hilo tendrá éxito Okay Eh entonces muy importante no muy importante en deadlock free decimos que algún no O sea por ejemplo acá decíamos que nuestro protocolo Sí satisfacía este deadlock free y este porque al siempre o sea bueno siempre que que no se qu de ahí pasmado No ya siempre va a poder entrar siempre va a ceder y siempre va a adquirir el candado Entonces esto implica digamos que est que esta propiedad se cumpla
(52:52) implica que que el programa nunca se va a congelar okay Entonces si el hilo a ejecuta el loog pero nunca quiere el candado no Entonces no de tiene a los demás y este y aquí Bueno es muy importante pongo de completar un número infinito de veces secciones críticas no Entonces por ejemplo aquí este a trata de adquirir el candado y no lo logra no no lo logra entonces B este no le afecta a b y entonces ve puede adquirir el candado una y otra vez oa Por eso digo un número infinito de veces dice zuriel en este en este ejemplo Entonces ve
(53:54) ocupa dos candados es muy importante que lo que en realidad hace Ve Es que este eh No ocupa dos candados veo ejecute la misma sección crítica pero este aquí por ejemplo es la cima vez que toma O sea que ejecuta ese bloque de código se da el lujo de dejar el candado lo vuelve a tomar y ahora ejecuta ese bloque de código k+ un veces Okay y la siguiente vez que lo ejecute sería la más dos veces que lo ejecuta y así por no lograría adquirir el candado por ejemplo este nuestro protocolo en el de Alice y Bob que acabamos de ver si se dan
(54:39) cuenta si si sucede que voy a ponerlo aquí si sucede que tenemos a tenemos a Alice y Y si sucede que Alice este aquí pone no este flag de voy a ponerlo de a en true no Y entonces aquí este imagínense que aquí tenía FL de B en No él hizo eso Entonces este bueno pan AC sucede antes en el tiempo no entonces Bob ve la bandera de Alice Y entonces Bob dice Ah Disculpa Alice no y aquí entonces dice mi bandera a falso y entonces Alice dice Ah muchas gracias no Entonces él está en el patio está en el patio
(55:43) no Pati y ya entonces al Ahora aquí pone su bandera en false Y entonces imagínense que Bob dice Ay mira ya la puso Este voy a ponerla en true bandera y dice Ah sí Pues yo también otra vez y entonces aquí este dice ay disculpa al otra vez él dice false y al dice muchas gracias y toma el patio no y Tom el patio y entonces por final es otra vez dice false y así entonces podría pasar así infinitas veces que que Alice diga este ya acabé no y ve a la de Bob and true y enseguida la ponga and true y Bob diga ay lo siento no revisa
(56:31) la bandera de Alice y diga ay Lo siento este me retracto no y otra vez Alice pueda salir al patio y así entonces podría ser en realidad en este caso que Alice nunca nunca este nunca pueda tomar la sección crítica que la sección crítica en nuestro ejemplo no del de que vimos es este el patio no el patio es nuestra sección crítica aquí yo se los puse como de este estilo no sea aquí una sección crítica Pues podría ser un pedacito de código no se ya viéndolo desde elut es que está muy ch el protocolo no seguro pues lo
(57:16) hio quiso ver muy lindo no este entonces que siempre alguien el candado en esteo voye adquirir no y está está bien Okay entonces 58 ya son verdad sí este Bueno todavía Sí bueno Les explico este y aquí nos quedamos entonces cada hilo estation free libre de inanición no es que cada hilo que trata de adquirir el candado eventualmente tenga éxito entonces en en starvation free la diferencia es que todos no se se cumple se debe cumplir para todos este y y aquí vemos claramente que nuestro protocolo pues no era starvation
(58:08) free entonces eh aquí está un ejempl no por ejemplo tenemos el hilo a b c no los hilos Y entonces este a pasa la sección crítica y luego este se toma su sección crítica no Bueno aquí ah b e Perdón este es c y b Vale entonces así O sea eventualmente lo logran no cómo estees ya ya vamos a ver que hay candados muy bonitos no que forman a la gente este Ah bueno Vamos a ver uno al final de esta de esta es el último candado del de amp entonces cada cada llamada o sea como que la idea es que llamada al método lock no O sea eventualmente regresa o
(59:00) sea eventualmente pueden eh adquirir el candado a eso se refiere Entonces vamos a ver que si se cumple esta propiedad de stv fre oa Si todos O sea si todos tienen éxito Entonces se cumple obviamente deadlock free la otra no O sea alguien tiene éxito se alguien es una está contenido en todos no y bueno este hasta aquí nos quedamos y ya la siguiente clase seguimos seguimos viendo vale ya todo se despen nos vemos bye buen día
