(6) 2024 10 07 10 02 56 - YouTube
https://www.youtube.com/watch?v=dXYqBt_6ErI

Transcript:
(00:07) H rec prog Bueno entonces ya se publicó la tarea este se publiqué hace ratito a las 9 no entonces la tarea digo el examen es que pare t Bueno este examen espero que ya la hayan revisado Pero bueno aquí la leemos y este y seguimos con la clase e entonces instrucciones muy importante no siempre leer instrucciones y se resuelve de forma individual
(01:14) vale se resuelve de forma individual este entonces pues en realidad como pues cada quien está pues tiene sus amigos no su equipo y todo pues sí O sea pueden platicar entre ustedes este Aunque bueno no se me ha pasado a veces que no te pones de acuerdo con tu equipo no pero o sea discutan entre ustedes convéncelo de escribirlo cada quien escribe no no se vale compartir el documento Porque ahí sí sería como copiarse no y en realidad también tiene su dificultad siempre o sea una cosa es entender cómo resolverlo y otra cosa es
(01:53) escribirlo no Entonces eso sí se tiene que hacer de forma individual o sea pueden discutir entre ustedes no este tener reuniones y todo pero cada quien escribe su parte porque si no va a parecer que se copiaron y bueno va a ser como copiarse no y este y pues se les dividirá la calificación Vale entonces es muy importante esto eh consta de parte teórica y práctica Aunque la parte teórica es la pesada yo le aproximo como dos horas y este y también es la que vale más y ya la parte práctica pues es un ejercicio ah
(02:31) este que vale 15 puntos entonces la parte teórica y las preguntas de la práctica la entregan en el formato pdf este pues si escriben unas cosas en cuaderno y otras en no sé en en este PDF bueno en este Word o en latex no lo que sea este pues que todo que todo queda en un PDF vale Y agregan en un zip con su código que pues va a ser un Codigo ahí nada más este Ah bueno también si no sé por alguna extraña razón no no pueden entregarlo pueden entregarlo Un día después con para ser evaluado sobre nueve Este pero Eh Pues claro No si tienen algún
(03:20) problema ahí familiar de salud lo que sea pues Me comentan y Ya veré Ya veré yo este entonces parte eh el primer ejercicio vale oo puntos yo aproximo que se tardan 10 minutitos porque es muy sencillo es de la ley de amdal simplemente es si prefieres comprar un uniproceso Core ejecute 5 millones de operaciones por segundo o un multiprocesador de 10 cores en donde cada Core ejecuta un millón de operaciones por segundo y y este y bueno utiliza la ley deal para decidir vale si tu tu este te dedicas al cómputo paralelo y casi todo tu trabajo es 84
(04:07) por paraliz no O sea digamos que p va a ser este bueno 84 ya ustedes hacen la la fracción bueno el punto4 entonces este si es así paralelizado vale y ya pues nada más tendrían como que este que que sustituirlo no en la ley de andal cuando usen 10 cores aquí está y y tienes un millón de operaciones por segundo no en el Speed Entonces ese es el primero y digo no siento que est está muy sencillito y también no hace falta como que me escriban todo el despeje que van a hacer No si no O sea simplemente como de Us la
(04:53) ley de la usé de esta forma este y me quedó esto no Y entonces comparando con est otro me conviene más este o me conviene más el otro eh Muy bien ese ese es el primer ejercicio el segundo este e es trav el de los prisioneros pero miren este es como el sencillito creo que lo revisaron con Isabel Pero bueno sea consiste así eh Son son este p prisioneros vale tú eres uno de ellos Entonces el Guardia es así un comput tologo no se quiere divertir pues les dice esto todo lo que está aquí no se reunirán hoy a planear
(05:38) una estrategia sin embargo después se les aislará en celdas y no podrán comunicarse con nadie Vale entonces tienes como un ratito para ponerte de acuerdo Entonces este Guardia preparó un cuarto con un interruptor que no está conectado a nada y que solo tiene dos estados encendido y apagado entonces a cada uno lo pasará al cuarto de forma arbitraria O sea no no en orden no para cualquier número de n prisioneros eventualmente visitarán el cuarto n veces cuándo no sabemos no pero eventualmente visitarán el cuarto n
(06:12) veces para cada n prisioneros entonces en cualquier momento alguno de ustedes debe declarar ya hemos pasado todos si esto es correcto pues ya te liberas y si no pues serás alimento de cocodrilos no Entonces es Es igualito ya vieron pero aquí el rollo lo difícil es que Ustedes deben crear una estrategia cuando no conocen el estado inicial del interruptor Esa es la la dificultad Vale entonces este ustedes escriben su estrategia como seudocódigo o como una descripción vale como más les guste y y este argumentar
(06:57) porque su estrategia es correcta para cualquier númer prisioneros es decir por qué cuando decimos ya hemos pasado todos realmente pasamos todos no entonces este argumento pues pues yo creo que como es n es para n prisioneros Pues debería ser así no en el primer este basta con hacer dos casos no no no Fernanda digamos que no conoces O sea digamos que el Guardia este no este no te dice cuá es son o cuá es vale Entonces digamos que es como este tú tienes que hacer una estrategia general pensando que el guard a veces te
(07:38) lo va a poner en on y a veces en off no es como justo para dos casos no sino sino uno uno solo pero pues tienes ese problemilla antes Cuando sabías que era on no O sabías que estaba en off no me acuerdo este pues sabes que si está en on no sé nadie ha pasado no ent lo levantas Y entonces el que cuenta siempre lo baja pero acá cómo le haces si no sabes que que siempre está en on O sea si que que cuando est en on nadie ha pasado no O sea que realmente está que no hay nadie entonces esa es la dificultad justo de este ejercicio o sea
(08:17) no no hacer dos casos sino hacer uno para cuando no sabes si el guarda te lo ponen un o bueno al inicio vale Entonces eso es y el este este B este Ajá tienen que argumentar si es correcto Entonces como es de para n prisioneros pues escriben no O sea no una demostración así tan rigurosa pero sí que escriban este pues aasí a grandes rasgos como Cómo funcionaría no O sea como de Pues en la primera iteración no este en la iteración eh uno pues este puede pasar puede pasar un prisionero y y así no y ya después dicen en la
(09:15) interacción y este más un no si todo está bien como que ahí es donde construye no el caso inductivo vamos a suponer no suponemos eh que en la i han pasado y prisioneros no Y ya y dicen Pues porque en el código bueno porque en mi seudocódigo o porque en mi descripción siempre este eh Porque en la descripción No sé no s El Paso dos Pues siempre pasa esto no Entonces cuando es el caso uno pues es Es correcto que pasan y más un prisioneros no y así o sea es como pero con que lo cuentan les digo O sea no hay que hacerlo así tan detallado pero sí
(10:10) una buena argumentación no en inter pues sabemos que pasa este prisionero se complicas o y en la en la i han pasado así porque en la descripción pues sucede Esto entonces en la i más un pues deben pasar I más un prisioneros y al final Pues claro no O sea no importa el número de n Pues siempre vamos a contarlo y siempre va a ser correcto cuando digamos ya hemos pasado todos entonces así va este dos y este dos yo digo que se tarda yo puse 20 minutos pero siento que este igual el 30 as como que como que quedan pensando así Cuál
(10:47) será la estrategia que lo que en lo que cacha estrategia no este este otro de acá es un candadito para dos hilos vale Ah De hecho inspir en uno de sus códigos de la práctica este alguien que me mandó un código y dije Ay mira Está bien bueno eh Entonces mir tenemos dos variables compartidas no este que son vitim que inicialmente está en falso y es volátil y esta otra que es una bandera este también buana que está en falso no Pero bueno victim ya es no es un entero no es uno es una bandera bolen Entonces el candado el
(11:37) método lock consiste en que primero checas si la bandera está en verdadero si está en verdadero te vas a quedar aquí y si no pasas acá y luego checas en línea este seis si la víctima ya está en verdadero si te si no te quedas aquí y si no pasas entonces este son dos hilos y este para dejar el candado simplemente lo que haces es poner la bandera en false primero y luego en Vale entonces este tienen que responder si cumple con exclusión mutua vale si es así este presentan una prueba por contradicción o sea eso sí es semestral
(12:23) vale aquí dice demuestralo solo argumento entonces hay que decir suponemos que existen dos s los que entran en la sección crítica al mismo tiempo y pues argumentar porque es realmente Una contradicción no eh Bueno aquí obviamente Me faltó suponer por contradicción y si no presenta un contraejemplo O sea si ustedes dicen no Mira yo encontré una ejecución en donde no se cumple exclusión mutua Pues con eso con que la describan y entonces no se cumple exclusión mutua porque yo encuentro una ejecución en la que no se
(12:56) cumple y este y Argumenta si cumple con deadlock free vale eso es esta otra este entonces la TR Bueno este el ejercicio cu es muy similar a lo que ya han hecho siento que este ya hasta lo tienen pensado está en la respuesta pero este siento que ns se tardan un poco en escribir pero miren este es hablando de generalizaciones de peterson ahora sí que como lo que hicimos en dou peterson en la práctica y lo que ya hicieron en la tarea dos pero este ya pensando esta que es una generalización similar a filtros allá para nilos
(14:06) tan grande como queramos pero ya solo escribo estos entonces en cada nudo del árbol pues tenemos un candado peterson un cadito peterson y supón que n es una Potencia de dos y n corresponde al número de hilos no entonces pues este pues en este caso tenemos n Eh Pues sería igual a cu no entonces Dice que dos hilos se asignan en una hoja del árbol O sea que por ejemplo aquí va a estar el hilo el hilo cero y el hilo un no Y así todos todos los nodos o sea todas las hojas tienen lo cero y a bueno Aquí está entonces en el
(15:01) método adquirir lock del árbol el hil lo debe adquirir todos los candos desde la hoja hasta la raíz O sea que siilo quiere Acceder al cado final a este Pues tendrá que tomar este y luego este y luego est no Y para dice que el método unlock consiste en dejarlo al revés no dejas primero la raíz y luego dejas el siguiente bueno que de el mismo empiezas así para hacer en [Música] y el lo es hacia arriba ya si se dan cuenta es muy similar no es como este y ya pues considera que que pues nuestro sistema es asíncrono O sea que
(15:46) los hilos corren así a distintas velocidades y que que pueden detenerse por un periodo finito de tiempo no y toman como vacaciones pero que siempre avanzan se siempr en los hilos siempre este se detienen no pero pues siempre regresan Esa esa es esa es como la la implementación vale si se dan cuenta pues funciona para un número n de hilos no en este caso o sea puede ser descrito como filter Eh paraos entonces deben argumentar si cumple con exclusión mutua si cumple con est Vision free y o sea igual no hace falta que demuestren
(16:25) peterson Ya peterson hay que suponer no que ya sabe sabemos que cumple explosión mutua y que cumple starvation free entonces Ustedes deben deben argumentar estas dos y finalmente decir si existe una Cota superior en el número de veces que unilo pueda ser aventajado vale si existe una Cota y pensando que el árbol puede ser tan grande como sea no este ha n n puede ser dos a la no sé dos a la muy grande no do a la 16 a la 32 sé cuántos hilos hay entonces bueno tienen que que decir si existe una Cota o no este Qué es cono es aventajado
(17:12) eh qué se refiere a este lo escribo y lo a es aventajado por un hilo B s este B toma Bueno voy a escribirlo así entra a la sección crítica una vez Bueno voy aer más de de una y ya sigue e ejecutando lo vale o sea como que por ejemplo
(18:17) decimos no este a novella aventajo una vez no ya lo aventajo dos veces tres veces o sea quiere decir que ya entró tres veces a la sección crítica y y y este y ya pues no Ah Sigue ejecutando el lo no sea quiere entrar pero pero pues Bella le ganó lo aventajo ya tres veces no Y dice o sea que Sigue esperando a tomar el candado Ajá Exacto sí s o sea quear lo quiera Esa es la idea no o sea los dos quieren Entonces tenemos así al a y al B no entonces tenemos a la el la quiere no y está aquí ejecutando su lock y ve dice Ah mira yo ya lo tomé y
(19:11) ya lo dejé y ya lo volví a tomar ya lo volví a dejar no O sea este Ya ve ya ya este tuvo varias este secciones críticas no Y la aventajo ya en este caso pues una dos no O se ya lo rebasó y ya pues sigue ahí tratando de delá no y aquí dice que que los hilos Pues sí se pueden detener pero siempre regresan [Música] no Ah sí no se me borra Es que a veces se borra lo que escribo aquí este entonces así así vale entonces se pueden detener pero siempre regresan vale No no no se van por siempre entonces considerando eso si existe una Cota o si no o si no
(19:56) existe Simplemente no y bueno si existe la Cota pues de qué de qué tamaño no y si no pues simplemente argumentar bueno no existe Porque existe este caso en el que a no sé hasta puede ser aventajado infinitas veces no a bien s me borro Esto bueno que había escrito aquí los unlocky lock y por eso me gusta más qui notes Pero bueno yaora había escrito aquí pero la idea es esta no pero no necesariamente debe ser por el mismo hilo m Ajá sí no por No necesariamente por el mismo hilo Sí o sea simplemente que sea aventajado no Por ejemplo si son somos n
(20:46) en este caso somos dos n hilos no porque hay hay este hay dos hilos por cada n n hojas no en este caso entonces considerando eso realmente me pueden rebasar nada más dos dos nilos no así o me pueden rebasar 12 neilos al cuadrado no O realmente nadie no O sea no no hay una Cota porque pues en realidad me pueden arrebasar un millón de veces no Y el mismo o sea no existe como como una Cota vale Sí entonces ya el siguiente es este de acá ejercicio sí curioso no es como para ponerse a pensar es como creo que el agregado porque en realidad el da ya
(21:39) lo saben siento no si si es similar a Peters son y el c es así como es algo nuevo entonces Bueno Este otro es está muy sencillo siento y si siento que en 10 minutitos deben argumentar si esta ejecución es una ejecución de la weight free para dos hilos o sea de esta de acá que vimos en clase de esta Y pues simplemente recordarles que esta implementación es linealiza Ya lo habíamos demostrado no Bueno lo habíamos visto porque era linealiza hasta habíamos encontrado un punto de linealización Y entonces Este siento que
(22:18) est está como bueno sencillo espero entonces deben Mostrar simplemente decir que sí O sea si sí es si es una ejecución de esta o no no es posible que se una ejecución y decir si es linealiza o no Entonces para ello pues mostrar una linealización una linealización simplemente pues es una historia s no de cómo sucedería la pueden escribir o la pueden simplemente dibujar aquí no este decir Ah Pues esta sucede esta esta esta O sea sí vale Este Entonces está siento que sí 10 minutitos no eh esta otra de crear una ejecución de
(23:00) un registro que sea regular que no sea linealiza y que no sea consistente en una actividad no Entonces está curiosa Vale entonces se acuerdan no un registro regular era que tenemos escrituras Este atómicas pero las lecturas no son atómicas no entonces aquí tenemos no lecturas atómicas y luego que no sea linealiza este pues igual no este pues no lecturas ni escrituras atómicas en ese caso y consistente la inactividad y que no sea consistente la inactividad pues sera que no este que en ciertos periodos no de de inactividad Tenemos aquí un montón
(23:54) de operaciones y así este se se reorden no entonces así así va la conen in actividad Entonces igual no que la plante puede ser de no sé si ustedes Encuentran una que sea simplemente de no s dos operaciones pues escriben No si otra de cuatro pues está bien o sea pero como el número de operaciones que quieran vale siempre y cuando sea regular inable y no la inactividad y muy importante solo una ejecución no no implementación O sea no quiero código o sea solo es una ejecución como que la dibujen o que la redacten no O sea como que dicen Ah Mira
(24:36) pues es que sucede una operación read y concurrent una operación gide y así O sea o la pueden describir o la pueden dibujar como quieran eh Y el siguiente punto es es este otro si al final de la ejecución a continuación el arreglo a Table en la implementación del snapshot we free es el siguiente es correcto la ejecución corresponde a una ejecución de la implementación del Snapchat o sea de este de acá vale el Snapchat fre era este pues tenemos el update no y los updat si se acuerdan la línea en esta de aquí escriben
(25:25) enable escriben el Snap este Por qué Porque en la línea 3 se tomó un escan entonces este y el scan pues era esto no de que si alguien se movió dos veces pues te robas la vista si vas solito escribes tu vista solito entonces así así entonces La idea es que o sea veen que es distinto a lo que vimos en la tarea en la tarea yo les había dicho que si no s la vista tres era tal no Y la vista dos era tal pero en este caso no les estoy dando las vistas Les estoy dando lo que escribieron en el Snap los updates ya vieron entonces La idea es que si al
(26:11) final digamos que en este punto no en este punto en el tiempo sucede esto realmente eh deben argumentar o sea decir como de Mira sí corresponde a a Pues a una ejecución del Snapchat with fre o no corresponde porque no es posible que ya escribe no si sí pues hasta dice no pues mira hasta podemos acomodar el update aquí este de ve acá Este no sé el descanso se ve acá eh Y si no es Pues dice no es que no es posible que que a esté escrito aquí no o que o que sea est escrito aquí o sea Vale y muy importante les digo o sea
(26:55) en realidad tomen en cuenta que es distinto a lo que les compartí una tarea o sea la tarea eran teníamos les daba las vistas y aquí les doy lo que está escrito en el arreglo a Table en el Snap y Quién escribió en el Snap Pues los updates no vale entonces ahí si que está encita pero está como bueno tiene truco como que si no notan eso o sea si confunden las vistas con los snaps pues ya valió Entonces ya finalmente esta otra es [Música] este si teniendo igual esta implementación de si el arreglo de registros de table Pues habíamos visto
(27:41) que eran atómicos no eran registros atómicos de varios escritores un solo lector entonces este aquí la situación es que si si este en vez de que sean atómicos los cambiamos por registr analizar si el Snapchat seguiría siendo linealiza o no vale Eh entonces cómo es esta argumentación Pues dicen Mira si es regular podría ser que no sé que un update se traslape con un Snap no O sea si ustedes encuentran que no es analizable pues escriben no este perdón con un esc más bien eh y ya ustedes escriben una ejecución así
(28:31) no si no si no es si no es realizable pues di No mira no es laliz y aquí yo tengo un ejemplo de Por qué Y si s es laliz no si es Pues dice no sea es que siempre se mantiene el punto de leración no y decho está en esa línea en la línea no sé pues ahí está en el lib habíamos visto era la línea este 18 No aj si 18 usted Sigue manteniéndose todo es laliz Vale entonces este puntos de linealización entonces así son las dos cosas que podrían pasar o sea bueno que ustedes podrían contestar si es o no es y no es contraejemplo si es puntos linealización
(29:28) y ya está cómo lo ven parte teórica está un poquito larguito pero siento que unos ejercicios salen muy rápido y este entonces esta parte práctica está muy sencillita yo siento muy y de hecho tal vez que no est este este convencido de su respuesta de fake peterson este del ejercicio 3 candadito este que les puse pues podrían tal vez correrlo primero no entonces La idea es que prueben este candado utilicen un executor service para ejecutar 400 tareas y consideren que una tarea pues es un incremento un contador sin
(30:13) consistencia es decir un contador sin sincronize y sin eh paquetería atómica no y contestar aquí no si el candado cumple exclusión mutua siempre contará 400 tareas no entonces pues sí O sea analicen no O sea en realidad tienen correcto este pues tendrán correcto el de arriba Entonces analicen si cumples clusión mutua No si siempre cuento de 400 y además analizar si cambias el resultado a volátil en ambas variables o ninguna o sea perdón si cambias este a volátil no las los dos Campos porque yo sol les había puesto la variable victim
(30:49) como volátil no si se cambia eso sigue siendo este se sigue cumpliendo es mutua o ya no se cumple vale entonces este y argumentar Por qué no Por qué si yo le cambio a volátil Pues sigue sigue manteniéndose el resultado o ahora cambia no ahora ahora antes se cumpla es muto ahora no se cumple o al revés no Entonces yo creo que Ajá sí sí Exacto Sí con una captura vale como Mira no cumple y aquí está o no siempre cumple yo lo ejecuté 100 10 veces y este y siempre cumple vale Y este si se dan cuenta pues es este ya si no quieren analizarlo
(31:44) por la parte teórica que desde aquí yo lo veo no pero por la parte práctica este qué tal No analizarlo primero No ya de aquí pues este tal vez lo difícil no sé sería como si no es si no cumplea pues encontrar ese contraejemplo qué está pasando que no que no este que no cuenta las 400 no o al revés no no Mira siempre cuenta y se cumple mi demostración Aquí les va no entonces Bueno en realidad están como están unidos El tres y el y el este ejercicio de práctica vale Pero nos está como sencillo no O sea nada más lo copian lo
(32:26) corren con un programa que ya tiene ya los tienen hechos y analizan entonces este este es el examen cómo lo ven dudas de redacción o como que ideas que tengan para ya resolver lo que que nos quieran preguntar pero bueno si no di dice Camilo que en el de los prisioneros A qué se refiere con lo de pasar de nesas se refiere a que este se acuerdan que yo les había escrito en el anterior de en el que hicieron la tarea no que les había puesto este pasan con una frecuencia de cada dos n pasan n veces Pues digamos que en este caso es que para cualquier
(33:28) número de n los prisioneros eventualmente pasan al cuarto n veces es decir no que Este si por ejemplo n es igual a no sé 10 no tenemos los prisioneros del 1 al 10 por ejemplo del o al 9 no Entonces si si veces eh pasar entonces tenemos que el prisionero cero pasó una vez no el cero pasó otra vez y luego pasa el uno pero luego vuelve a pasar el cero y luego pasa el dos y luego el cer0 este Entonces supongamos no esta es la vez 1 2 3 4 5 6 7 8 9 y 10 y por ejemplo aquí vuelve a pasar el cero no este si se dan cuenta aquí el cero ya
(34:35) pasó 1 2 3 4 5 6 seis veces no Entonces en este caso dice que pasa para cualquier número de n visita el cuarto al menos n veces no quiere decir que le faltan otras cuatro cuatro cuatro veces más para que deje de pasar hasta que pasen 10 veces todos vale como que aquí entonces hay un número de límite de veces que pasa cada prisionero o puede pasar cada prisionero más Dn veces Ajá Exacto es como un límite No si un prisionero va a pasar más de n veces quiere decir que ya todos pasaron al menos n veces no sí pero eventualmente
(35:40) no en algún momento Si eso no no lo tenemos así por ejemplo aquí este en este caso pues ya pasó el cero seis veces le faltan cuatro más No pero de ahí qué tal que ya empieza a pasar mucho el uno no y luego pasa el tres y y así entonces como que al menos sabemos que que este que 10 * 10 No eso en que lo diferencia con la tarea que eran dos n veces y así HM Pues que aquí digamos que es n por n no n por n veces cada n por n veces o sea cada n cuadrática pasamos todos no Ah y soel creo que apenas en ver esto verdad lo
(36:24) diferencia la tarea en el en en que ahora no conocen el estado inicial vale es la diferencia con el que vieron la tarea y es Es difícil subir la clase hoy sí sí sí siempre se la subo casi Bueno a veces los viernes cuando voy no se la subo pero sí Este sí se la subo ahorita este Vale entonces este es la diferencia y es la dificultad que no conocemos el estado inicial en el otro pues decías bueno es que siempre está en Y entonces quiere decir que o nadie ha pasado o ya pasó alguien entonces cuento uno no o me cuentra nada más a mí ya el siguiente ya
(37:00) cuenta pero acá no sabemos si está en on al inicio o está en off entonces hay que diseñar esa estrategia cuando no sabemos vale Entonces digamos que siento que la traducción de esto sería que cada n por n veces no siempre pasamos todos lo menos te consta que cada por n por n veces ya pasamos todos vale entonces así es Y bueno ya lo poquito que me queda para darles la clase entonces o tienen otra duda Bueno si no se les ocurre y si no 5 minutos antes vale de Ah vale dice para Los Pioneros si pueden ver la palanca este
(37:51) dice Alejandro dice cuenta que lo que dice aquí es e a ver qué dice pero y los prisioneros si pueden ver la palanca Ah digamos que solo la puedes ver de un en uno porque la palanca o sea el interruptor solamente está en el cuarto o sea dice dice dice el Guardia prepar un cuarto con un interruptor que no está conectado a nada y que solo tiene dos estados on y off Entonces digamos que la idea es que llegas al cuarto y simplemente lo ves En on menos vale pero no es como que vean así todos así como de Ay la luz No desde
(38:26) el cuarto de acá no O sea ves que está aislado ese cuarto y que pues solamente si te lleva ahí pues lo ves y tal vez puedas cambiarlo vale Ajá sí sí vale vale Okay entonces este e qué qué demostramos la clase anterior Bueno demostramos uno que los registros ti número de consenso Exactamente igual a uno y demostramos que eh la escolas tien un número de consenso de al menos dos es es muy importante este al menos pues bueno Demuéstralo este si aquí les va un protocolo de consenso para dos hilos no es lo que es la demostración de ese teorema es la prueba
(39:22) Pero además ya este este teorema es así más más estricto este las colas tienen un número de consenso justo Igual a dos no Entonces ya no es al menos dos ahora es justo Igual a dos Entonces qué quiere decir que pues debemos demostrar que no se puede que no existe un protocolo para tres hilos o más y la la prueba es esta de aquí está ahí dibujador bien bonito entonces la idea Pues es que tenemos un estado inicial este estado inicial es este es bivalente no o sea puede valer cer0 o uno y también es crítico O sea
(40:02) que si se mueve B pues se cambia un estado univalente y si se mueve a se cambia un estado univalente entonces acuérdense del protocolo que vimos la clase anterior que simplemente es tenemos inicializada la cola tenemos Win y Lu no este Y entonces La idea es que pues si ya se mueve primero Pues a va a obtener Win no va a ganar y b voy a obtener luz y viceversa si se mueve primero pues obtiene Win y a que le queda pues perdedor no entonces esteo imagínense no que así en este escenario son dos ejecuciones distintas
(40:41) y y aquí por ejemplo si ya se mueve Pues él obtiene x no y supongamos que x pues es este x es Win x y pues es Win no y se mueve acá pues también obtiene x y es no o sea son dos ejecuciones distintas y luego pues supongamos que este en este caso no si ya se movió primero en este caso si ya se movió primero Pues ve que le queda pues obtener Win no perdón obtener y y ya pues dice dice B No pues no obtuve x no O sea sabe que perdió y también en este caso si B Se movió primero pues obtiene y y pues sabe que perdió y pues como es para tres hilos tenemos
(41:41) el hilo c no y s pues ahí corre dice que corre solo o sea que no se traslapa con nadie no s ahí este Pues digamos que aquí en este caso eh a lo lleva un estado univalente no Ya por ejemplo suponemos que dicho quera quería cero no quea un estado cero Valente que valiera cero al final y que un estado uno Valente quera que se decidiera uno al final pero sorpresas en realidad este estado no s prima y prima prima estos dos estados deben no porque en este pues claramente a ganó Y en este claramente B ganó y se decidió lo que su voluntad no
(42:33) O sea aquí se decidió cero y acá se decidió ya uno pero c si se dan cuenta ve lo mismo no para c la col está vacía y cómo va a ver si ganó a o si ganó B Entonces los estados s y s prima prima s prima son indistinguibles para sí no Entonces es una contradicción que en uno decida cero y en otro otro un no vale entonces si lo ven aquí este y bueno no sé ustedes dirían Bueno en vez de poner O sea no le dejes la cola vacía No a c qué tal que que tal que la
(43:39) cola tiene pues más elementos no se como que me imagino esto no como de No pues qué tal que es Wi y que esta sea luz y que esta sea luz No pues sí O sea al final al último hilo al que termine de ejecutar este pues el primer hilo va a obtener Wi no el hilo el hilo a no por ejemplo el otro hilo pues va a ober b va a obtener luz y el hilo c también va a obtener luz no entonces este de hechoo B Cómo va a ver no si en realidad le ganó c o le ganó a también ahí No este Entonces no hay como no hay una forma de poner esto O sea de Y bueno ya
(44:29) también lo he intentado ahí como qué tal que en vez de ponerlos hacer o sea en vez de inicializar la cola qué tal que decimos que que ya inserte algo no O sea en vez de que está inicializada la cola ya con enq así no y el protocolo en Des Side pues es un deq qué tal que es al revés no qué tal que la cola está vacía y lo hacemos en No pues es que siempre pasa lo mismo nunca sabes quién fue Quien metió el primer elemento Vale entonces es así entonces por eso es este Ah bueno aquí está otro Ah creo que justo Aquí está lo
(45:08) que esta platicando Bueno entonces este Este es otro ejemplo de otro otro estado Ah miren Aquí está al revés no Ajá sí O sea aquí es este Eh bueno duda si el inicio solo estuviera en colado win si Cuando des en y en su propuesta paraos los demás des encn igual y podrían llegar al con a interesante ver este si solo está en cola Win tenemos una cola y solo tenemos Win dice si cuando lo des Win bien sual Oh ya O sea que ahí mismo se decida O sea que no porque si te das cuenta acá la diferencia es que tenemos el arreglo propose no O sea digamos que
(46:04) en en la cola no no está lo que lo que vamos a decidir no sino que está Aparte en del arreglo propose value no Entonces tú dices que este ya entonces me me imagino que este Y es que este ardo está el problema no porque es Wi free O sea no no tenemos candados como para bloquear la cola y encolar en veces antes de que alguien se le ocurra desencolar Ajá sí o sea es que sí como que podrí ser un protocolo que medio funcione pero por ejemplo si O sea supongamos no que que Lilo dice no pues yo hago el de que este y y saco Win no y ya entonces
(46:55) decimos si win no O sea si yo des encol Win entonces en Cola en un forno por n bueno por n hilos o sea por el tamaño de número de hilos que tenemos en no en de El valio que yo quiero no el vali que yo quiero que se dec Entonces el problema si va a ser est que qué tal que te Gan y alguien obtiene no sé pues después Aquí está nul no alguien obtiene nul sabe que perdió pero no sabe quién ganó entonces Y como solo puedes ejecutar de una sola vez Entonces ya no se cumpliría no no sería un protocolo de consenso si es el problema es que es
(47:47) free O sea no usamos no usamos este candados no Y si usamos primitivas pues tienen otro número de consenso no compan tiene un número de consenso infinito pero pues eso ya sería otro Ajá Exacto como nos bloqueante no se puede sí sí sí sí pero sí interesante Sí también me ha pasado que que estoy así digo no Cómo no se va a poder Bueno digo qué tal que lo acomodo así o asá y así pero luego me quedo sí O sea no O sea como que funcionaría un poco no si no se traslap O sea si este realmente puede hacer todos los Us antes no pero si hay
(48:28) alguien que se traslapa con él pues Puede que no salga bien no pero es interesante entonces bueno en en este otro o se digamos que esta es como considerando el protocolo que teníamos vale de que pues está inicializada la cola y entonces los hilos a y b Pues solo hacen un dq Y en este caso es que partamos de una cola vacía ya vieron una este cola vacía y entonces también tenemos un estado balente crítico entonces este eh Por ejemplo no a se mueve primero pues sabemos que si a Se movió primero pues va a estar primero el valor que en
(49:14) colo a no Y en este caso si B se mueve primero pues estará primero el valor que en Cole b y este y Y cómo será AC bueno es otro protocolo se me ocurri otra forma pero bueno en el libro lo plantean de esta forma dice que sí pues sí est idea es que consideremos una cola vacía y hagamos un en dosos entonces La idea es que a va a correr hasta que des encle a no en este caso y pues se va a dar cuenta que este que que que pues é él no había ganado No porque no obtuvo otro valor que no es el mismo o sea no no sacó más y acá Este La
(50:19) idea es que ve igual corren no O sea digamos que los dosil los este corren hasta que desencolar no que que que saben entonces este al final resulta no que si tenemos un protocolo de s que te dice Bueno encola tu valor no encola tu valor y desencolar este de hasta bueno sí bueno es un dequ más bien no de K este no sé algo no algo si algo este es distinto a tu value Pues sabes que perdiste no pero bueno al final resulta que el
(51:27) dejan la cola igual no a c pero bueno a mí se me había ocurrido Este pero les digo no sea en realidad podemos hacerlo de varias formas y van a ver que siempre no vamos a poderlo para tres hilos vale o sea como aquí en el libro te plantean dos formas esta pues es considerando el protocolo anterior y esta otra es un protocolo más más este pues más curioso no O sea en colas y luego este Ajá los os ilos corren no por encolar Pero pues siempre va a ganar uno y luego los os corren por desencolar y pues va a ganar
(51:59) siempre uno pero al final le van a dejar la cola vacía así o viceversa no si los tres hilos encolan al mismo tiempo y los tres hil los des encolan al mismo tiempo tampoco van a cachar como quién Quién fue el primero No este Cómo cómo me consta a mí como si ya des en colo a o si ya des en colo B Entonces es así este pueden hacer así como como Eduardo no este yo yo planteo un un qué tal que hacemos esto y ver así no Es que creo que no se va a cumplir en todas las ejecuciones no entonces Bueno lo que nos dice esto es que este pues es imposible
(52:40) Bueno este corolario que es imposible construir un implementación weight free de una cola pila conjunto lista A partir de registros atómicos Por qué Porque se acuerdan el corolario que vimos acá aquí no nos dicen es imposible construir una implementación weight free de cualquier objeto que tenga un número de consenso mayor aú con solo registros atómicos Vale entonces es lo que nos dicen por qué porque estánd está es esta es este col ario no nos dicen que si queremos implementar algo del del del dos no tenemos que usarlo al menos
(53:39) este con objetos que tengan un número de consenso igual a dos o mayor es como que es la idea vale Entonces digamos que que este estos objetos los infinitos no con infinito pueden implementar cualquier cosa cualquier cosa no pero resulta que este solo puede implementar hacia este no este solo puede implementar hacia los de abajo y así O sea digamos que la implementación O sea la la computabilidad en el mundo de memoria compartida solo es de arriba o sea de los más poderosos de los infinitos hacia abajo entonces es por eso que
(54:19) este en este corolario ya demostramos que la los registros atómicos tienen un n de consenso igual a un y las colas tienen un número de consenso Exactamente igual a dos Entonces esto que nos dice que que pues este en esta jerarquía no colas no pilas este y otros más nos dice que que como es tiene un número menor no puede implementar nada mayor a él Vale entonces este ya si ustedes dicen Ah bueno es muy importante no para para n hilos y weight free o sea sin candados no este Entonces ustedes les dicen Oye yo quiero que me implemente
(55:13) una cola este para en hilos que no tenga candados Pero no tengo más que registros atómicos que solo pueden leer y escribir pues ya ustedes dicen no imposible no este ocupo al menos la paquetería tomic este y quiero la la la este Quiero un comper set no O quiero este pues sí comp de los que conocemos no ahorita pero sí O sea con algo menos poderoso que las colas O sea no podemos implementarlas siempre tiene que ser con algo más entonces es lo que lo que nos dice eh Ah 58 este Bueno entonces después eh nos plantean
(56:05) los objetos de mn asignación que si se dan cuenta son los que están en la en la jerarquía acá los objetos de mn asignación Bueno aquí lo ponen todo en nombre de de m pero es la idea este yene un número de consenso mayor a las a las colas y están hechos con registros atómicos pero sorpresa usan sincronize no pero bueno o sea esto es esto es el objeto como tal vale No no es el protocolo solo es el objeto entonces un objeto de mn asignación cuando para n menor o igual a m y m este mayor a uno [Música] m n menor Ah no n mayor verdad n mayor o
(57:03) igual a m y m mayor a 1 consiste en que tenemos un arreglo de n elementos Ah un arreglo de n elementos y este y el método assign este de aquí toma como argumento mi valores de 1 de bueno para y de de 0 a m men un vale Entonces digamos que los valores aquí los parámetros que va a tomar Pues es de cer0 0 a n-1 vale los el input de de assign entonces lo que va a hacer es que va a asignar un valor V uno al elemento I de forma atómica o este pues de forma atómica o digamos que todo ya este pues como aquí lo manejan no en
(57:54) sincronize o sea este cada hilo puede hacerlo de forma este o sea asigna todo esto en una vale o sea en un candadito o de forma atómica Entonces el método r simplemente le el valores del índice en el arreglo entonces cómo funciona bueno es importante aquí notar que este objeto es el Dual del snapshot atómico Ah ya me dieron las 11 Entonces se acuerdan que un Snap atómico lo que hace es que hace una lectura atómica Pues en este La idea es que hagamos una escritura atómica Vale entonces en vez de lecturas atómicas de n
(58:42) registros hacemos escrituras atómicas de n registros es la idea de este entonces por eso tenemos valores de 0 a m le escribir todos Okay entonces Pero bueno aquí nos quedamos igual si tienen alguna otra duda de la de la tarea del examen este pues si quieren o si no pues ya nos vemos el miércoles vale Y mañana eh Isabel está disponible no para ayudantía entonces traten de resolverla de una vez est si ya traer dudas No Entonces nos vemos Bye Buen día record
(1:00:25) al al al al
(1:02:25) al al al al
(1:04:25) al al al al
(1:06:25) al al al al
